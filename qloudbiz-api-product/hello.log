2018-11-20 11:39:11,435 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:39:11,439 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:39:11,473 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:39:11,597 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:39:11,597 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:39:11,618 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:39:11,619 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:39:11,623 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:39:11,628 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:39:11,628 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 11:39:11,629 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:39:11,629 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:39:11,632 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:39:11,632 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:39:11,633 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:39:11,634 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__task_procedures.sql
2018-11-20 11:39:11,635 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:39:11,641 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:39:11,645 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:39:11,659 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:39:11,675 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:39:11,680 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:39:11,682 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:39:11,688 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__task_procedures.sql ...
2018-11-20 11:39:11,690 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a task
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:39:11,697 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:39:11,700 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:39:11,701 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__task_procedures.sql (filename: V1_0_1__task_procedures.sql)
2018-11-20 11:39:11,712 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.050s)
2018-11-20 11:39:11,749 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 11:39:11,758 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 11:39:11,761 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 11:39:11,772 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 11:39:11,773 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 11:39:11,773 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 11:39:12,126 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:39:12,126 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 11:39:12,178 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:39:12,178 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 11:39:12,187 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 11:39:12,189 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init test table
2018-11-20 11:39:12,192 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 11:39:12,194 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 11:39:12,194 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:39:12,194 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:39:12,237 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:39:12,238 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init test table
2018-11-20 11:39:12,244 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 11:39:12,245 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 11:39:12,249 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 11:39:12,258 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - task procedures
2018-11-20 11:39:12,259 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a task
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:39:12,261 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 11:39:12,261 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:39:12,262 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:39:12,264 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 11:39:12,265 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 11:39:12,265 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - task procedures failed! Please restore backups and roll back database and code!
2018-11-20 11:39:12,267 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 11:39:12,269 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 11:39:12,281 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 11:39:12,285 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 11:42:20,484 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:42:20,489 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:42:20,531 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:42:20,644 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:42:20,645 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:42:20,667 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:42:20,668 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:42:20,673 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:42:20,678 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:42:20,678 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 11:42:20,679 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:42:20,680 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:42:20,682 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:42:20,682 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:42:20,684 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:42:20,684 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 11:42:20,686 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:42:20,691 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:42:20,697 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:42:20,709 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:42:20,723 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:42:20,730 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:42:20,732 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:42:20,736 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 11:42:20,738 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a task
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:42:20,753 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:42:20,755 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:42:20,756 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 11:42:20,794 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 11:45:24,520 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:45:24,524 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:45:24,560 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:45:24,671 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:45:24,671 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:45:24,692 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:45:24,693 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:45:24,697 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:45:24,701 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:45:24,701 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 11:45:24,702 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:45:24,703 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:45:24,705 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:45:24,705 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:45:24,707 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:45:24,707 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 11:45:24,709 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:45:24,714 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:45:24,719 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:45:24,730 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:45:24,743 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:45:24,750 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:45:24,753 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:45:24,757 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 11:45:24,760 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:45:24,771 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:45:24,775 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:45:24,777 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 11:45:24,817 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.083s)
2018-11-20 11:45:24,820 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 11:45:24,829 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 11:45:24,831 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 11:45:24,845 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 11:45:24,846 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 11:45:24,846 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 11:45:24,914 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:45:24,914 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 11:45:24,954 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:45:24,954 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 11:45:24,962 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 11:45:24,964 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init test table
2018-11-20 11:45:24,967 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 11:45:24,970 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 11:45:24,970 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:45:24,971 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:45:25,014 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:45:25,014 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init test table
2018-11-20 11:45:25,017 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 11:45:25,018 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 11:45:25,022 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 11:45:25,037 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 11:45:25,040 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:45:25,042 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 11:45:25,043 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 11:45:25,043 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:45:25,047 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 11:45:25,049 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 11:45:25,050 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-20 11:45:25,056 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 11:45:25,057 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 11:45:25,061 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 11:45:25,065 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 11:47:56,336 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:47:56,341 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:47:56,371 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:47:56,482 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:47:56,483 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:47:56,504 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:47:56,505 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:47:56,510 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:47:56,514 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:47:56,514 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 11:47:56,515 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:47:56,516 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:47:56,518 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:47:56,518 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:47:56,520 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:47:56,521 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 11:47:56,522 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:47:56,527 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:47:56,533 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:47:56,548 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:47:56,558 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:47:56,567 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:47:56,569 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:47:56,574 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 11:47:56,576 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:47:56,583 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:47:56,595 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:47:56,595 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 11:47:56,647 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 11:48:35,852 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:48:35,858 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:48:35,896 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:48:36,011 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:48:36,012 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:48:36,036 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:48:36,037 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:48:36,041 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:48:36,046 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:48:36,047 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 11:48:36,048 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:48:36,048 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:48:36,051 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:48:36,052 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:48:36,054 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:48:36,054 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 11:48:36,056 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:48:36,061 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:48:36,070 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:48:36,087 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:48:36,101 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:48:36,107 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:48:36,110 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:48:36,116 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 11:48:36,118 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:48:36,130 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:48:36,138 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:48:36,138 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 11:48:36,185 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 11:48:50,352 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:48:50,358 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:48:50,397 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:48:50,516 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:48:50,516 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:48:50,538 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:48:50,539 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:48:50,544 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:48:50,549 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:48:50,550 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 11:48:50,551 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:48:50,551 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:48:50,554 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:48:50,554 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:48:50,556 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:48:50,556 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 11:48:50,559 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:48:50,565 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:48:50,571 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:48:50,587 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:48:50,600 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:48:50,606 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:48:50,608 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:48:50,616 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 11:48:50,619 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:48:50,629 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:48:50,631 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:48:50,632 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 11:48:50,669 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 11:49:01,060 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:49:01,067 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:49:01,107 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:49:01,228 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:49:01,228 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:49:01,251 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:49:01,251 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:49:01,257 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:49:01,262 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:49:01,262 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 11:49:01,263 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:49:01,263 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:49:01,266 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:49:01,266 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:49:01,267 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:49:01,268 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 11:49:01,270 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:49:01,275 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:49:01,285 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:49:01,298 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:49:01,308 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:49:01,316 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:49:01,323 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:49:01,329 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 11:49:01,331 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:49:01,367 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:49:01,372 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:49:01,373 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 11:49:01,393 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 11:49:37,246 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 11:49:37,251 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 11:49:37,286 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 11:49:37,392 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 11:49:37,392 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 11:49:37,413 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 11:49:37,413 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 11:49:37,417 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 11:49:37,422 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 11:49:37,423 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 11:49:37,423 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 11:49:37,424 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 11:49:37,426 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 11:49:37,426 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 11:49:37,428 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 11:49:37,428 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 11:49:37,429 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 11:49:37,433 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 11:49:37,438 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 11:49:37,449 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 11:49:37,460 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 11:49:37,470 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 11:49:37,473 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 11:49:37,477 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 11:49:37,479 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 11:49:37,497 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 11:49:37,499 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 11:49:37,500 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 11:49:37,520 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:31:19,237 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:31:19,241 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:31:19,276 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:31:19,390 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:31:19,390 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:31:19,411 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:31:19,411 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:31:19,416 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:31:19,420 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:31:19,421 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:31:19,422 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:31:19,422 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:31:19,425 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:31:19,425 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:31:19,426 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:31:19,427 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:31:19,428 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:31:19,433 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:31:19,438 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:31:19,450 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:31:19,461 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:31:19,466 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:31:19,469 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:31:19,474 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:31:19,476 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:31:19,486 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 12:31:19,489 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:31:19,490 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:31:19,550 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:32:24,710 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:32:24,715 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:32:24,752 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:32:24,859 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:32:24,859 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:32:24,880 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:32:24,880 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:32:24,885 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:32:24,889 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:32:24,889 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:32:24,890 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:32:24,891 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:32:24,893 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:32:24,893 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:32:24,895 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:32:24,895 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:32:24,897 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:32:24,901 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:32:24,906 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:32:24,916 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:32:24,928 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:32:24,934 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:32:24,936 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:32:24,940 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:32:24,943 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:32:24,956 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 12:32:24,958 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:32:24,958 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:32:24,982 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:33:27,586 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:33:27,590 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:33:27,628 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:33:27,736 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:33:27,736 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:33:27,756 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:33:27,756 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:33:27,761 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:33:27,765 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:33:27,766 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:33:27,766 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:33:27,767 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:33:27,769 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:33:27,769 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:33:27,771 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:33:27,771 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:33:27,772 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:33:27,777 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:33:27,782 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:33:27,792 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:33:27,806 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:33:27,816 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:33:27,818 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:33:27,822 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:33:27,824 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:33:27,834 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 12:33:27,836 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:33:27,836 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:33:27,884 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:35:21,502 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:35:21,509 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:35:21,553 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:35:21,729 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:35:21,729 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:35:21,759 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:35:21,760 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:35:21,764 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:35:21,769 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:35:21,770 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:35:21,770 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:35:21,771 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:35:21,773 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:35:21,774 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:35:21,775 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:35:21,776 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:35:21,778 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:35:21,784 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:35:21,789 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:35:21,803 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:35:21,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:35:21,828 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:35:21,838 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:35:21,843 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:35:21,845 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:35:21,854 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 12:35:21,856 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:35:21,856 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:35:21,875 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:35:21,878 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:36:01,507 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:36:01,512 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:36:01,550 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:36:01,662 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:36:01,663 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:36:01,684 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:36:01,685 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:36:01,689 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:36:01,694 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:36:01,694 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:36:01,695 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:36:01,696 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:36:01,698 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:36:01,699 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:36:01,700 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:36:01,701 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:36:01,702 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:36:01,707 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:36:01,711 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:36:01,722 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:36:01,734 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:36:01,741 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:36:01,746 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:36:01,750 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:36:01,752 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:36:01,762 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 12:36:01,763 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:36:01,766 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:36:01,776 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.051s)
2018-11-20 12:36:01,780 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:36:01,789 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 12:36:01,792 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 12:36:01,807 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 12:36:01,808 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 12:36:01,808 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 12:36:01,854 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:36:01,855 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 12:36:01,894 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:36:01,894 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 12:36:01,902 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 12:36:01,904 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init test table
2018-11-20 12:36:01,907 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 12:36:01,909 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 12:36:01,909 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:36:01,909 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:36:01,952 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:36:01,952 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init test table
2018-11-20 12:36:01,955 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 12:36:01,956 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 12:36:01,958 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 12:36:01,967 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 12:36:01,968 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:36:01,970 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 12:36:01,970 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:36:01,970 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255),
	 OUT `V_CODE` int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	SELECT  ROW_COUNT() into V_CODE;

END
2018-11-20 12:36:01,973 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 12:36:01,973 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 12:36:01,974 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-20 12:36:01,976 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 12:36:01,977 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 12:36:01,990 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 12:36:01,995 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 12:36:02,000 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:38:09,838 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:38:09,843 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:38:09,881 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:38:09,998 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:38:09,999 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:38:10,020 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:38:10,020 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:38:10,024 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:38:10,030 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:38:10,030 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:38:10,031 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:38:10,031 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:38:10,033 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:38:10,034 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:38:10,035 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:38:10,035 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:38:10,037 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:38:10,043 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:38:10,047 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:38:10,057 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:38:10,070 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:38:10,076 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:38:10,079 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:38:10,083 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:38:10,086 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:38:10,094 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:38:10,096 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:38:10,096 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:38:10,117 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:38:10,120 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:39:13,130 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:39:13,135 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:39:13,178 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:39:13,292 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:39:13,292 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:39:13,313 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:39:13,313 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:39:13,318 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:39:13,322 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:39:13,323 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:39:13,324 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:39:13,324 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:39:13,326 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:39:13,327 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:39:13,328 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:39:13,328 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:39:13,330 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:39:13,334 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:39:13,339 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:39:13,349 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:39:13,361 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:39:13,367 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:39:13,369 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:39:13,373 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:39:13,375 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:39:13,385 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:39:13,387 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:39:13,388 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:39:13,408 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:39:13,411 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:40:28,873 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:40:28,878 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:40:28,917 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:40:29,039 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:40:29,040 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:40:29,063 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:40:29,063 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:40:29,068 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:40:29,072 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:40:29,073 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:40:29,074 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:40:29,074 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:40:29,076 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:40:29,076 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:40:29,078 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:40:29,078 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:40:29,080 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:40:29,085 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:40:29,090 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:40:29,101 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:40:29,112 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:40:29,117 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:40:29,121 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:40:29,124 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:40:29,127 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:40:29,137 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:40:29,139 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:40:29,139 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:40:29,152 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.047s)
2018-11-20 12:40:29,156 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:40:29,168 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 12:40:29,172 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 12:40:29,185 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 12:40:29,187 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 12:40:29,187 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 12:40:29,232 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:40:29,233 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 12:40:29,272 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:40:29,272 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 12:40:29,279 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 12:40:29,281 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init test table
2018-11-20 12:40:29,285 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 12:40:29,288 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 12:40:29,288 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:40:29,289 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:40:29,336 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:40:29,336 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init test table
2018-11-20 12:40:29,341 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 12:40:29,342 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 12:40:29,345 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 12:40:29,356 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 12:40:29,358 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:40:29,360 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 12:40:29,361 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:40:29,361 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:40:29,364 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 12:40:29,365 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 12:40:29,366 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-20 12:40:29,369 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 12:40:29,373 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 12:40:29,404 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 12:40:29,410 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 12:40:29,415 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:42:14,787 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:42:14,792 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:42:14,826 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:42:14,928 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:42:14,928 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:42:14,948 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:42:14,949 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:42:14,953 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:42:14,957 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:42:14,958 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:42:14,958 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:42:14,959 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:42:14,961 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:42:14,961 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:42:14,963 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:42:14,963 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:42:14,964 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:42:14,969 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:42:14,973 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:42:14,983 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:42:14,993 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:42:14,999 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:42:15,005 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:42:15,009 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:42:15,011 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:42:15,017 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255)
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:42:15,022 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:42:15,022 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:42:15,046 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 12:42:15,049 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:45:06,567 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:45:06,572 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:45:06,609 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:45:06,716 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:45:06,716 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:45:06,735 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:45:06,736 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:45:06,740 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:45:06,744 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:45:06,744 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:45:06,745 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:45:06,745 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:45:06,747 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:45:06,747 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:45:06,749 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:45:06,749 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:45:06,751 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:45:06,755 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:45:06,759 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:45:06,771 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:45:06,784 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:45:06,791 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:45:06,794 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:45:06,797 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:45:06,801 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:45:06,808 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:45:06,810 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:45:06,811 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:45:06,822 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.049s)
2018-11-20 12:45:06,826 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:45:06,836 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 12:45:06,840 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 12:45:06,860 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 12:45:06,860 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 12:45:06,861 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 12:45:06,959 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:45:06,960 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 12:45:06,999 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:45:06,999 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 12:45:07,007 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 12:45:07,009 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init test table
2018-11-20 12:45:07,012 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 12:45:07,014 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 12:45:07,014 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:45:07,015 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:45:07,060 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:45:07,060 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init test table
2018-11-20 12:45:07,063 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 12:45:07,064 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 12:45:07,067 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 12:45:07,078 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 12:45:07,080 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:45:07,081 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 12:45:07,082 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:45:07,082 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:45:07,083 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 12:45:07,084 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.1 - product procedures
2018-11-20 12:45:07,086 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 12:45:07,087 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 12:45:07,088 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 12:45:07,104 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 2 migrations to schema `productdb` (execution time 00:00.269s)
2018-11-20 12:45:07,108 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 12:45:07,108 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:46:40,616 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:46:40,620 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:46:40,652 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:46:40,757 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:46:40,758 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:46:40,777 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:46:40,778 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:46:40,782 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:46:40,787 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:46:40,787 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:46:40,788 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:46:40,788 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:46:40,790 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:46:40,791 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:46:40,792 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:46:40,792 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:46:40,794 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:46:40,798 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:46:40,802 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:46:40,812 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:46:40,824 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:46:40,832 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:46:40,839 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:46:40,843 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:46:40,845 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:46:40,852 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:46:40,856 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:46:40,856 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:46:40,871 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.056s)
2018-11-20 12:46:40,875 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:46:40,886 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:46:40,887 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:46:40,892 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 12:46:40,893 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:47:13,758 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:47:13,763 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:47:13,802 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:47:13,917 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:47:13,918 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:47:13,940 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:47:13,940 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:47:13,945 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:47:13,951 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:47:13,952 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 12:47:13,952 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:47:13,953 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:47:13,956 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:47:13,956 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:47:13,957 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:47:13,958 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:47:13,959 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:47:13,965 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:47:13,971 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:47:13,983 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:47:13,995 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:47:14,002 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:47:14,004 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:47:14,008 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:47:14,010 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:47:14,021 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:47:14,023 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:47:14,024 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:47:14,047 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.060s)
2018-11-20 12:47:14,052 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:47:14,068 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:47:14,069 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:47:14,074 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 12:47:14,074 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:47:51,109 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:47:51,113 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:47:51,151 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:47:51,269 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:47:51,269 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:47:51,292 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:47:51,293 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:47:51,298 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:47:51,302 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:47:51,303 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 12:47:51,304 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:47:51,304 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:47:51,308 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:47:51,308 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:47:51,309 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:47:51,310 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:47:51,311 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:47:51,316 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:47:51,322 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:47:51,333 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:47:51,346 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:47:51,353 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:47:51,358 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:47:51,364 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:47:51,366 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:47:51,378 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:47:51,383 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:47:51,383 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:47:51,410 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.073s)
2018-11-20 12:47:51,413 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:47:51,424 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:47:51,426 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:47:51,431 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 12:47:51,432 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:48:13,395 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:48:13,400 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:48:13,436 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:48:13,573 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:48:13,573 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:48:13,602 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:48:13,602 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:48:13,608 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:48:13,615 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:48:13,615 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 12:48:13,616 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:48:13,617 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:48:13,620 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:48:13,621 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:48:13,622 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:48:13,623 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:48:13,625 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:48:13,632 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:48:13,638 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:48:13,650 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:48:13,667 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:48:13,678 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:48:13,690 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:48:13,698 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:48:13,700 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:48:13,719 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:48:13,720 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:48:13,721 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:48:13,754 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.100s)
2018-11-20 12:48:13,758 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:48:13,767 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:48:13,767 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:48:13,771 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 12:48:13,771 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:49:07,996 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:49:08,001 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:49:08,037 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:49:08,168 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:49:08,169 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:49:08,202 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:49:08,202 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:49:08,208 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:49:08,215 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:49:08,215 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:49:08,216 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:49:08,217 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:49:08,220 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:49:08,220 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:49:08,222 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:49:08,223 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:49:08,225 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:49:08,231 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:49:08,236 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:49:08,248 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:49:08,263 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:49:08,271 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:49:08,273 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:49:08,277 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:49:08,281 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:49:08,304 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:49:08,308 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:49:08,309 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:49:08,328 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.075s)
2018-11-20 12:49:08,333 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:49:08,347 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:49:08,349 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:49:08,354 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 12:49:08,355 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:49:17,202 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:49:17,206 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:49:17,242 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:49:17,375 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:49:17,376 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:49:17,400 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:49:17,401 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:49:17,406 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:49:17,411 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:49:17,411 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:49:17,412 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:49:17,413 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:49:17,417 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:49:17,417 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:49:17,419 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:49:17,420 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:49:17,422 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:49:17,429 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:49:17,436 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:49:17,457 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:49:17,468 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:49:17,476 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:49:17,488 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:49:17,492 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:49:17,494 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:49:17,515 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:49:17,519 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:49:17,520 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:49:17,544 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.084s)
2018-11-20 12:49:17,550 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:49:17,560 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:49:17,561 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:49:17,565 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 12:49:17,565 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:49:46,725 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:49:46,731 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:49:46,773 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:49:46,906 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:49:46,907 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:49:46,936 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:49:46,937 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:49:46,942 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:49:46,949 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:49:46,949 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 12:49:46,950 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:49:46,951 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:49:46,954 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:49:46,955 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:49:46,957 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:49:46,957 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:49:46,959 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:49:46,968 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:49:46,975 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:49:46,987 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:49:47,001 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:49:47,009 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:49:47,020 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:49:47,026 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:49:47,030 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:49:47,057 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:49:47,060 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:49:47,060 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:49:47,085 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.094s)
2018-11-20 12:49:47,091 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:49:47,104 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:49:47,105 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:49:47,110 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 12:49:47,110 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:50:47,573 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 12:50:47,578 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 12:50:47,613 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 12:50:47,736 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 12:50:47,736 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 12:50:47,760 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 12:50:47,761 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 12:50:47,767 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 12:50:47,772 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 12:50:47,772 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 12:50:47,773 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 12:50:47,774 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 12:50:47,777 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 12:50:47,778 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 12:50:47,781 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 12:50:47,781 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 12:50:47,783 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 12:50:47,789 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 12:50:47,795 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 12:50:47,807 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 12:50:47,817 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 12:50:47,823 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 12:50:47,834 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 12:50:47,838 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 12:50:47,840 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 12:50:47,862 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 12:50:47,865 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 12:50:47,865 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 12:50:47,888 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.078s)
2018-11-20 12:50:47,893 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 12:50:47,905 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 12:50:47,906 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 12:50:47,911 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 12:50:47,912 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 12:51:11,703 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 12:51:33,769 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 12:52:24,756 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 12:55:24,714 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 13:02:37,417 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 13:04:09,288 com.csft.product.dao.ProductDao [main] (ProductDao.java:114) DEBUG --> ++++++Test save product ....
2018-11-20 13:05:59,713 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 13:05:59,717 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 13:05:59,754 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 13:05:59,876 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 13:05:59,877 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 13:05:59,905 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 13:05:59,905 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 13:05:59,911 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 13:05:59,916 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 13:05:59,916 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 13:05:59,917 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 13:05:59,918 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 13:05:59,920 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 13:05:59,921 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 13:05:59,922 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 13:05:59,922 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 13:05:59,925 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 13:05:59,930 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 13:05:59,938 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 13:05:59,950 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 13:05:59,961 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 13:05:59,968 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 13:05:59,971 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 13:05:59,977 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 13:05:59,981 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 13:05:59,988 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 13:05:59,993 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 13:05:59,994 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 13:06:00,029 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.075s)
2018-11-20 13:06:00,033 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 13:06:00,044 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 13:06:00,045 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 13:06:00,048 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 13:06:00,049 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 13:06:11,509 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 13:07:27,313 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 13:39:51,820 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 13:47:45,336 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 13:51:05,605 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 14:00:41,697 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 14:14:48,100 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 14:14:48,143 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:14:56,708 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:69) DEBUG --> ++++++Test save product ....
2018-11-20 14:14:56,752 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:15:50,378 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:15:50,383 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:15:50,421 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:15:50,529 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:15:50,529 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:15:50,550 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:15:50,550 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:15:50,555 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:15:50,559 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:15:50,559 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 14:15:50,560 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:15:50,561 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:15:50,563 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:15:50,563 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:15:50,565 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:15:50,565 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:15:50,567 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:15:50,572 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:15:50,577 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:15:50,588 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:15:50,602 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:15:50,610 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:15:50,612 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:15:50,617 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:15:50,621 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:15:50,628 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:15:50,632 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:15:50,633 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:15:50,671 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.080s)
2018-11-20 14:15:50,674 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:15:50,683 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:15:50,684 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:15:50,688 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 14:15:50,689 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:15:50,701 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:15:50,702 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:15:51,143 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 14:15:51,146 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '9bf539f1-cd52-4fa2-8090-bb11793db14f': getConnection ( null )...
2018-11-20 14:15:51,146 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '9bf539f1-cd52-4fa2-8090-bb11793db14f': init...
2018-11-20 14:15:51,147 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:12) WARN  --> AtomikosDataSoureBean '9bf539f1-cd52-4fa2-8090-bb11793db14f': testQuery set - pool may be slower / you might want to consider setting maxLifetime instead...
2018-11-20 14:15:51,196 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '9bf539f1-cd52-4fa2-8090-bb11793db14f': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=9bf539f1-cd52-4fa2-8090-bb11793db14f, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 14:15:51,207 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: adding resource 9bf539f1-cd52-4fa2-8090-bb11793db14f
2018-11-20 14:15:51,207 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: added resource 9bf539f1-cd52-4fa2-8090-bb11793db14f
2018-11-20 14:15:51,211 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f': initializing...
2018-11-20 14:15:51,222 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f'
2018-11-20 14:15:51,226 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f'
2018-11-20 14:15:51,229 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f'
2018-11-20 14:15:51,231 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f'
2018-11-20 14:15:51,235 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f'
2018-11-20 14:15:51,239 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> TaskManager: initializing...
2018-11-20 14:15:51,239 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:16) INFO  --> THREADS: using JDK thread pooling...
2018-11-20 14:15:51,250 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
2018-11-20 14:15:51,251 com.atomikos.icatch.imp.thread.Java15ExecutorFactory [main] (Slf4jLogger.java:20) DEBUG --> (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@1dd92fe2
2018-11-20 14:15:51,252 com.atomikos.icatch.imp.thread.ThreadFactory [main] (Slf4jLogger.java:20) DEBUG --> ThreadFactory: creating new thread: Atomikos:0
2018-11-20 14:15:51,253 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '9bf539f1-cd52-4fa2-8090-bb11793db14f': init done.
2018-11-20 14:15:51,253 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time acquired
2018-11-20 14:15:51,253 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): testing connection with query [select 1]
2018-11-20 14:15:51,254 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): connection tested OK
2018-11-20 14:15:51,255 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): creating connection proxy...
2018-11-20 14:15:51,261 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): notifySessionBorrowed
2018-11-20 14:15:51,276 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.NotInBranchStateHandler@770c2e6b
2018-11-20 14:15:51,292 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:15:51,292 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:15:51,292 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:15:51,292 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 1 context(s): returning proxy org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:15:51,293 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f': got connection from pool
2018-11-20 14:15:51,293 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f': current size: 4/5
2018-11-20 14:15:51,293 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:15:51,293 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:15:51,294 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:15:51,294 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '9bf539f1-cd52-4fa2-8090-bb11793db14f': returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:15:51,294 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@145eaa29
2018-11-20 14:15:51,294 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:15:51,294 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: notifyBeforeUse a SessionHandleState with 1 context(s)
2018-11-20 14:15:51,294 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:15:51,294 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 14:15:51,309 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: prepareCall returning sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : [null,null,null]
2018-11-20 14:15:51,314 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:15:51,314 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: close()...
2018-11-20 14:15:51,315 com.atomikos.jdbc.AbstractConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> Forcing close of pending statement: sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : ['c05da4f792114c8785ed38487c562cae','IPAD MINI2','']
2018-11-20 14:15:51,315 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): entering notifySessionClosed
2018-11-20 14:15:51,315 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): delegating session close to a TransactionContext
2018-11-20 14:15:51,315 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing state to com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:15:51,315 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:15:51,316 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): all contexts terminated, firing TerminatedEvent
2018-11-20 14:15:51,316 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> SessionHandleState terminated, firing XPooledConnectionTerminated event for an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s)
2018-11-20 14:15:51,316 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:15:51,316 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): notifying listener: atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f'
2018-11-20 14:15:51,316 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '9bf539f1-cd52-4fa2-8090-bb11793db14f': connection an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s) became available, notifying potentially waiting threads
2018-11-20 14:15:51,316 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:15:51,317 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: closed.
2018-11-20 14:15:51,317 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:57) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 14:16:49,061 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:16:49,066 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:16:49,101 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:16:49,214 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:16:49,214 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:16:49,237 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:16:49,237 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:16:49,242 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:16:49,246 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:16:49,246 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 14:16:49,247 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:16:49,248 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:16:49,250 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:16:49,250 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:16:49,252 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:16:49,252 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:16:49,253 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:16:49,258 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:16:49,264 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:16:49,278 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:16:49,290 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:16:49,296 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:16:49,299 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:16:49,303 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:16:49,305 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:16:49,314 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:16:49,318 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:16:49,318 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:16:49,336 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.054s)
2018-11-20 14:16:49,340 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:16:49,354 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:16:49,355 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:16:49,360 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 14:16:49,360 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:16:49,371 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:16:49,371 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:16:49,803 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 14:16:49,806 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '8293e537-4217-4ff1-a278-046644d4869d': getConnection ( null )...
2018-11-20 14:16:49,806 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '8293e537-4217-4ff1-a278-046644d4869d': init...
2018-11-20 14:16:49,807 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:12) WARN  --> AtomikosDataSoureBean '8293e537-4217-4ff1-a278-046644d4869d': testQuery set - pool may be slower / you might want to consider setting maxLifetime instead...
2018-11-20 14:16:49,822 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '8293e537-4217-4ff1-a278-046644d4869d': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=8293e537-4217-4ff1-a278-046644d4869d, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 14:16:49,833 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: adding resource 8293e537-4217-4ff1-a278-046644d4869d
2018-11-20 14:16:49,833 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: added resource 8293e537-4217-4ff1-a278-046644d4869d
2018-11-20 14:16:49,836 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d': initializing...
2018-11-20 14:16:49,847 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d'
2018-11-20 14:16:49,850 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d'
2018-11-20 14:16:49,853 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d'
2018-11-20 14:16:49,856 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d'
2018-11-20 14:16:49,859 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d'
2018-11-20 14:16:49,863 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> TaskManager: initializing...
2018-11-20 14:16:49,863 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:16) INFO  --> THREADS: using JDK thread pooling...
2018-11-20 14:16:49,868 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
2018-11-20 14:16:49,868 com.atomikos.icatch.imp.thread.Java15ExecutorFactory [main] (Slf4jLogger.java:20) DEBUG --> (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@1dd92fe2
2018-11-20 14:16:49,869 com.atomikos.icatch.imp.thread.ThreadFactory [main] (Slf4jLogger.java:20) DEBUG --> ThreadFactory: creating new thread: Atomikos:0
2018-11-20 14:16:49,870 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '8293e537-4217-4ff1-a278-046644d4869d': init done.
2018-11-20 14:16:49,870 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time acquired
2018-11-20 14:16:49,870 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): testing connection with query [select 1]
2018-11-20 14:16:49,871 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): connection tested OK
2018-11-20 14:16:49,871 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): creating connection proxy...
2018-11-20 14:16:49,873 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): notifySessionBorrowed
2018-11-20 14:16:49,884 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.NotInBranchStateHandler@770c2e6b
2018-11-20 14:16:49,897 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:16:49,897 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:16:49,897 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:16:49,897 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 1 context(s): returning proxy org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:16:49,898 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d': got connection from pool
2018-11-20 14:16:49,898 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d': current size: 4/5
2018-11-20 14:16:49,898 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:16:49,898 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:16:49,898 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:16:49,898 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '8293e537-4217-4ff1-a278-046644d4869d': returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:16:49,899 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@145eaa29
2018-11-20 14:16:49,899 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:16:49,899 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: notifyBeforeUse a SessionHandleState with 1 context(s)
2018-11-20 14:16:49,899 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:16:49,899 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 14:16:49,914 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: prepareCall returning sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : [null,null,null]
2018-11-20 14:16:49,918 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:16:49,919 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: close()...
2018-11-20 14:16:49,919 com.atomikos.jdbc.AbstractConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> Forcing close of pending statement: sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : ['91476338be1a4765a9b14629e737169a','IPAD MINI2','']
2018-11-20 14:16:49,919 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): entering notifySessionClosed
2018-11-20 14:16:49,920 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): delegating session close to a TransactionContext
2018-11-20 14:16:49,920 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing state to com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:16:49,920 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:16:49,920 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): all contexts terminated, firing TerminatedEvent
2018-11-20 14:16:49,921 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> SessionHandleState terminated, firing XPooledConnectionTerminated event for an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s)
2018-11-20 14:16:49,921 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:16:49,921 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): notifying listener: atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d'
2018-11-20 14:16:49,921 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '8293e537-4217-4ff1-a278-046644d4869d': connection an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s) became available, notifying potentially waiting threads
2018-11-20 14:16:49,921 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:16:49,921 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: closed.
2018-11-20 14:16:49,922 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:57) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 14:17:29,248 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:17:29,255 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:17:29,291 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:17:29,401 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:17:29,402 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:17:29,421 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:17:29,422 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:17:29,427 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:17:29,432 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:17:29,432 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 14:17:29,433 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:17:29,433 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:17:29,436 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:17:29,436 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:17:29,438 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:17:29,438 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:17:29,439 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:17:29,444 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:17:29,448 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:17:29,459 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:17:29,470 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:17:29,479 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:17:29,481 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:17:29,486 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:17:29,488 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:17:29,498 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:17:29,500 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:17:29,501 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:17:29,519 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.058s)
2018-11-20 14:17:29,535 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:17:29,545 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:17:29,546 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:17:29,551 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 14:17:29,551 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:17:29,563 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:17:29,564 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:17:29,994 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 14:17:29,997 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': getConnection ( null )...
2018-11-20 14:17:29,997 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': init...
2018-11-20 14:17:29,998 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:12) WARN  --> AtomikosDataSoureBean '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': testQuery set - pool may be slower / you might want to consider setting maxLifetime instead...
2018-11-20 14:17:30,013 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=01103db9-c02f-4eae-bfd5-54b5c3d27fa7, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 14:17:30,024 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: adding resource 01103db9-c02f-4eae-bfd5-54b5c3d27fa7
2018-11-20 14:17:30,025 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: added resource 01103db9-c02f-4eae-bfd5-54b5c3d27fa7
2018-11-20 14:17:30,028 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': initializing...
2018-11-20 14:17:30,040 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7'
2018-11-20 14:17:30,044 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7'
2018-11-20 14:17:30,047 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7'
2018-11-20 14:17:30,051 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7'
2018-11-20 14:17:30,054 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7'
2018-11-20 14:17:30,058 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> TaskManager: initializing...
2018-11-20 14:17:30,059 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:16) INFO  --> THREADS: using JDK thread pooling...
2018-11-20 14:17:30,066 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
2018-11-20 14:17:30,067 com.atomikos.icatch.imp.thread.Java15ExecutorFactory [main] (Slf4jLogger.java:20) DEBUG --> (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@1dd92fe2
2018-11-20 14:17:30,068 com.atomikos.icatch.imp.thread.ThreadFactory [main] (Slf4jLogger.java:20) DEBUG --> ThreadFactory: creating new thread: Atomikos:0
2018-11-20 14:17:30,068 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': init done.
2018-11-20 14:17:30,069 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time acquired
2018-11-20 14:17:30,069 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): testing connection with query [select 1]
2018-11-20 14:17:30,070 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): connection tested OK
2018-11-20 14:17:30,070 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): creating connection proxy...
2018-11-20 14:17:30,074 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): notifySessionBorrowed
2018-11-20 14:17:30,086 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.NotInBranchStateHandler@770c2e6b
2018-11-20 14:17:30,096 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:17:30,096 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:17:30,096 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:17:30,097 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 1 context(s): returning proxy org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:17:30,097 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': got connection from pool
2018-11-20 14:17:30,097 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': current size: 4/5
2018-11-20 14:17:30,097 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:17:30,097 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:17:30,097 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:17:30,098 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:17:30,098 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@145eaa29
2018-11-20 14:17:30,098 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:17:30,098 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: notifyBeforeUse a SessionHandleState with 1 context(s)
2018-11-20 14:17:30,098 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:17:30,098 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 14:17:30,119 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: prepareCall returning sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : [null,null,null]
2018-11-20 14:17:30,123 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:17:30,124 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: close()...
2018-11-20 14:17:30,124 com.atomikos.jdbc.AbstractConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> Forcing close of pending statement: sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : ['c8ff007cbf2b49ae82bac46cc8c9e292','IPAD MINI2','']
2018-11-20 14:17:30,124 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): entering notifySessionClosed
2018-11-20 14:17:30,125 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): delegating session close to a TransactionContext
2018-11-20 14:17:30,125 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing state to com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:17:30,125 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:17:30,126 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): all contexts terminated, firing TerminatedEvent
2018-11-20 14:17:30,126 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> SessionHandleState terminated, firing XPooledConnectionTerminated event for an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s)
2018-11-20 14:17:30,126 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:17:30,126 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): notifying listener: atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7'
2018-11-20 14:17:30,126 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '01103db9-c02f-4eae-bfd5-54b5c3d27fa7': connection an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s) became available, notifying potentially waiting threads
2018-11-20 14:17:30,126 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:17:30,127 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: closed.
2018-11-20 14:17:30,127 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:57) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 14:18:42,255 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:18:42,259 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:18:42,300 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:18:42,404 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:18:42,404 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:18:42,423 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:18:42,424 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:18:42,428 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:18:42,433 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:18:42,433 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 14:18:42,434 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:18:42,435 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:18:42,437 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:18:42,437 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:18:42,439 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:18:42,439 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:18:42,440 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:18:42,445 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:18:42,449 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:18:42,459 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:18:42,469 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:18:42,474 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:18:42,477 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:18:42,480 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:18:42,483 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:18:42,491 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:18:42,493 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:18:42,493 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:18:42,509 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.047s)
2018-11-20 14:18:42,512 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:18:42,522 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:18:42,523 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:18:42,528 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 14:18:42,529 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:18:42,548 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:18:42,549 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:18:42,981 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 14:18:42,984 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '14e6b51e-5844-49d8-9a19-f755a62f7c09': getConnection ( null )...
2018-11-20 14:18:42,984 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '14e6b51e-5844-49d8-9a19-f755a62f7c09': init...
2018-11-20 14:18:42,984 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:12) WARN  --> AtomikosDataSoureBean '14e6b51e-5844-49d8-9a19-f755a62f7c09': testQuery set - pool may be slower / you might want to consider setting maxLifetime instead...
2018-11-20 14:18:42,999 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '14e6b51e-5844-49d8-9a19-f755a62f7c09': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=14e6b51e-5844-49d8-9a19-f755a62f7c09, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 14:18:43,009 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: adding resource 14e6b51e-5844-49d8-9a19-f755a62f7c09
2018-11-20 14:18:43,009 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: added resource 14e6b51e-5844-49d8-9a19-f755a62f7c09
2018-11-20 14:18:43,012 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09': initializing...
2018-11-20 14:18:43,025 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09'
2018-11-20 14:18:43,028 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09'
2018-11-20 14:18:43,030 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09'
2018-11-20 14:18:43,033 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09'
2018-11-20 14:18:43,037 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09'
2018-11-20 14:18:43,040 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> TaskManager: initializing...
2018-11-20 14:18:43,040 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:16) INFO  --> THREADS: using JDK thread pooling...
2018-11-20 14:18:43,045 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
2018-11-20 14:18:43,045 com.atomikos.icatch.imp.thread.Java15ExecutorFactory [main] (Slf4jLogger.java:20) DEBUG --> (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@1dd92fe2
2018-11-20 14:18:43,046 com.atomikos.icatch.imp.thread.ThreadFactory [main] (Slf4jLogger.java:20) DEBUG --> ThreadFactory: creating new thread: Atomikos:0
2018-11-20 14:18:43,047 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '14e6b51e-5844-49d8-9a19-f755a62f7c09': init done.
2018-11-20 14:18:43,047 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time acquired
2018-11-20 14:18:43,047 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): testing connection with query [select 1]
2018-11-20 14:18:43,048 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): connection tested OK
2018-11-20 14:18:43,049 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): creating connection proxy...
2018-11-20 14:18:43,052 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): notifySessionBorrowed
2018-11-20 14:18:43,063 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.NotInBranchStateHandler@770c2e6b
2018-11-20 14:18:43,073 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:18:43,073 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:18:43,073 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:18:43,074 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 1 context(s): returning proxy org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:18:43,074 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09': got connection from pool
2018-11-20 14:18:43,074 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09': current size: 4/5
2018-11-20 14:18:43,074 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:18:43,074 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:18:43,075 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:18:43,075 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '14e6b51e-5844-49d8-9a19-f755a62f7c09': returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:18:43,075 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@145eaa29
2018-11-20 14:18:43,075 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:18:43,075 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: notifyBeforeUse a SessionHandleState with 1 context(s)
2018-11-20 14:18:43,075 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:18:43,076 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 14:18:43,089 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: prepareCall returning sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : [null,null,null]
2018-11-20 14:18:43,093 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:18:43,093 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: close()...
2018-11-20 14:18:43,094 com.atomikos.jdbc.AbstractConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> Forcing close of pending statement: sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : ['6726202c7f8145d1a10cdc64b71a48d8','IPAD MINI2','']
2018-11-20 14:18:43,094 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): entering notifySessionClosed
2018-11-20 14:18:43,095 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): delegating session close to a TransactionContext
2018-11-20 14:18:43,095 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing state to com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:18:43,095 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:18:43,096 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): all contexts terminated, firing TerminatedEvent
2018-11-20 14:18:43,096 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> SessionHandleState terminated, firing XPooledConnectionTerminated event for an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s)
2018-11-20 14:18:43,096 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:18:43,096 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): notifying listener: atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09'
2018-11-20 14:18:43,097 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '14e6b51e-5844-49d8-9a19-f755a62f7c09': connection an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s) became available, notifying potentially waiting threads
2018-11-20 14:18:43,097 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:18:43,097 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: closed.
2018-11-20 14:18:43,098 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:57) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 14:19:45,483 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:19:45,488 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:19:45,524 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:19:45,641 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:19:45,641 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:19:45,664 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:19:45,665 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:19:45,670 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:19:45,674 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:19:45,675 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:19:45,675 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:19:45,676 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:19:45,678 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:19:45,678 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:19:45,680 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:19:45,680 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:19:45,682 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:19:45,686 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:19:45,690 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:19:45,700 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:19:45,712 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:19:45,720 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:19:45,722 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:19:45,727 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:19:45,729 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:19:45,738 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:19:45,740 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:19:45,741 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:19:45,758 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.054s)
2018-11-20 14:19:45,762 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:19:45,776 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:19:45,777 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:19:45,783 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 14:19:45,784 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:20:37,110 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:20:37,115 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:20:37,151 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:20:37,268 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:20:37,269 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:20:37,292 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:20:37,293 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:20:37,297 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:20:37,301 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:20:37,302 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:20:37,303 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:20:37,303 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:20:37,305 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:20:37,306 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:20:37,307 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:20:37,307 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:20:37,309 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:20:37,314 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:20:37,318 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:20:37,328 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:20:37,344 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:20:37,350 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:20:37,352 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:20:37,356 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:20:37,358 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:20:37,367 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:20:37,369 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:20:37,370 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:20:37,391 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.059s)
2018-11-20 14:20:37,395 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:20:37,408 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:20:37,410 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:20:37,414 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 14:20:37,415 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:21:26,968 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:21:26,972 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:21:27,009 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:21:27,117 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:21:27,117 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:21:27,136 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:21:27,137 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:21:27,142 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:21:27,146 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:21:27,146 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 14:21:27,147 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:21:27,148 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:21:27,150 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:21:27,150 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:21:27,152 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:21:27,152 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:21:27,154 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:21:27,159 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:21:27,164 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:21:27,175 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:21:27,187 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:21:27,196 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:21:27,205 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:21:27,209 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:21:27,211 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:21:27,220 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:21:27,222 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:21:27,224 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:21:27,243 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.064s)
2018-11-20 14:21:27,246 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:21:27,258 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:21:27,259 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:21:27,265 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 14:21:27,265 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:21:27,278 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:21:27,279 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:21:27,711 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 14:21:27,714 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '3cf867f6-0075-4ffb-83ef-09f03bf557df': getConnection ( null )...
2018-11-20 14:21:27,714 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '3cf867f6-0075-4ffb-83ef-09f03bf557df': init...
2018-11-20 14:21:27,714 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:12) WARN  --> AtomikosDataSoureBean '3cf867f6-0075-4ffb-83ef-09f03bf557df': testQuery set - pool may be slower / you might want to consider setting maxLifetime instead...
2018-11-20 14:21:27,730 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '3cf867f6-0075-4ffb-83ef-09f03bf557df': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=3cf867f6-0075-4ffb-83ef-09f03bf557df, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 14:21:27,741 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: adding resource 3cf867f6-0075-4ffb-83ef-09f03bf557df
2018-11-20 14:21:27,742 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: added resource 3cf867f6-0075-4ffb-83ef-09f03bf557df
2018-11-20 14:21:27,746 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df': initializing...
2018-11-20 14:21:27,757 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df'
2018-11-20 14:21:27,760 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df'
2018-11-20 14:21:27,764 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df'
2018-11-20 14:21:27,767 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df'
2018-11-20 14:21:27,770 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df'
2018-11-20 14:21:27,773 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> TaskManager: initializing...
2018-11-20 14:21:27,773 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:16) INFO  --> THREADS: using JDK thread pooling...
2018-11-20 14:21:27,778 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
2018-11-20 14:21:27,778 com.atomikos.icatch.imp.thread.Java15ExecutorFactory [main] (Slf4jLogger.java:20) DEBUG --> (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@1dd92fe2
2018-11-20 14:21:27,780 com.atomikos.icatch.imp.thread.ThreadFactory [main] (Slf4jLogger.java:20) DEBUG --> ThreadFactory: creating new thread: Atomikos:0
2018-11-20 14:21:27,781 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '3cf867f6-0075-4ffb-83ef-09f03bf557df': init done.
2018-11-20 14:21:27,781 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time acquired
2018-11-20 14:21:27,782 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): testing connection with query [select 1]
2018-11-20 14:21:27,783 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): connection tested OK
2018-11-20 14:21:27,783 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): creating connection proxy...
2018-11-20 14:21:27,788 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): notifySessionBorrowed
2018-11-20 14:21:27,798 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.NotInBranchStateHandler@770c2e6b
2018-11-20 14:21:27,809 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:21:27,809 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:21:27,810 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:21:27,810 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 1 context(s): returning proxy org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:21:27,810 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df': got connection from pool
2018-11-20 14:21:27,811 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df': current size: 4/5
2018-11-20 14:21:27,811 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:21:27,811 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:21:27,811 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:21:27,811 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '3cf867f6-0075-4ffb-83ef-09f03bf557df': returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:21:27,811 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@145eaa29
2018-11-20 14:21:27,812 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:21:27,812 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: notifyBeforeUse a SessionHandleState with 1 context(s)
2018-11-20 14:21:27,812 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:21:27,812 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 14:21:27,827 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: prepareCall returning sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : [null,null,null]
2018-11-20 14:21:27,832 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:21:27,832 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: close()...
2018-11-20 14:21:27,833 com.atomikos.jdbc.AbstractConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> Forcing close of pending statement: sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : ['a662cbbd301547d78cb236228badb129','IPAD MINI2','']
2018-11-20 14:21:27,833 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): entering notifySessionClosed
2018-11-20 14:21:27,833 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): delegating session close to a TransactionContext
2018-11-20 14:21:27,834 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing state to com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:21:27,834 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:21:27,834 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): all contexts terminated, firing TerminatedEvent
2018-11-20 14:21:27,835 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> SessionHandleState terminated, firing XPooledConnectionTerminated event for an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s)
2018-11-20 14:21:27,835 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:21:27,835 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): notifying listener: atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df'
2018-11-20 14:21:27,835 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '3cf867f6-0075-4ffb-83ef-09f03bf557df': connection an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s) became available, notifying potentially waiting threads
2018-11-20 14:21:27,836 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:21:27,836 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: closed.
2018-11-20 14:21:27,837 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:57) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 14:22:03,063 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:22:03,068 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:22:03,106 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:22:03,221 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:22:03,222 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:22:03,241 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:22:03,242 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:22:03,246 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:22:03,251 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:22:03,251 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 14:22:03,252 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:22:03,252 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:22:03,255 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:22:03,255 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:22:03,256 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:22:03,257 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:22:03,258 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:22:03,263 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:22:03,267 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:22:03,281 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:22:03,290 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:22:03,295 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:22:03,298 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:22:03,303 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:22:03,306 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:22:03,313 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:22:03,315 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:22:03,315 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:22:03,349 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.065s)
2018-11-20 14:22:03,352 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:22:03,363 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:22:03,364 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:22:03,368 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 14:22:03,368 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:22:03,381 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:22:03,382 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:22:03,816 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 14:22:03,820 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': getConnection ( null )...
2018-11-20 14:22:03,820 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': init...
2018-11-20 14:22:03,820 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:12) WARN  --> AtomikosDataSoureBean '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': testQuery set - pool may be slower / you might want to consider setting maxLifetime instead...
2018-11-20 14:22:03,836 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=2cbc2f5b-f102-463c-95b2-db8bffbbb1d9, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 14:22:03,846 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: adding resource 2cbc2f5b-f102-463c-95b2-db8bffbbb1d9
2018-11-20 14:22:03,846 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: added resource 2cbc2f5b-f102-463c-95b2-db8bffbbb1d9
2018-11-20 14:22:03,850 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': initializing...
2018-11-20 14:22:03,860 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9'
2018-11-20 14:22:03,863 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9'
2018-11-20 14:22:03,866 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9'
2018-11-20 14:22:03,869 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9'
2018-11-20 14:22:03,872 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9'
2018-11-20 14:22:03,876 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> TaskManager: initializing...
2018-11-20 14:22:03,876 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:16) INFO  --> THREADS: using JDK thread pooling...
2018-11-20 14:22:03,881 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
2018-11-20 14:22:03,881 com.atomikos.icatch.imp.thread.Java15ExecutorFactory [main] (Slf4jLogger.java:20) DEBUG --> (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@1dd92fe2
2018-11-20 14:22:03,883 com.atomikos.icatch.imp.thread.ThreadFactory [main] (Slf4jLogger.java:20) DEBUG --> ThreadFactory: creating new thread: Atomikos:0
2018-11-20 14:22:03,883 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': init done.
2018-11-20 14:22:03,883 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time acquired
2018-11-20 14:22:03,883 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): testing connection with query [select 1]
2018-11-20 14:22:03,884 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): connection tested OK
2018-11-20 14:22:03,884 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): creating connection proxy...
2018-11-20 14:22:03,888 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): notifySessionBorrowed
2018-11-20 14:22:03,898 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.NotInBranchStateHandler@770c2e6b
2018-11-20 14:22:03,908 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:22:03,909 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:22:03,909 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:22:03,909 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 1 context(s): returning proxy org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:22:03,910 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': got connection from pool
2018-11-20 14:22:03,910 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': current size: 4/5
2018-11-20 14:22:03,910 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:22:03,910 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling toString...
2018-11-20 14:22:03,910 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: toString returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:22:03,911 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': returning org.mariadb.jdbc.MariaDbConnection@6328d34a
2018-11-20 14:22:03,911 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@145eaa29
2018-11-20 14:22:03,911 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:22:03,911 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: notifyBeforeUse a SessionHandleState with 1 context(s)
2018-11-20 14:22:03,911 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:22:03,911 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 14:22:03,924 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: prepareCall returning sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : [null,null,null]
2018-11-20 14:22:03,928 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: WARNING: transaction manager not running?
2018-11-20 14:22:03,928 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: close()...
2018-11-20 14:22:03,929 com.atomikos.jdbc.AbstractConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> Forcing close of pending statement: sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : ['bbb6b0b608964e96907a07a10f49f340','IPAD MINI2','']
2018-11-20 14:22:03,929 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): entering notifySessionClosed
2018-11-20 14:22:03,929 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): delegating session close to a TransactionContext
2018-11-20 14:22:03,930 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing state to com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:22:03,930 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.TerminatedStateHandler@4ae3c1cd
2018-11-20 14:22:03,930 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): all contexts terminated, firing TerminatedEvent
2018-11-20 14:22:03,931 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> SessionHandleState terminated, firing XPooledConnectionTerminated event for an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s)
2018-11-20 14:22:03,931 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:22:03,931 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): notifying listener: atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9'
2018-11-20 14:22:03,932 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '2cbc2f5b-f102-463c-95b2-db8bffbbb1d9': connection an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s) became available, notifying potentially waiting threads
2018-11-20 14:22:03,932 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:22:03,932 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6328d34a: closed.
2018-11-20 14:22:03,933 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:57) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 14:24:06,459 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:24:06,464 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:24:06,502 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:24:06,611 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:24:06,612 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:24:06,634 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:24:06,635 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:24:06,639 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:24:06,643 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:24:06,644 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 14:24:06,644 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:24:06,645 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:24:06,647 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:24:06,647 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:24:06,649 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_test_table.sql
2018-11-20 14:24:06,649 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:24:06,651 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:24:06,656 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:24:06,661 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:24:06,674 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:24:06,688 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_test_table.sql ...
2018-11-20 14:24:06,693 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:24:06,695 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:24:06,698 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 10: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:24:06,702 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:24:06,705 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:24:06,713 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:24:06,717 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_test_table.sql (filename: V1_0_0__init_test_table.sql)
2018-11-20 14:24:06,718 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:24:06,759 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 14:24:06,761 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:24:06,775 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:16) INFO  --> Using Slf4J for logging.
2018-11-20 14:24:06,776 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:24:07,215 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 14:24:07,220 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': getConnection ( null )...
2018-11-20 14:24:07,220 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': init...
2018-11-20 14:24:07,221 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:12) WARN  --> AtomikosDataSoureBean '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': testQuery set - pool may be slower / you might want to consider setting maxLifetime instead...
2018-11-20 14:24:07,236 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:16) INFO  --> AtomikosDataSoureBean '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 14:24:07,246 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: adding resource 6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224
2018-11-20 14:24:07,247 com.atomikos.icatch.system.Configuration [main] (Slf4jLogger.java:20) DEBUG --> Configuration: added resource 6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224
2018-11-20 14:24:07,250 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': initializing...
2018-11-20 14:24:07,262 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224'
2018-11-20 14:24:07,265 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224'
2018-11-20 14:24:07,270 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224'
2018-11-20 14:24:07,275 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224'
2018-11-20 14:24:07,283 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): registering listener atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224'
2018-11-20 14:24:07,287 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> TaskManager: initializing...
2018-11-20 14:24:07,287 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:16) INFO  --> THREADS: using JDK thread pooling...
2018-11-20 14:24:07,293 com.atomikos.icatch.imp.thread.TaskManager [main] (Slf4jLogger.java:20) DEBUG --> THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
2018-11-20 14:24:07,293 com.atomikos.icatch.imp.thread.Java15ExecutorFactory [main] (Slf4jLogger.java:20) DEBUG --> (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@f0f2775
2018-11-20 14:24:07,294 com.atomikos.icatch.imp.thread.ThreadFactory [main] (Slf4jLogger.java:20) DEBUG --> ThreadFactory: creating new thread: Atomikos:0
2018-11-20 14:24:07,295 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': init done.
2018-11-20 14:24:07,295 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time acquired
2018-11-20 14:24:07,295 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): testing connection with query [select 1]
2018-11-20 14:24:07,296 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): connection tested OK
2018-11-20 14:24:07,297 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): creating connection proxy...
2018-11-20 14:24:07,300 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): notifySessionBorrowed
2018-11-20 14:24:07,302 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.NotInBranchStateHandler@3b2c72c2
2018-11-20 14:24:07,315 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: WARNING: transaction manager not running?
2018-11-20 14:24:07,316 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: calling toString...
2018-11-20 14:24:07,316 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: toString returning org.mariadb.jdbc.MariaDbConnection@6279cee3
2018-11-20 14:24:07,316 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 1 context(s): returning proxy org.mariadb.jdbc.MariaDbConnection@6279cee3
2018-11-20 14:24:07,316 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': got connection from pool
2018-11-20 14:24:07,317 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': current size: 4/5
2018-11-20 14:24:07,331 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: WARNING: transaction manager not running?
2018-11-20 14:24:07,332 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: calling toString...
2018-11-20 14:24:07,333 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: toString returning org.mariadb.jdbc.MariaDbConnection@6279cee3
2018-11-20 14:24:07,333 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:20) DEBUG --> AtomikosDataSoureBean '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': returning org.mariadb.jdbc.MariaDbConnection@6279cee3
2018-11-20 14:24:07,334 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@4206a205
2018-11-20 14:24:07,334 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: WARNING: transaction manager not running?
2018-11-20 14:24:07,334 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: notifyBeforeUse a SessionHandleState with 1 context(s)
2018-11-20 14:24:07,335 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: WARNING: transaction manager not running?
2018-11-20 14:24:07,335 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 14:24:07,353 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: prepareCall returning sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : [null,null,null]
2018-11-20 14:24:07,358 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:12) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: WARNING: transaction manager not running?
2018-11-20 14:24:07,359 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:16) INFO  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: close()...
2018-11-20 14:24:07,359 com.atomikos.jdbc.AbstractConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> Forcing close of pending statement: sql : 'CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)', parameters : ['422258d932ea44b695cd144ed7f1c7d6','IPAD MINI2','']
2018-11-20 14:24:07,360 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): entering notifySessionClosed
2018-11-20 14:24:07,360 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 1 context(s): delegating session close to a TransactionContext
2018-11-20 14:24:07,361 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing state to com.atomikos.datasource.xa.session.TerminatedStateHandler@57d5872c
2018-11-20 14:24:07,361 com.atomikos.datasource.xa.session.TransactionContext [main] (Slf4jLogger.java:20) DEBUG --> a TransactionContext: changing to state com.atomikos.datasource.xa.session.TerminatedStateHandler@57d5872c
2018-11-20 14:24:07,361 com.atomikos.datasource.xa.session.SessionHandleState [main] (Slf4jLogger.java:20) DEBUG --> a SessionHandleState with 0 context(s): all contexts terminated, firing TerminatedEvent
2018-11-20 14:24:07,362 com.atomikos.jdbc.AtomikosXAPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> SessionHandleState terminated, firing XPooledConnectionTerminated event for an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s)
2018-11-20 14:24:07,362 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:24:07,362 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): notifying listener: atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224'
2018-11-20 14:24:07,362 com.atomikos.datasource.pool.ConnectionPool [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection pool '6a42b8ad-8558-4cbf-aea0-5aa8f8d5b224': connection an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s) became available, notifying potentially waiting threads
2018-11-20 14:24:07,363 com.atomikos.datasource.pool.AbstractXPooledConnection [main] (Slf4jLogger.java:20) DEBUG --> an AtomikosXAPooledConnection with a SessionHandleState with 0 context(s): updating last time released
2018-11-20 14:24:07,363 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:20) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@6279cee3: closed.
2018-11-20 14:24:07,363 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:57) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 14:31:18,636 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:31:18,640 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:31:18,684 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:31:18,804 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:31:18,805 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:31:18,826 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:31:18,826 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:31:18,831 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:31:18,836 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:31:18,836 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:31:18,838 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:31:18,838 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:31:18,841 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:31:18,841 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:31:18,842 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 14:31:18,843 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:31:18,844 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:31:18,849 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:31:18,853 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:31:18,867 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:31:18,882 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 14:31:18,889 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:31:18,891 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:31:18,895 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:31:18,897 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:31:18,909 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:31:18,911 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 14:31:18,911 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:31:18,946 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 14:31:18,947 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:32:43,844 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:32:43,852 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:32:43,891 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:32:44,003 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:32:44,003 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:32:44,024 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:32:44,025 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:32:44,029 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:32:44,034 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:32:44,034 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:32:44,035 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:32:44,036 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:32:44,038 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:32:44,038 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:32:44,040 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 14:32:44,040 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:32:44,042 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:32:44,046 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:32:44,050 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:32:44,061 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:32:44,069 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 14:32:44,078 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:32:44,081 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:32:44,084 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:32:44,086 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:32:44,097 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:32:44,099 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 14:32:44,099 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:32:44,126 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 14:32:44,129 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:33:36,699 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:33:36,704 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:33:36,745 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:33:36,855 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:33:36,855 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:33:36,875 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:33:36,876 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:33:36,880 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:33:36,885 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:33:36,885 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:33:36,886 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:33:36,887 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:33:36,889 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:33:36,889 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:33:36,890 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 14:33:36,891 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:33:36,892 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:33:36,896 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:33:36,901 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:33:36,911 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:33:36,922 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 14:33:36,929 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:33:36,935 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:33:36,937 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 10: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:33:36,941 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:33:36,942 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:33:36,951 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:33:36,955 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 14:33:36,955 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:33:36,989 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.075s)
2018-11-20 14:33:36,993 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:33:37,006 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 14:33:37,009 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:34:04,734 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:34:04,739 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:34:04,780 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:34:04,892 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:34:04,892 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:34:04,914 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:34:04,915 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:34:04,920 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:34:04,924 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:34:04,925 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:34:04,926 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:34:04,926 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:34:04,929 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:34:04,929 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:34:04,931 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 14:34:04,931 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:34:04,933 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:34:04,938 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:34:04,943 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:34:04,955 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:34:04,969 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 14:34:04,976 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:34:04,979 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:34:04,981 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 10: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:34:04,987 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:34:04,989 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:34:04,999 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:34:05,003 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 14:34:05,003 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:34:05,029 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.072s)
2018-11-20 14:34:05,033 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:34:05,042 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 14:34:05,044 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:35:20,034 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:35:20,039 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:35:20,077 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:35:20,191 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:35:20,192 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:35:20,216 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:35:20,216 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:35:20,221 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:35:20,227 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:35:20,227 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:35:20,228 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:35:20,229 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:35:20,231 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:35:20,231 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:35:20,232 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 14:35:20,233 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:35:20,235 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:35:20,239 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:35:20,245 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:35:20,254 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:35:20,269 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 14:35:20,274 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:35:20,285 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:35:20,288 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:35:20,290 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:35:20,299 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:35:20,302 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 14:35:20,302 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:35:20,337 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.080s)
2018-11-20 14:35:20,341 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:35:20,349 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 39 of 180M
2018-11-20 14:35:20,352 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:36:36,842 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:36:36,847 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:36:36,884 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:36:36,999 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:36:36,999 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:36:37,019 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:36:37,020 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:36:37,025 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:36:37,029 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:36:37,030 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@37a71e93 ...
2018-11-20 14:36:37,030 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:36:37,031 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:36:37,033 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:36:37,033 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:36:37,035 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 14:36:37,036 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:36:37,037 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:36:37,042 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:36:37,048 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:36:37,059 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:36:37,069 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 14:36:37,076 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:36:37,079 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:36:37,083 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:36:37,085 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:36:37,094 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:36:37,096 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 14:36:37,096 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:36:37,105 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.043s)
2018-11-20 14:36:37,109 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:36:37,120 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 14:36:37,123 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 14:36:37,138 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 14:36:37,139 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 14:36:37,139 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 14:36:37,175 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 14:36:37,175 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 14:36:37,215 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 14:36:37,215 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 14:36:37,224 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 14:36:37,226 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-20 14:36:37,229 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 14:36:37,231 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 14:36:37,231 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 14:36:37,231 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:36:37,274 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 14:36:37,275 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-20 14:36:37,279 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 14:36:37,281 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 14:36:37,284 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 14:36:37,292 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 14:36:37,294 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:36:37,295 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 14:36:37,295 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 14:36:37,296 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:36:37,333 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 14:36:37,333 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.1 - product procedures
2018-11-20 14:36:37,335 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 14:36:37,336 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 14:36:37,337 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 14:36:37,361 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 2 migrations to schema `productdb` (execution time 00:00.244s)
2018-11-20 14:36:37,365 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 14:36:37,365 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:47) DEBUG --> ++++++Test save product ....
2018-11-20 14:37:09,673 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 14:37:09,676 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 14:37:09,720 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 14:37:09,848 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 14:37:09,848 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 14:37:09,868 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 14:37:09,869 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 14:37:09,873 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 14:37:09,877 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 14:37:09,877 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 14:37:09,878 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 14:37:09,878 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 14:37:09,881 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 14:37:09,881 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 14:37:09,882 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 14:37:09,882 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 14:37:09,884 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 14:37:09,889 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 14:37:09,893 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 14:37:09,905 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 14:37:09,920 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 14:37:09,929 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 14:37:09,931 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 14:37:09,934 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 14:37:09,936 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 14:37:09,943 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 14:37:09,945 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 14:37:09,946 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 14:37:09,977 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.056s)
2018-11-20 14:37:09,981 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 14:37:09,993 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 14:37:09,994 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 14:37:09,999 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-20 14:37:10,000 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> ++++++Test save product ....
2018-11-20 15:06:40,848 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:06:40,850 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:06:40,892 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:06:41,027 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:06:41,027 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:06:41,047 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:06:41,048 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:06:41,053 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:06:41,057 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:06:41,057 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:06:41,057 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:06:41,058 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:06:41,060 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:06:41,060 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:06:41,062 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:06:41,062 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:06:41,063 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:06:41,068 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:06:41,072 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:06:41,084 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:06:41,097 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:06:41,107 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:06:41,109 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:06:41,112 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:06:41,113 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:06:41,122 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:06:41,126 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:06:41,126 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:06:41,162 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.059s)
2018-11-20 15:06:41,165 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 15:06:41,176 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 15:06:41,177 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 15:06:41,182 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-20 15:06:41,182 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> ++++++Test save product ....
2018-11-20 15:06:41,209 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 15:06:41,210 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:06:41,650 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:85) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 15:06:41,653 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '18e0aec2-c70f-4a52-97fa-178cbb3c5be1': getConnection()...
2018-11-20 15:06:41,653 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '18e0aec2-c70f-4a52-97fa-178cbb3c5be1': init...
2018-11-20 15:06:41,654 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '18e0aec2-c70f-4a52-97fa-178cbb3c5be1': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=18e0aec2-c70f-4a52-97fa-178cbb3c5be1, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 15:06:41,734 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@de3a06f
2018-11-20 15:06:41,735 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-20 15:06:41,735 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-20 15:06:41,735 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 15:06:41,787 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-20 15:06:41,787 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: close()...
2018-11-20 15:06:41,788 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:88) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 15:11:16,075 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:11:16,078 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:11:16,124 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:11:16,297 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:11:16,297 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:11:16,319 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:11:16,320 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:11:16,326 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:11:16,330 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:11:16,330 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:11:16,330 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:11:16,331 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:11:16,333 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:11:16,333 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:11:16,335 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product2_table.sql
2018-11-20 15:11:16,335 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:11:16,337 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:11:16,337 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:11:16,343 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:11:16,348 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:11:16,367 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:11:16,379 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product2_table.sql ...
2018-11-20 15:11:16,386 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product2
2018-11-20 15:11:16,388 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:11:16,392 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:11:16,394 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:11:16,396 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:11:16,397 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:11:16,399 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:11:16,406 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:11:16,410 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product2_table.sql (filename: V1_0_0__init_product2_table.sql)
2018-11-20 15:11:16,411 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:11:16,411 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:11:16,426 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 15:11:16,426 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 15:11:16,434 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 35 of 180M
2018-11-20 15:11:34,616 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:11:34,623 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:11:34,707 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:11:34,887 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:11:34,887 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:11:34,919 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:11:34,920 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:11:34,928 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:11:34,935 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:11:34,936 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:11:34,937 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:11:34,938 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:11:34,942 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:11:34,943 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:11:34,946 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product2_table.sql
2018-11-20 15:11:34,946 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:11:34,950 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:11:34,950 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:11:34,959 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:11:34,967 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:11:34,988 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:11:35,004 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product2_table.sql ...
2018-11-20 15:11:35,015 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product2
2018-11-20 15:11:35,017 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:11:35,020 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:11:35,022 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:11:35,024 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:11:35,026 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:11:35,028 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:11:35,037 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:11:35,043 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product2_table.sql (filename: V1_0_0__init_product2_table.sql)
2018-11-20 15:11:35,044 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:11:35,044 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:11:35,060 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 15:11:35,060 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 15:11:35,067 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 35 of 180M
2018-11-20 15:12:27,759 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:12:27,762 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:12:27,806 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:12:27,945 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:12:27,945 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:12:27,968 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:12:27,969 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:12:27,973 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:12:27,977 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:12:27,978 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:12:27,978 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:12:27,979 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:12:27,981 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:12:27,981 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:12:27,984 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:12:27,984 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__init_product_table.sql
2018-11-20 15:12:27,986 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:12:27,987 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:12:27,991 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:12:27,995 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:12:28,160 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:12:28,172 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:12:28,177 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:12:28,180 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:12:28,184 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__init_product_table.sql ...
2018-11-20 15:12:28,185 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product2
2018-11-20 15:12:28,188 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:12:28,190 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:12:28,192 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:12:28,200 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:12:28,202 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:12:28,202 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__init_product_table.sql (filename: V1_0_1__init_product_table.sql)
2018-11-20 15:12:28,203 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:12:28,222 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 15:12:28,222 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 15:12:28,228 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 35 of 180M
2018-11-20 15:13:11,472 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:13:11,477 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:13:11,550 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:13:11,736 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:13:11,736 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:13:11,760 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:13:11,760 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:13:11,766 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:13:11,770 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:13:11,771 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:13:11,771 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:13:11,771 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:13:11,774 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:13:11,774 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:13:11,777 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:13:11,777 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__init_product_table.sql
2018-11-20 15:13:11,781 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:13:11,781 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:13:11,788 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:13:11,797 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:13:11,830 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:13:11,845 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:13:11,852 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:13:11,854 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:13:11,859 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__init_product_table.sql ...
2018-11-20 15:13:11,860 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product2
2018-11-20 15:13:11,864 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:13:11,865 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:13:11,867 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:13:11,889 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:13:11,892 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:13:11,892 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__init_product_table.sql (filename: V1_0_1__init_product_table.sql)
2018-11-20 15:13:11,893 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:13:11,902 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 15:13:11,902 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 15:13:11,907 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 35 of 180M
2018-11-20 15:15:43,504 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:15:43,506 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:15:43,553 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:15:43,690 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:15:43,690 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:15:43,712 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:15:43,712 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:15:43,717 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:15:43,721 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:15:43,721 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:15:43,722 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:15:43,722 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:15:43,724 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:15:43,725 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:15:43,726 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:15:43,726 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:15:43,730 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__init_product_table.sql
2018-11-20 15:15:43,730 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:15:43,735 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:15:43,739 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:15:43,756 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:15:43,769 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:15:43,779 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:15:43,782 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:15:43,786 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:15:43,788 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:15:43,799 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:15:43,801 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__init_product_table.sql ...
2018-11-20 15:15:43,802 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product2
2018-11-20 15:15:43,804 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:15:43,807 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:15:43,808 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:15:43,808 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__init_product_table.sql (filename: V1_0_2__init_product_table.sql)
2018-11-20 15:15:43,841 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.069s)
2018-11-20 15:15:43,845 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 15:15:43,855 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 15:15:43,858 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.2 - init product table
2018-11-20 15:15:43,862 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product2
2018-11-20 15:15:43,866 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product2' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 15:15:43,867 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 15:15:43,867 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:15:43,932 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 15:15:43,932 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.2 - init product table
2018-11-20 15:15:43,934 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 15:15:43,935 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 15:15:43,937 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 15:15:43,951 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 1 migration to schema `productdb` (execution time 00:00.101s)
2018-11-20 15:15:43,956 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 37 of 180M
2018-11-20 15:15:43,956 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> ++++++Test save product ....
2018-11-20 15:15:43,974 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 15:15:43,975 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:15:44,456 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:85) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 15:15:44,459 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'c53d3b76-8eaf-462d-a684-b575be117d76': getConnection()...
2018-11-20 15:15:44,459 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'c53d3b76-8eaf-462d-a684-b575be117d76': init...
2018-11-20 15:15:44,459 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'c53d3b76-8eaf-462d-a684-b575be117d76': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=c53d3b76-8eaf-462d-a684-b575be117d76, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 15:15:44,539 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@33b37288
2018-11-20 15:15:44,540 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77a57272: WARNING: transaction manager not running?
2018-11-20 15:15:44,540 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77a57272: WARNING: transaction manager not running?
2018-11-20 15:15:44,540 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77a57272: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 15:15:44,558 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77a57272: WARNING: transaction manager not running?
2018-11-20 15:15:44,558 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77a57272: close()...
2018-11-20 15:15:44,559 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:88) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 15:16:17,378 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:16:17,381 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:16:17,416 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:16:17,536 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:16:17,536 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:16:17,556 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:16:17,557 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:16:17,563 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:16:17,568 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:16:17,568 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:16:17,569 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:16:17,569 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:16:17,571 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:16:17,572 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:16:17,574 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:16:17,574 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:16:17,576 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_3__init_product_table.sql
2018-11-20 15:16:17,577 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:16:17,583 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:16:17,588 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:16:17,608 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:16:17,621 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:16:17,628 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:16:17,630 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:16:17,633 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:16:17,636 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:16:17,644 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:16:17,646 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_3__init_product_table.sql ...
2018-11-20 15:16:17,648 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product2
2018-11-20 15:16:17,659 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:16:17,660 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:16:17,661 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:16:17,661 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_3__init_product_table.sql (filename: V1_0_3__init_product_table.sql)
2018-11-20 15:16:17,681 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 35 of 180M
2018-11-20 15:16:48,350 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 15:16:48,352 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:16:48,391 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 15:16:48,513 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 15:16:48,513 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 15:16:48,533 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 15:16:48,534 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 15:16:48,539 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 15:16:48,543 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 15:16:48,543 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-20 15:16:48,543 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 15:16:48,544 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 15:16:48,546 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 15:16:48,546 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 15:16:48,548 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 15:16:48,548 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 15:16:48,549 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__init_product_table.sql
2018-11-20 15:16:48,550 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 15:16:48,554 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 15:16:48,558 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 15:16:48,568 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 15:16:48,581 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 15:16:48,588 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 15:16:48,594 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:16:48,597 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 15:16:48,598 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 15:16:48,605 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 15:16:48,607 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__init_product_table.sql ...
2018-11-20 15:16:48,609 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product2
2018-11-20 15:16:48,611 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product2 (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 15:16:48,612 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 15:16:48,613 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 15:16:48,613 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__init_product_table.sql (filename: V1_0_2__init_product_table.sql)
2018-11-20 15:16:48,641 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.058s)
2018-11-20 15:16:48,644 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 15:16:48,659 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-20 15:16:48,660 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 15:16:48,664 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-20 15:16:48,665 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> ++++++Test save product ....
2018-11-20 15:16:48,687 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 15:16:48,688 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 15:16:49,132 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:85) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 15:16:49,135 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '91e5cc6e-02b5-4148-9eb3-4123457ca47b': getConnection()...
2018-11-20 15:16:49,135 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '91e5cc6e-02b5-4148-9eb3-4123457ca47b': init...
2018-11-20 15:16:49,135 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '91e5cc6e-02b5-4148-9eb3-4123457ca47b': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=91e5cc6e-02b5-4148-9eb3-4123457ca47b, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 15:16:49,218 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@2bea5ab4
2018-11-20 15:16:49,218 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-20 15:16:49,218 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-20 15:16:49,219 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 15:16:49,233 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-20 15:16:49,233 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: close()...
2018-11-20 15:16:49,234 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:88) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 16:56:22,478 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 16:56:22,484 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:56:22,525 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 16:56:22,645 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 16:56:22,645 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 16:56:22,667 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 16:56:22,668 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 16:56:22,674 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 16:56:22,678 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 16:56:22,679 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 16:56:22,679 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 16:56:22,680 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 16:56:22,683 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 16:56:22,683 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 16:56:22,685 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 16:56:22,685 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 16:56:22,687 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 16:56:22,692 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 16:56:22,698 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 16:56:22,709 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 16:56:22,718 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 16:56:22,725 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 16:56:22,728 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 16:56:22,731 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 16:56:22,735 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 16:56:22,744 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:56:22,751 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 16:56:22,769 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:56:22,773 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 60: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 16:56:22,779 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 16:56:22,782 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 16:56:22,782 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 16:56:22,807 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 16:56:22,813 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 16:56:22,832 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 16:56:22,833 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:56:23,416 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '1c279124-a792-4017-a8fd-cc348f2f21bb': getConnection()...
2018-11-20 16:56:23,417 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1c279124-a792-4017-a8fd-cc348f2f21bb': init...
2018-11-20 16:56:23,418 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1c279124-a792-4017-a8fd-cc348f2f21bb': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=1c279124-a792-4017-a8fd-cc348f2f21bb, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 16:56:23,592 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 16:56:23,592 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 16:56:23,593 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 16:56:23,593 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 16:56:23,620 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=199) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 16:56:23,625 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 16:56:23,626 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 16:56:23,626 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: close()...
2018-11-20 16:57:36,263 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 16:57:36,270 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:57:36,305 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 16:57:36,425 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 16:57:36,426 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 16:57:36,446 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 16:57:36,447 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 16:57:36,453 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 16:57:36,458 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 16:57:36,458 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 16:57:36,459 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 16:57:36,460 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 16:57:36,462 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 16:57:36,462 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 16:57:36,464 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 16:57:36,464 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 16:57:36,466 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 16:57:36,471 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 16:57:36,476 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 16:57:36,487 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 16:57:36,497 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 16:57:36,504 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 16:57:36,507 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 16:57:36,512 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 16:57:36,514 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 16:57:36,521 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:57:36,523 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 16:57:36,534 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:57:36,547 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 16:57:36,550 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 16:57:36,550 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 16:57:36,588 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 16:57:36,590 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 16:57:36,608 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 16:57:36,609 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:57:37,068 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'dcc13165-9006-4e3c-9e08-89a02df36e73': getConnection()...
2018-11-20 16:57:37,068 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'dcc13165-9006-4e3c-9e08-89a02df36e73': init...
2018-11-20 16:57:37,068 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'dcc13165-9006-4e3c-9e08-89a02df36e73': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=dcc13165-9006-4e3c-9e08-89a02df36e73, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 16:57:37,154 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 16:57:37,155 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 16:57:37,155 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 16:57:37,155 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 16:57:37,171 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=205) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 16:57:37,174 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 16:57:37,175 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 16:57:37,175 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: close()...
2018-11-20 16:58:55,368 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 16:58:55,377 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:58:55,415 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 16:58:55,522 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 16:58:55,523 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 16:58:55,543 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 16:58:55,544 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 16:58:55,548 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 16:58:55,552 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 16:58:55,553 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 16:58:55,553 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 16:58:55,554 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 16:58:55,556 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 16:58:55,556 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 16:58:55,558 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 16:58:55,558 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 16:58:55,560 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 16:58:55,567 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 16:58:55,571 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 16:58:55,584 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 16:58:55,594 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 16:58:55,600 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 16:58:55,602 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 16:58:55,606 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 16:58:55,608 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 16:58:55,618 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:58:55,619 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 16:58:55,629 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:58:55,640 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 16:58:55,644 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 16:58:55,645 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 16:58:55,676 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.090s)
2018-11-20 16:58:55,682 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 16:58:55,692 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 16:58:55,694 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 16:58:55,714 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 16:58:55,715 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:58:56,260 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 16:58:56,263 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '23fe3728-5e83-4cce-a500-04ddd5787350': getConnection()...
2018-11-20 16:58:56,263 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '23fe3728-5e83-4cce-a500-04ddd5787350': init...
2018-11-20 16:58:56,263 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '23fe3728-5e83-4cce-a500-04ddd5787350': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=23fe3728-5e83-4cce-a500-04ddd5787350, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 16:58:56,393 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@7bb58ca3
2018-11-20 16:58:56,394 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 16:58:56,394 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 16:58:56,394 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 16:58:56,423 com.csft.product.dao.ProductDao [main] (ProductDao.java:61) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=211) Table 'productdb.product' doesn't exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:55)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: Table 'productdb.product' doesn't exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['3e21c2ba695d4420b5a75bbdc25b9d22','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 16:58:56,428 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-20 16:58:56,428 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 16:58:56,429 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: close()...
2018-11-20 16:59:25,634 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 16:59:25,639 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:59:25,679 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 16:59:25,788 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 16:59:25,788 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 16:59:25,810 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 16:59:25,811 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 16:59:25,818 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 16:59:25,822 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 16:59:25,822 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 16:59:25,823 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 16:59:25,824 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 16:59:25,826 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 16:59:25,826 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 16:59:25,828 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 16:59:25,828 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 16:59:25,830 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 16:59:25,835 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 16:59:25,839 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 16:59:25,857 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 16:59:25,869 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 16:59:25,876 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 16:59:25,879 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 16:59:25,883 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 16:59:25,888 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 16:59:25,897 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:59:25,899 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 16:59:25,921 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 16:59:25,929 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 16:59:25,932 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 16:59:25,932 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 16:59:25,948 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.087s)
2018-11-20 16:59:25,952 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 16:59:25,973 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 16:59:25,976 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 16:59:26,007 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 16:59:26,009 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 16:59:26,531 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 16:59:26,535 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'cb54abf4-aa19-49e6-b4cc-1df098f9fa11': getConnection()...
2018-11-20 16:59:26,535 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'cb54abf4-aa19-49e6-b4cc-1df098f9fa11': init...
2018-11-20 16:59:26,535 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'cb54abf4-aa19-49e6-b4cc-1df098f9fa11': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=cb54abf4-aa19-49e6-b4cc-1df098f9fa11, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 16:59:26,630 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@7bb58ca3
2018-11-20 16:59:26,630 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 16:59:26,630 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 16:59:26,630 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 16:59:26,648 com.csft.product.dao.ProductDao [main] (ProductDao.java:61) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=218) Table 'productdb.product' doesn't exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:55)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: Table 'productdb.product' doesn't exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['54b58a7218a44d34b1d73f89bc9be6cc','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 16:59:26,653 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-20 16:59:26,654 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 16:59:26,654 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: close()...
2018-11-20 17:00:04,189 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 17:00:04,194 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 17:00:04,222 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 17:00:04,339 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 17:00:04,339 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 17:00:04,359 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 17:00:04,360 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 17:00:04,365 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 17:00:04,371 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 17:00:04,371 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 17:00:04,372 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 17:00:04,373 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 17:00:04,375 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 17:00:04,376 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 17:00:04,378 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 17:00:04,379 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 17:00:04,380 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 17:00:04,385 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 17:00:04,391 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 17:00:04,402 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 17:00:04,413 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 17:00:04,420 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 17:00:04,422 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 17:00:04,426 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 17:00:04,428 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 17:00:04,438 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:00:04,439 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 17:00:04,458 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:00:04,466 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 17:00:04,468 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 17:00:04,469 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 17:00:04,481 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.077s)
2018-11-20 17:00:04,485 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 17:00:04,495 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 17:00:04,498 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 17:00:04,516 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 17:00:04,517 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 17:00:04,986 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 17:00:04,989 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '0b65d4b9-a8ef-4cfe-9498-796056bdb0d2': getConnection()...
2018-11-20 17:00:04,989 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0b65d4b9-a8ef-4cfe-9498-796056bdb0d2': init...
2018-11-20 17:00:04,990 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0b65d4b9-a8ef-4cfe-9498-796056bdb0d2': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=0b65d4b9-a8ef-4cfe-9498-796056bdb0d2, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 17:00:05,372 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@7bb58ca3
2018-11-20 17:00:05,372 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 17:00:05,373 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 17:00:05,373 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 17:00:05,394 com.csft.product.dao.ProductDao [main] (ProductDao.java:61) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=224) Table 'productdb.product' doesn't exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:55)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: Table 'productdb.product' doesn't exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['0de20e07e0874e51b44c3ae5f5ddeb37','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 17:00:05,397 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-20 17:00:05,398 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 17:00:05,398 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: close()...
2018-11-20 17:01:09,150 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 17:01:09,158 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 17:01:09,207 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 17:01:09,344 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 17:01:09,345 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 17:01:09,380 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 17:01:09,381 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 17:01:09,386 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 17:01:09,393 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 17:01:09,393 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 17:01:09,394 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 17:01:09,395 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 17:01:09,399 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 17:01:09,399 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 17:01:09,402 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 17:01:09,403 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 17:01:09,405 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 17:01:09,413 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 17:01:09,422 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 17:01:09,436 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 17:01:09,449 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 17:01:09,458 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 17:01:09,475 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 17:01:09,480 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 17:01:09,483 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 17:01:09,491 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:01:09,493 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 17:01:09,502 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:01:09,510 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 17:01:09,513 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 17:01:09,513 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 17:01:09,524 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.085s)
2018-11-20 17:01:09,531 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 17:01:09,546 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 17:01:09,551 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 17:01:09,570 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 17:01:09,571 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 17:01:09,571 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 17:01:09,639 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 17:01:09,639 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 17:01:09,678 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 17:01:09,679 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 17:01:09,689 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 17:01:09,692 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-20 17:01:09,694 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 17:01:09,697 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 17:01:09,697 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 17:01:09,698 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 17:01:09,741 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 17:01:09,742 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-20 17:01:09,744 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 17:01:09,745 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 17:01:09,748 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 17:01:09,762 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 17:01:09,763 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 17:01:09,765 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 17:01:09,765 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 17:01:09,765 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:01:09,768 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 17:01:09,768 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 17:01:09,769 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_Query_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 17:01:09,770 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 17:01:09,770 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:01:09,772 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 17:01:09,773 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 17:01:09,774 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-20 17:01:09,776 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 17:01:09,777 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 17:01:09,790 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 17:01:09,795 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-20 17:01:09,799 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 17:01:09,819 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 17:01:09,820 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 17:01:10,276 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 17:01:10,278 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '25a7a645-6df4-4923-b0f5-5a71211d6052': getConnection()...
2018-11-20 17:01:10,279 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '25a7a645-6df4-4923-b0f5-5a71211d6052': init...
2018-11-20 17:01:10,279 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '25a7a645-6df4-4923-b0f5-5a71211d6052': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=25a7a645-6df4-4923-b0f5-5a71211d6052, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 17:01:10,377 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@534df152
2018-11-20 17:01:10,377 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-20 17:01:10,378 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-20 17:01:10,378 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 17:01:10,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-20 17:01:10,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: close()...
2018-11-20 17:01:10,398 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 17:01:46,540 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 17:01:46,544 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 17:01:46,587 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 17:01:46,705 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 17:01:46,706 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 17:01:46,727 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 17:01:46,727 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 17:01:46,732 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 17:01:46,738 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 17:01:46,738 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 17:01:46,739 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 17:01:46,739 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 17:01:46,742 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 17:01:46,742 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 17:01:46,743 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 17:01:46,743 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 17:01:46,745 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 17:01:46,750 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 17:01:46,756 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 17:01:46,768 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 17:01:46,777 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 17:01:46,783 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 17:01:46,789 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 17:01:46,793 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 17:01:46,795 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 17:01:46,802 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:01:46,805 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_Query_PROCEDURE`
2018-11-20 17:01:46,816 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 17:01:46,831 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 17:01:46,834 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 17:01:46,834 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 17:01:46,857 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 17:01:46,859 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 17:01:46,877 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 17:01:46,878 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 17:01:47,414 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '1e0c329e-15c5-49fa-84f0-54d6aab94e83': getConnection()...
2018-11-20 17:01:47,414 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1e0c329e-15c5-49fa-84f0-54d6aab94e83': init...
2018-11-20 17:01:47,414 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1e0c329e-15c5-49fa-84f0-54d6aab94e83': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=1e0c329e-15c5-49fa-84f0-54d6aab94e83, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 17:01:47,519 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 17:01:47,520 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 17:01:47,520 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 17:01:47,521 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 17:01:47,541 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=241) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 17:01:47,546 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 17:01:47,546 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 17:01:47,547 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: close()...
2018-11-20 18:07:55,594 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:07:55,600 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:07:55,646 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:07:55,763 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:07:55,763 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:07:55,787 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:07:55,788 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:07:55,793 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:07:55,797 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:07:55,797 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:07:55,798 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:07:55,799 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:07:55,801 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:07:55,802 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:07:55,803 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:07:55,804 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:07:55,805 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:07:55,810 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:07:55,816 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:07:55,827 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:07:55,838 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:07:55,847 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:07:55,849 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:07:55,853 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:07:55,855 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:07:55,870 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:07:55,882 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:07:55,886 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:07:55,886 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:07:55,925 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:07:55,927 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:07:55,950 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:07:55,951 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:07:56,426 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '81b3c71d-ae24-42bb-90e4-715f77452a27': getConnection()...
2018-11-20 18:07:56,427 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '81b3c71d-ae24-42bb-90e4-715f77452a27': init...
2018-11-20 18:07:56,427 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '81b3c71d-ae24-42bb-90e4-715f77452a27': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=81b3c71d-ae24-42bb-90e4-715f77452a27, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:07:56,525 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 18:07:56,525 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 18:07:56,526 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 18:07:56,526 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:07:56,550 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=248) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:07:56,555 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 18:07:56,556 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 18:07:56,556 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: close()...
2018-11-20 18:13:59,186 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:13:59,191 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:13:59,231 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:13:59,366 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:13:59,367 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:13:59,390 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:13:59,390 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:13:59,395 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:13:59,400 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:13:59,401 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:13:59,401 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:13:59,402 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:13:59,404 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:13:59,405 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:13:59,406 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:13:59,406 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:13:59,409 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:13:59,415 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:13:59,423 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:13:59,437 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:13:59,447 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:13:59,454 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:13:59,456 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:13:59,460 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:13:59,464 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:13:59,495 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:13:59,502 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:13:59,507 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:13:59,511 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:13:59,512 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:13:59,521 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.081s)
2018-11-20 18:13:59,525 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:13:59,537 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:13:59,540 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 18:13:59,548 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:13:59,549 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:13:59,549 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:13:59,671 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:13:59,672 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:13:59,713 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:13:59,714 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:13:59,723 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 18:13:59,725 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:13:59,728 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 18:13:59,731 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 18:13:59,732 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:13:59,732 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:13:59,775 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:13:59,775 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:13:59,779 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:13:59,780 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:13:59,788 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:13:59,802 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 18:13:59,804 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:13:59,805 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:13:59,805 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:13:59,806 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:13:59,808 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:13:59,808 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:13:59,809 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:13:59,809 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:13:59,810 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow varchar(50),
	IN v_pagesize varchar(50)
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:13:59,812 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 18:13:59,813 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 18:13:59,816 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-20 18:13:59,819 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:13:59,820 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:13:59,834 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:13:59,838 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:13:59,842 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:13:59,879 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:13:59,880 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:14:00,367 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:14:00,370 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '88b786fb-6bd4-474b-924d-ff8f2e720aaa': getConnection()...
2018-11-20 18:14:00,371 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '88b786fb-6bd4-474b-924d-ff8f2e720aaa': init...
2018-11-20 18:14:00,371 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '88b786fb-6bd4-474b-924d-ff8f2e720aaa': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=88b786fb-6bd4-474b-924d-ff8f2e720aaa, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:14:00,462 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@534df152
2018-11-20 18:14:00,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-20 18:14:00,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-20 18:14:00,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:14:00,484 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-20 18:14:00,485 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: close()...
2018-11-20 18:14:00,487 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 18:15:26,038 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:15:26,044 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:15:26,074 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:15:26,193 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:15:26,193 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:15:26,216 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:15:26,216 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:15:26,222 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:15:26,227 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:15:26,228 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:15:26,228 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:15:26,229 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:15:26,231 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:15:26,232 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:15:26,233 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:15:26,233 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:15:26,235 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:15:26,239 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:15:26,244 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:15:26,257 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:15:26,266 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:15:26,270 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:15:26,272 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:15:26,276 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:15:26,278 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:15:26,288 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:15:26,289 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:15:26,303 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:15:26,307 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:15:26,308 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:15:26,343 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.083s)
2018-11-20 18:15:26,348 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:15:26,363 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:15:26,365 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:15:26,394 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:15:26,396 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:15:26,869 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:15:26,875 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '7e249b63-4de9-428e-8017-acd293dc71d9': getConnection()...
2018-11-20 18:15:26,875 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7e249b63-4de9-428e-8017-acd293dc71d9': init...
2018-11-20 18:15:26,876 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7e249b63-4de9-428e-8017-acd293dc71d9': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=7e249b63-4de9-428e-8017-acd293dc71d9, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:15:26,962 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@7bb58ca3
2018-11-20 18:15:26,963 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:15:26,964 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:15:26,964 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:15:26,980 com.csft.product.dao.ProductDao [main] (ProductDao.java:61) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=262) Table 'productdb.product' doesn't exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:55)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: Table 'productdb.product' doesn't exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['89333dc7a79544bb9654a3a6d0dea4b8','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:15:26,983 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-20 18:15:26,984 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:15:26,984 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: close()...
2018-11-20 18:15:46,770 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:15:46,775 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:15:46,811 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:15:46,924 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:15:46,924 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:15:46,945 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:15:46,946 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:15:46,951 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:15:46,955 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:15:46,955 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:15:46,956 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:15:46,957 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:15:46,959 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:15:46,959 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:15:46,961 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:15:46,961 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:15:46,962 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:15:46,967 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:15:46,973 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:15:46,986 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:15:46,999 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:15:47,007 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:15:47,009 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:15:47,013 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:15:47,015 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:15:47,030 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:15:47,031 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:15:47,046 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:15:47,051 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:15:47,052 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:15:47,077 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.088s)
2018-11-20 18:15:47,080 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:15:47,100 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:15:47,101 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:15:47,123 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:15:47,125 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:15:47,616 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:15:47,621 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '3781f005-c59c-4210-a17c-c5c68d7974cd': getConnection()...
2018-11-20 18:15:47,621 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '3781f005-c59c-4210-a17c-c5c68d7974cd': init...
2018-11-20 18:15:47,622 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '3781f005-c59c-4210-a17c-c5c68d7974cd': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=3781f005-c59c-4210-a17c-c5c68d7974cd, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:15:47,719 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@7bb58ca3
2018-11-20 18:15:47,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:15:47,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:15:47,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:15:47,741 com.csft.product.dao.ProductDao [main] (ProductDao.java:61) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=269) Table 'productdb.product' doesn't exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:55)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: Table 'productdb.product' doesn't exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['88a0840412ef45d491adb0b85a9a6578','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:15:47,746 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-20 18:15:47,746 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:15:47,746 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: close()...
2018-11-20 18:16:28,136 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:16:28,141 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:16:28,178 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:16:28,285 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:16:28,286 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:16:28,307 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:16:28,308 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:16:28,312 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:16:28,317 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:16:28,317 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:16:28,318 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:16:28,319 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:16:28,321 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:16:28,321 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:16:28,323 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:16:28,323 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:16:28,326 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:16:28,331 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:16:28,337 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:16:28,347 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:16:28,361 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:16:28,372 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:16:28,376 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:16:28,380 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:16:28,382 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:16:28,398 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:16:28,401 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:16:28,420 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:16:28,423 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:16:28,424 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:16:28,439 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.088s)
2018-11-20 18:16:28,442 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:16:28,455 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:16:28,457 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 18:16:28,463 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:16:28,464 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:16:28,465 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:16:28,504 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:16:28,504 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:16:28,545 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:16:28,545 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:16:28,553 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 18:16:28,558 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:16:28,561 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 18:16:28,563 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 18:16:28,563 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:16:28,564 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:16:28,608 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:16:28,609 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:16:28,612 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:16:28,613 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:16:28,617 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:16:28,630 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 18:16:28,632 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:16:28,633 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:16:28,633 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:16:28,633 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:16:28,636 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:16:28,636 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:16:28,638 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:16:28,638 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:16:28,639 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:16:28,641 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-20 18:16:28,642 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-20 18:16:28,642 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-20 18:16:28,645 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:16:28,646 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:16:28,649 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:16:28,655 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-20 18:16:28,660 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:16:28,684 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:16:28,686 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:16:29,173 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:16:29,176 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '35a4b62f-8dfe-4308-9717-e39e998326a5': getConnection()...
2018-11-20 18:16:29,176 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '35a4b62f-8dfe-4308-9717-e39e998326a5': init...
2018-11-20 18:16:29,177 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '35a4b62f-8dfe-4308-9717-e39e998326a5': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=35a4b62f-8dfe-4308-9717-e39e998326a5, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:16:29,269 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@29f69090
2018-11-20 18:16:29,269 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-20 18:16:29,269 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-20 18:16:29,269 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:16:29,287 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-20 18:16:29,287 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: close()...
2018-11-20 18:16:29,289 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 18:16:29,296 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:16:29,297 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:16:29,302 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:16:29,302 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:16:29,303 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:16:29,303 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:16:29,305 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:16:29,306 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:16:29,306 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:16:29,307 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:16:29,307 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:16:29,308 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:16:29,308 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:16:29,309 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:16:29,309 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:16:29,310 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:16:29,310 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:16:29,311 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:16:29,314 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:16:29,314 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:16:29,315 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:16:29,316 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:16:29,317 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:16:29,318 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:16:29,321 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:16:29,321 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:16:29,323 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:16:29,325 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:16:29,326 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:16:29,333 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 12 of 180M
2018-11-20 18:16:29,335 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:16:29,337 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:16:29,340 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '9fb55a27-e010-42dd-bc84-4b14134654b2': getConnection()...
2018-11-20 18:16:29,340 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '9fb55a27-e010-42dd-bc84-4b14134654b2': init...
2018-11-20 18:16:29,342 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 18:16:29,342 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-20 18:16:29,343 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-20 18:16:29,343 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:16:29,346 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=278) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:16:29,348 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 18:16:29,348 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-20 18:16:29,349 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: close()...
2018-11-20 18:17:51,508 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:17:51,515 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:17:51,554 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:17:51,669 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:17:51,669 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:17:51,691 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:17:51,691 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:17:51,696 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:17:51,701 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:17:51,701 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:17:51,702 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:17:51,702 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:17:51,704 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:17:51,705 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:17:51,706 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:17:51,706 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:17:51,708 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:17:51,713 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:17:51,718 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:17:51,728 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:17:51,740 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:17:51,747 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:17:51,752 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:17:51,755 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:17:51,757 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:17:51,767 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:17:51,768 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:17:51,775 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize
	
END 
2018-11-20 18:17:51,783 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:17:51,784 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:17:51,828 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:17:51,830 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:17:51,847 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:17:51,848 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:17:52,322 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '42466b04-2e7f-4f4d-8e13-9b43b5985bbb': getConnection()...
2018-11-20 18:17:52,322 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '42466b04-2e7f-4f4d-8e13-9b43b5985bbb': init...
2018-11-20 18:17:52,322 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '42466b04-2e7f-4f4d-8e13-9b43b5985bbb': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=42466b04-2e7f-4f4d-8e13-9b43b5985bbb, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:17:52,411 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 18:17:52,412 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 18:17:52,412 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 18:17:52,412 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:17:52,430 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=289) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:17:52,433 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 18:17:52,433 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: WARNING: transaction manager not running?
2018-11-20 18:17:52,433 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@61009542: close()...
2018-11-20 18:20:01,418 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:20:01,423 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:20:01,454 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:20:01,572 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:20:01,573 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:20:01,593 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:20:01,594 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:20:01,598 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:20:01,602 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:20:01,602 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:20:01,603 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:20:01,604 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:20:01,607 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:20:01,607 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:20:01,608 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:20:01,609 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:20:01,610 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:20:01,614 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:20:01,619 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:20:01,632 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:20:01,646 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:20:01,654 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:20:01,656 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:20:01,662 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:20:01,664 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:20:01,694 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:20:01,696 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:20:01,707 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:20:01,711 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:20:01,713 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:20:01,726 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.091s)
2018-11-20 18:20:01,730 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:20:01,738 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:20:01,740 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:20:01,758 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:20:01,759 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:20:02,234 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'e4edf4db-8927-4290-b986-cce13a9e3e57': getConnection()...
2018-11-20 18:20:02,235 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e4edf4db-8927-4290-b986-cce13a9e3e57': init...
2018-11-20 18:20:02,235 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e4edf4db-8927-4290-b986-cce13a9e3e57': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=e4edf4db-8927-4290-b986-cce13a9e3e57, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:20:02,334 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 18:20:02,335 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7bb58ca3: WARNING: transaction manager not running?
2018-11-20 18:20:02,335 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7bb58ca3: WARNING: transaction manager not running?
2018-11-20 18:20:02,335 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7bb58ca3: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:20:02,352 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=297) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:20:02,354 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 18:20:02,354 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7bb58ca3: WARNING: transaction manager not running?
2018-11-20 18:20:02,355 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7bb58ca3: close()...
2018-11-20 18:20:28,420 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:20:28,425 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:20:28,466 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:20:28,572 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:20:28,572 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:20:28,595 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:20:28,596 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:20:28,601 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:20:28,604 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:20:28,604 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:20:28,606 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:20:28,606 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:20:28,608 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:20:28,608 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:20:28,609 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:20:28,610 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:20:28,611 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:20:28,615 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:20:28,619 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:20:28,630 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:20:28,638 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:20:28,644 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:20:28,646 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:20:28,649 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:20:28,651 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:20:28,684 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:20:28,687 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:20:28,700 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:20:28,702 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:20:28,703 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:20:28,712 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.079s)
2018-11-20 18:20:28,715 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:20:28,723 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:20:28,725 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:20:28,748 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:20:28,749 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:20:29,223 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:20:29,226 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '56ed0af0-393e-42b4-be63-10df6eab6d25': getConnection()...
2018-11-20 18:20:29,226 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '56ed0af0-393e-42b4-be63-10df6eab6d25': init...
2018-11-20 18:20:29,226 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '56ed0af0-393e-42b4-be63-10df6eab6d25': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=56ed0af0-393e-42b4-be63-10df6eab6d25, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:20:29,309 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@7bb58ca3
2018-11-20 18:20:29,310 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:20:29,310 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:20:29,310 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:20:29,327 com.csft.product.dao.ProductDao [main] (ProductDao.java:61) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=304) PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:55)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['c443daa9c763432baa109e65c554e53f','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:20:29,331 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-20 18:20:29,331 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:20:29,332 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: close()...
2018-11-20 18:20:49,609 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:20:49,613 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:20:49,652 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:20:49,768 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:20:49,769 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:20:49,790 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:20:49,790 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:20:49,795 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:20:49,800 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:20:49,800 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:20:49,801 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:20:49,801 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:20:49,804 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:20:49,804 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:20:49,805 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:20:49,805 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:20:49,807 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:20:49,812 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:20:49,817 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:20:49,829 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:20:49,837 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:20:49,847 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:20:49,849 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:20:49,853 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:20:49,856 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:20:49,883 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:20:49,884 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:20:49,892 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:20:49,894 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:20:49,895 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:20:49,909 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.077s)
2018-11-20 18:20:49,913 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:20:49,927 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:20:49,930 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:20:49,953 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:20:49,954 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:20:50,417 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:20:50,420 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '9145a7c0-3393-4586-bd9f-576dcb65506d': getConnection()...
2018-11-20 18:20:50,420 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '9145a7c0-3393-4586-bd9f-576dcb65506d': init...
2018-11-20 18:20:50,420 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '9145a7c0-3393-4586-bd9f-576dcb65506d': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=9145a7c0-3393-4586-bd9f-576dcb65506d, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:20:50,511 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@7bb58ca3
2018-11-20 18:20:50,511 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:20:50,512 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:20:50,512 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:20:50,532 com.csft.product.dao.ProductDao [main] (ProductDao.java:61) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=311) PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:55)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['d911b31bfe8648d488acbbb37f0d4fc8','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:20:50,535 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-20 18:20:50,535 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: WARNING: transaction manager not running?
2018-11-20 18:20:50,536 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c540f5a: close()...
2018-11-20 18:22:36,499 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:22:36,504 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:22:36,543 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:22:36,653 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:22:36,653 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:22:36,679 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:22:36,679 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:22:36,685 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:22:36,688 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:22:36,689 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:22:36,689 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:22:36,690 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:22:36,692 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:22:36,692 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:22:36,694 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:22:36,694 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:22:36,696 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:22:36,701 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:22:36,707 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:22:36,721 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:22:36,730 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:22:36,738 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:22:36,740 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:22:36,744 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:22:36,746 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:22:36,755 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:22:36,758 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:22:36,782 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:22:36,785 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:22:36,785 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:22:36,794 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.070s)
2018-11-20 18:22:36,798 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:22:36,805 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:22:36,808 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 18:22:36,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:22:36,820 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:22:36,820 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:22:36,866 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,866 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:22:36,907 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,907 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:22:36,915 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 18:22:36,919 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:22:36,921 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 18:22:36,923 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 18:22:36,924 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,924 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:22:36,967 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,967 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:22:36,970 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:22:36,971 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:22:36,974 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:22:36,986 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 18:22:36,987 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:22:36,988 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:22:36,988 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,989 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:22:36,990 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,991 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:22:36,992 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:22:36,992 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,992 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:22:36,995 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:22:36,995 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.1 - product procedures
2018-11-20 18:22:36,997 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:22:36,998 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:22:37,000 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:22:37,019 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 2 migrations to schema `productdb` (execution time 00:00.214s)
2018-11-20 18:22:37,022 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-20 18:22:37,022 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:22:37,039 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:22:37,040 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:22:37,494 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:22:37,497 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '859185d2-1101-42c8-b755-f0aeed32c2de': getConnection()...
2018-11-20 18:22:37,497 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '859185d2-1101-42c8-b755-f0aeed32c2de': init...
2018-11-20 18:22:37,497 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '859185d2-1101-42c8-b755-f0aeed32c2de': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=859185d2-1101-42c8-b755-f0aeed32c2de, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:22:37,595 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@568bf312
2018-11-20 18:22:37,596 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-20 18:22:37,596 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-20 18:22:37,596 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:22:37,628 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-20 18:22:37,629 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: close()...
2018-11-20 18:22:37,629 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 18:22:55,627 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:22:55,632 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:22:55,673 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:22:55,782 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:22:55,782 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:22:55,804 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:22:55,805 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:22:55,809 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:22:55,813 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:22:55,814 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:22:55,815 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:22:55,816 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:22:55,818 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:22:55,818 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:22:55,820 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:22:55,820 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:22:55,822 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:22:55,826 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:22:55,830 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:22:55,842 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:22:55,854 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:22:55,859 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:22:55,861 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:22:55,865 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:22:55,867 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:22:55,878 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:22:55,882 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE`
2018-11-20 18:22:55,899 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:22:55,903 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:22:55,903 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:22:55,932 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.087s)
2018-11-20 18:22:55,935 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:22:55,946 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:22:55,946 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:22:55,952 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:22:55,952 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:75) DEBUG --> ++++++Test query  product list....
2018-11-20 18:22:55,969 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:22:55,970 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:22:56,425 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'e4e76044-4366-4bb9-a8a1-f4a09461cdcc': getConnection()...
2018-11-20 18:22:56,425 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e4e76044-4366-4bb9-a8a1-f4a09461cdcc': init...
2018-11-20 18:22:56,426 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e4e76044-4366-4bb9-a8a1-f4a09461cdcc': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=e4e76044-4366-4bb9-a8a1-f4a09461cdcc, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:22:56,513 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 18:22:56,514 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-20 18:22:56,514 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-20 18:22:56,514 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:22:56,530 com.csft.product.dao.ProductDao [main] (ProductDao.java:132) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=325) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:124)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:78)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [1,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-20 18:22:56,534 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:79) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-20 18:22:56,534 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-20 18:22:56,535 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-20 18:24:09,384 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:24:09,390 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:24:09,431 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:24:09,564 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:24:09,564 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:24:09,589 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:24:09,589 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:24:09,595 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:24:09,599 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:24:09,600 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:24:09,600 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:24:09,601 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:24:09,603 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:24:09,604 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:24:09,606 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:24:09,606 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:24:09,607 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:24:09,612 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:24:09,622 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:24:09,638 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:24:09,648 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:24:09,654 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:24:09,663 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:24:09,671 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:24:09,673 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:24:09,702 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:24:09,705 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:24:09,717 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:24:09,719 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:24:09,720 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:24:09,743 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-20 18:24:09,746 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:75) DEBUG --> ++++++Test query  product list....
2018-11-20 18:24:09,773 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:24:09,775 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:24:10,256 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'be952022-af9e-4329-b413-78e18628a39a': getConnection()...
2018-11-20 18:24:10,256 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'be952022-af9e-4329-b413-78e18628a39a': init...
2018-11-20 18:24:10,256 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'be952022-af9e-4329-b413-78e18628a39a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=be952022-af9e-4329-b413-78e18628a39a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:24:10,362 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 18:24:10,362 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-20 18:24:10,363 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-20 18:24:10,364 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:24:10,383 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:24:10,383 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@67e2d983
2018-11-20 18:24:10,384 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-20 18:24:10,384 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: close()...
2018-11-20 18:24:10,385 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:79) DEBUG --> query all product result[]
2018-11-20 18:25:14,098 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:25:14,104 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:25:14,142 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:25:14,247 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:25:14,247 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:25:14,269 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:25:14,269 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:25:14,274 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:25:14,278 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:25:14,278 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:25:14,279 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:25:14,280 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:25:14,282 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:25:14,282 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:25:14,284 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:25:14,285 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:25:14,286 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:25:14,297 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:25:14,304 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:25:14,319 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:25:14,328 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:25:14,335 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:25:14,338 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:25:14,342 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:25:14,346 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:25:14,357 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:25:14,358 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:25:14,371 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:25:14,374 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:25:14,375 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:25:14,400 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.077s)
2018-11-20 18:25:14,404 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:25:14,414 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:25:14,417 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-20 18:25:14,427 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:25:14,428 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:25:14,428 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-20 18:25:14,658 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,659 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-20 18:25:14,707 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,708 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-20 18:25:14,716 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-20 18:25:14,720 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:25:14,722 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-20 18:25:14,724 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-20 18:25:14,725 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,725 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:25:14,768 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,769 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-20 18:25:14,773 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:25:14,774 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:25:14,777 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:25:14,787 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-20 18:25:14,789 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:25:14,790 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:25:14,790 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,790 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:25:14,792 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,793 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:25:14,794 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-20 18:25:14,794 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,794 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:25:14,796 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-20 18:25:14,796 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.1 - product procedures
2018-11-20 18:25:14,798 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-20 18:25:14,799 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-20 18:25:14,801 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-20 18:25:14,817 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 2 migrations to schema `productdb` (execution time 00:00.404s)
2018-11-20 18:25:14,821 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-20 18:25:14,821 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-20 18:25:14,842 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:25:14,843 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:25:15,332 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-20 18:25:15,336 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'b10d1062-0de2-4fd9-8cdf-0024474de16a': getConnection()...
2018-11-20 18:25:15,336 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b10d1062-0de2-4fd9-8cdf-0024474de16a': init...
2018-11-20 18:25:15,337 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b10d1062-0de2-4fd9-8cdf-0024474de16a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=b10d1062-0de2-4fd9-8cdf-0024474de16a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:25:15,452 com.csft.product.dao.ProductDao [main] (ProductDao.java:43) DEBUG --> saving product = com.csft.product.pojo.Product@568bf312
2018-11-20 18:25:15,452 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-20 18:25:15,452 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-20 18:25:15,453 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-20 18:25:15,470 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-20 18:25:15,470 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: close()...
2018-11-20 18:25:15,471 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-20 18:25:47,528 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:25:47,533 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:25:47,568 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:25:47,678 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:25:47,679 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:25:47,701 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:25:47,702 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:25:47,707 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:25:47,711 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:25:47,712 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:25:47,713 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:25:47,713 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:25:47,715 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:25:47,716 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:25:47,717 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:25:47,717 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:25:47,719 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:25:47,724 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:25:47,728 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:25:47,740 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:25:47,751 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:25:47,757 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:25:47,760 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:25:47,765 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:25:47,767 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:25:47,781 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:25:47,783 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:25:47,787 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:25:47,792 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:25:47,793 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:25:47,821 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.077s)
2018-11-20 18:25:47,825 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:25:47,834 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:25:47,835 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:25:47,839 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:25:47,840 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:25:47,858 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:25:47,859 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:25:48,340 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'ff6a515c-95a4-491a-94cc-70dbbab4bda8': getConnection()...
2018-11-20 18:25:48,341 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ff6a515c-95a4-491a-94cc-70dbbab4bda8': init...
2018-11-20 18:25:48,341 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ff6a515c-95a4-491a-94cc-70dbbab4bda8': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=ff6a515c-95a4-491a-94cc-70dbbab4bda8, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:25:48,424 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 10
2018-11-20 18:25:48,425 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:25:48,425 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:25:48,425 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:25:48,450 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:25:48,450 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@8e0379d
2018-11-20 18:25:48,451 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:25:48,452 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: close()...
2018-11-20 18:25:48,453 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:26:35,014 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:26:35,019 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:26:35,055 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:26:35,170 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:26:35,171 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:26:35,192 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:26:35,193 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:26:35,198 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:26:35,202 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:26:35,202 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:26:35,203 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:26:35,203 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:26:35,206 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:26:35,206 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:26:35,207 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:26:35,207 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:26:35,209 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:26:35,215 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:26:35,219 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:26:35,229 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:26:35,245 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:26:35,252 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:26:35,254 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:26:35,258 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:26:35,262 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:26:35,270 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:26:35,274 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:26:35,277 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:26:35,279 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:26:35,280 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:26:35,305 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.072s)
2018-11-20 18:26:35,310 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:26:35,321 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:26:35,322 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:26:35,328 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:26:35,328 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:26:35,346 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:26:35,348 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:26:35,810 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd53e8287-9d8c-4f08-bb6c-c5f7da37fe60': getConnection()...
2018-11-20 18:26:35,811 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd53e8287-9d8c-4f08-bb6c-c5f7da37fe60': init...
2018-11-20 18:26:35,812 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd53e8287-9d8c-4f08-bb6c-c5f7da37fe60': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=d53e8287-9d8c-4f08-bb6c-c5f7da37fe60, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:26:35,928 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:26:35,928 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:26:35,929 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:26:35,929 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:26:35,948 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:26:35,949 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@8e0379d
2018-11-20 18:26:35,951 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:26:35,951 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: close()...
2018-11-20 18:26:35,951 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:27:34,217 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:27:34,225 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:27:34,265 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:27:34,381 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:27:34,382 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:27:34,404 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:27:34,406 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:27:34,411 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:27:34,416 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:27:34,416 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:27:34,417 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:27:34,417 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:27:34,420 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:27:34,421 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:27:34,422 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:27:34,423 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:27:34,424 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:27:34,429 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:27:34,434 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:27:34,447 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:27:34,457 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:27:34,464 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:27:34,467 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:27:34,470 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:27:34,474 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:27:34,482 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:27:34,486 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:27:34,489 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:27:34,492 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:27:34,495 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:27:34,517 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.068s)
2018-11-20 18:27:34,520 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:27:34,531 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:27:34,532 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:27:34,536 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:27:34,536 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:27:34,556 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:27:34,557 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:27:35,031 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '2fe42acb-8142-45b0-9a4e-ae71805a8306': getConnection()...
2018-11-20 18:27:35,031 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '2fe42acb-8142-45b0-9a4e-ae71805a8306': init...
2018-11-20 18:27:35,032 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '2fe42acb-8142-45b0-9a4e-ae71805a8306': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=2fe42acb-8142-45b0-9a4e-ae71805a8306, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:27:35,122 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:27:35,122 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:27:35,123 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:27:35,123 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:27:35,140 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:27:35,140 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@8e0379d
2018-11-20 18:27:35,141 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:27:35,142 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: close()...
2018-11-20 18:27:35,143 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:27:41,470 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:27:41,475 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:27:41,518 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:27:41,637 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:27:41,637 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:27:41,666 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:27:41,667 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:27:41,672 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:27:41,676 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:27:41,677 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 18:27:41,677 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:27:41,678 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:27:41,681 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:27:41,681 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:27:41,684 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:27:41,684 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:27:41,686 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:27:41,692 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:27:41,701 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:27:41,715 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:27:41,726 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:27:41,735 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:27:41,739 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:27:41,744 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:27:41,750 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:27:41,768 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:27:41,772 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:27:41,775 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:27:41,777 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:27:41,778 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:27:41,798 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.081s)
2018-11-20 18:27:41,801 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:27:41,811 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:27:41,813 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:27:41,818 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-20 18:27:41,818 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:27:41,873 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:27:41,874 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:27:51,604 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'bc3bd0b7-5c73-4211-a7ba-ffd77333c41e': getConnection()...
2018-11-20 18:27:51,605 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bc3bd0b7-5c73-4211-a7ba-ffd77333c41e': init...
2018-11-20 18:27:51,605 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bc3bd0b7-5c73-4211-a7ba-ffd77333c41e': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=bc3bd0b7-5c73-4211-a7ba-ffd77333c41e, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:27:52,038 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:27:52,038 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:27:52,038 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:27:52,038 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:27:52,056 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:28:07,348 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@56dc1551
2018-11-20 18:28:27,589 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:28:27,590 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: close()...
2018-11-20 18:28:27,592 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:29:12,015 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:29:12,020 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:29:12,064 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:29:12,180 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:29:12,181 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:29:12,206 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:29:12,206 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:29:12,212 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:29:12,217 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:29:12,217 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 18:29:12,218 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:29:12,219 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:29:12,221 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:29:12,222 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:29:12,223 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:29:12,224 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:29:12,225 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:29:12,231 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:29:12,241 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:29:12,255 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:29:12,267 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:29:12,276 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:29:12,279 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:29:12,287 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:29:12,289 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:29:12,325 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:29:12,327 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:29:12,332 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:29:12,334 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:29:12,334 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:29:12,363 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.105s)
2018-11-20 18:29:12,371 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:29:12,393 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:29:12,394 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:29:12,402 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:29:12,402 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:29:12,467 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:29:12,469 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:29:23,910 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '9ccf969b-880a-48d6-8b94-35a39857d505': getConnection()...
2018-11-20 18:29:23,911 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '9ccf969b-880a-48d6-8b94-35a39857d505': init...
2018-11-20 18:29:23,911 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '9ccf969b-880a-48d6-8b94-35a39857d505': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=9ccf969b-880a-48d6-8b94-35a39857d505, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:29:24,056 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:29:24,057 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:29:24,057 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:29:24,057 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:29:24,078 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:29:28,951 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@56dc1551
2018-11-20 18:30:01,305 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:30:01,305 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: close()...
2018-11-20 18:30:01,308 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:30:12,779 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:30:12,785 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:30:12,827 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:30:12,943 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:30:12,943 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:30:12,967 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:30:12,968 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:30:12,972 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:30:12,977 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:30:12,977 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 18:30:12,978 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:30:12,978 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:30:12,981 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:30:12,982 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:30:12,983 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:30:12,983 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:30:12,986 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:30:12,991 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:30:12,998 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:30:13,010 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:30:13,025 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:30:13,033 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:30:13,035 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:30:13,039 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:30:13,041 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:30:13,070 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:30:13,071 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:30:13,076 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:30:13,078 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:30:13,079 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:30:13,103 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.086s)
2018-11-20 18:30:13,107 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:30:13,118 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:30:13,119 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:30:13,125 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:30:13,126 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:30:13,185 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:30:13,186 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:30:17,215 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '8aa37345-0cfa-4e5a-ba3b-1cbe49860d7c': getConnection()...
2018-11-20 18:30:17,216 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '8aa37345-0cfa-4e5a-ba3b-1cbe49860d7c': init...
2018-11-20 18:30:17,217 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '8aa37345-0cfa-4e5a-ba3b-1cbe49860d7c': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=8aa37345-0cfa-4e5a-ba3b-1cbe49860d7c, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:30:17,344 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:30:17,344 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:30:17,344 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:30:17,345 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:30:17,369 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:30:18,826 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@56dc1551
2018-11-20 18:30:41,129 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:30:41,130 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: close()...
2018-11-20 18:30:41,131 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:30:57,944 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:30:57,948 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:30:57,990 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:30:58,099 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:30:58,099 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:30:58,121 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:30:58,121 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:30:58,126 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:30:58,131 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:30:58,131 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:30:58,132 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:30:58,133 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:30:58,135 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:30:58,135 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:30:58,137 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:30:58,137 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:30:58,139 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:30:58,145 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:30:58,157 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:30:58,170 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:30:58,179 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:30:58,185 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:30:58,189 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:30:58,192 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:30:58,195 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:30:58,207 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:30:58,209 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:30:58,217 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:30:58,220 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:30:58,221 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:30:58,243 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.070s)
2018-11-20 18:30:58,248 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:30:58,259 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:30:58,259 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:30:58,266 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:30:58,266 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:30:58,287 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:30:58,288 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:30:58,752 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'c450b39c-620b-4085-be5b-15c351381ee2': getConnection()...
2018-11-20 18:30:58,752 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'c450b39c-620b-4085-be5b-15c351381ee2': init...
2018-11-20 18:30:58,752 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'c450b39c-620b-4085-be5b-15c351381ee2': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=c450b39c-620b-4085-be5b-15c351381ee2, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:30:58,837 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:30:58,837 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:30:58,837 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:30:58,837 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:30:58,853 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:30:58,854 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@8e0379d
2018-11-20 18:30:58,855 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:30:58,855 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: close()...
2018-11-20 18:30:58,856 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:31:03,956 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:31:03,961 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:31:04,003 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:31:04,120 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:31:04,121 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:31:04,145 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:31:04,146 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:31:04,152 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:31:04,158 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:31:04,158 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 18:31:04,159 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:31:04,160 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:31:04,164 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:31:04,164 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:31:04,166 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:31:04,166 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:31:04,168 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:31:04,173 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:31:04,180 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:31:04,193 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:31:04,204 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:31:04,210 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:31:04,212 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:31:04,216 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:31:04,220 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:31:04,230 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:31:04,247 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:31:04,253 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:31:04,255 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:31:04,256 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:31:04,273 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.078s)
2018-11-20 18:31:04,276 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:31:04,286 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:31:04,287 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:31:04,292 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:31:04,292 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:31:04,344 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:31:04,346 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:31:12,052 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '33560edf-370b-46bb-b76c-a56657930445': getConnection()...
2018-11-20 18:31:12,052 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '33560edf-370b-46bb-b76c-a56657930445': init...
2018-11-20 18:31:12,053 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '33560edf-370b-46bb-b76c-a56657930445': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=33560edf-370b-46bb-b76c-a56657930445, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:31:12,196 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:31:12,197 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:31:12,198 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:31:12,198 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:31:12,223 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:31:13,456 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@56dc1551
2018-11-20 18:31:23,796 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:31:23,796 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: close()...
2018-11-20 18:31:23,797 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[]
2018-11-20 18:32:07,264 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:32:07,270 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:32:07,315 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:32:07,445 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:32:07,446 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:32:07,467 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:32:07,468 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:32:07,473 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:32:07,478 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:32:07,479 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-20 18:32:07,480 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:32:07,480 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:32:07,482 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:32:07,483 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:32:07,484 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:32:07,485 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:32:07,486 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:32:07,491 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:32:07,496 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:32:07,507 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:32:07,520 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:32:07,530 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:32:07,532 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:32:07,536 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:32:07,538 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:32:07,549 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:32:07,551 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:32:07,554 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:32:07,556 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:32:07,556 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:32:07,579 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.069s)
2018-11-20 18:32:07,583 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:32:07,592 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:32:07,593 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:32:07,598 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:32:07,599 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:32:07,615 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:32:07,616 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:32:08,078 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'fbcbaaa2-2a53-4597-8ff3-52915f09dca4': getConnection()...
2018-11-20 18:32:08,078 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'fbcbaaa2-2a53-4597-8ff3-52915f09dca4': init...
2018-11-20 18:32:08,078 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'fbcbaaa2-2a53-4597-8ff3-52915f09dca4': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=fbcbaaa2-2a53-4597-8ff3-52915f09dca4, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:32:08,170 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 1 , pageSize = 2
2018-11-20 18:32:08,170 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:32:08,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:32:08,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:32:08,189 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:32:08,189 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@8e0379d
2018-11-20 18:32:08,191 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-20 18:32:08,192 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: close()...
2018-11-20 18:32:08,192 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[{code=IPAD MINI2, productId=497762af79a44fc9be81e1ed6cd0727b2, name=}]
2018-11-20 18:33:10,557 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-20 18:33:10,563 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:33:10,602 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-20 18:33:10,722 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-20 18:33:10,722 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-20 18:33:10,745 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-20 18:33:10,746 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-20 18:33:10,751 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-20 18:33:10,756 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-20 18:33:10,757 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-20 18:33:10,757 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-20 18:33:10,758 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-20 18:33:10,761 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-20 18:33:10,761 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-20 18:33:10,763 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-20 18:33:10,763 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-20 18:33:10,765 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-20 18:33:10,770 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-20 18:33:10,776 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-20 18:33:10,789 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-20 18:33:10,800 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-20 18:33:10,806 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-20 18:33:10,808 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-20 18:33:10,816 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-20 18:33:10,817 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-20 18:33:10,828 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-20 18:33:10,830 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-20 18:33:10,841 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-20 18:33:10,843 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-20 18:33:10,844 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-20 18:33:10,874 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.081s)
2018-11-20 18:33:10,879 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-20 18:33:10,892 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-20 18:33:10,893 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-20 18:33:10,899 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-20 18:33:10,900 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-20 18:33:10,958 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-20 18:33:10,959 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-20 18:33:14,440 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '649d85dc-4919-48a7-8225-ec858c967196': getConnection()...
2018-11-20 18:33:14,443 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '649d85dc-4919-48a7-8225-ec858c967196': init...
2018-11-20 18:33:14,443 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '649d85dc-4919-48a7-8225-ec858c967196': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=649d85dc-4919-48a7-8225-ec858c967196, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-20 18:33:14,604 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) DEBUG --> listall startRow = 0 , pageSize = 10
2018-11-20 18:33:14,604 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:33:14,604 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:33:14,605 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-20 18:33:14,633 com.csft.product.dao.ProductDao [main] (ProductDao.java:125) DEBUG --> listall hasRes true
2018-11-20 18:33:14,634 com.csft.product.dao.ProductDao [main] (ProductDao.java:128) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@56dc1551
2018-11-20 18:33:14,636 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: WARNING: transaction manager not running?
2018-11-20 18:33:14,637 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ebea008: close()...
2018-11-20 18:33:14,637 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[{code=IPAD MINI2, productId=497762af79a44fc9be81e1ed6cd0727b, name=}, {code=IPAD MINI2, productId=497762af79a44fc9be81e1ed6cd0727b2, name=}]
2018-11-21 11:08:45,721 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:08:45,730 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:08:45,780 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:08:45,911 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:08:45,911 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:08:45,932 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:08:45,932 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:08:45,937 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:08:45,941 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:08:45,942 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:08:45,942 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:08:45,943 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:08:45,945 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:08:45,945 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:08:45,947 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:08:45,947 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:08:45,949 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:08:45,949 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:08:45,954 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:08:45,958 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:08:45,972 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:08:45,987 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:08:45,997 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:08:45,999 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:08:46,004 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:08:46,007 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:08:46,018 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:08:46,019 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:08:46,042 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:08:46,053 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:08:46,056 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:08:46,067 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255)
     OUT V_OUT int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
   	DELETE FROM product WHERE id=v_productId
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:08:46,069 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:08:46,070 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:08:46,070 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:08:46,088 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.113s)
2018-11-21 11:08:46,092 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:08:46,102 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-21 11:08:46,105 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.2 - product delete procedures
2018-11-21 11:08:46,111 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:08:46,116 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:08:46,116 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:08:46,117 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255)
     OUT V_OUT int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
   	DELETE FROM product WHERE id=v_productId
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:08:46,119 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-21 11:08:46,121 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-21 11:08:46,122 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.2 - product delete procedures failed! Please restore backups and roll back database and code!
2018-11-21 11:08:46,127 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:08:46,136 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:08:46,223 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:08:46,229 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 11:08:46,235 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:08:46,262 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:08:46,263 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:08:46,847 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'f9bccef1-4de0-4040-b712-668d8a563b16': getConnection()...
2018-11-21 11:08:46,847 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f9bccef1-4de0-4040-b712-668d8a563b16': init...
2018-11-21 11:08:46,847 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f9bccef1-4de0-4040-b712-668d8a563b16': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=f9bccef1-4de0-4040-b712-668d8a563b16, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:08:46,945 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:08:46,945 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: WARNING: transaction manager not running?
2018-11-21 11:08:46,946 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: WARNING: transaction manager not running?
2018-11-21 11:08:46,946 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:08:46,992 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=418) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:08:46,992 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:08:46,993 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: WARNING: transaction manager not running?
2018-11-21 11:08:46,993 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: close()...
2018-11-21 11:09:30,553 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:09:30,557 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:09:30,590 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:09:30,706 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:09:30,707 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:09:30,726 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:09:30,727 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:09:30,731 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:09:30,735 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:09:30,736 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:09:30,736 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:09:30,737 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:09:30,739 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:09:30,739 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:09:30,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:09:30,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:09:30,743 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:09:30,743 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:09:30,747 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:09:30,752 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:09:30,763 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:09:30,777 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:09:30,784 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:09:30,787 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:09:30,793 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:09:30,795 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:09:30,803 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:09:30,805 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:09:30,810 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:09:30,813 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:09:30,815 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:09:30,818 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255)
     OUT V_OUT int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
   	DELETE FROM product WHERE id=v_productId
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:09:30,825 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:09:30,826 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:09:30,826 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:09:30,864 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:09:30,867 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:09:30,888 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:09:30,889 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:09:31,342 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '387264ac-2015-42c9-91d7-367187532f1e': getConnection()...
2018-11-21 11:09:31,342 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '387264ac-2015-42c9-91d7-367187532f1e': init...
2018-11-21 11:09:31,343 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '387264ac-2015-42c9-91d7-367187532f1e': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=387264ac-2015-42c9-91d7-367187532f1e, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:09:31,427 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:09:31,427 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:09:31,427 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:09:31,427 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?)})...
2018-11-21 11:09:31,440 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}No parameter with index 2
2018-11-21 11:09:31,441 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:09:31,441 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:09:31,441 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:10:10,697 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:10:10,702 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:10:10,737 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:10:10,842 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:10:10,842 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:10:10,862 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:10:10,862 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:10:10,866 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:10:10,871 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:10:10,871 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:10:10,872 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:10:10,872 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:10:10,874 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:10:10,875 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:10:10,876 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:10:10,877 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:10:10,878 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:10:10,878 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:10:10,882 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:10:10,887 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:10:10,897 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:10:10,911 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:10:10,919 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:10:10,921 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:10:10,925 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:10:10,927 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:10:10,936 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:10:10,938 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:10:10,947 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:10:10,949 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:10:10,951 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:10:10,968 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255)
     OUT V_OUT int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
   	DELETE FROM product WHERE id=v_productId
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:10:10,974 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:10:10,974 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:10:10,975 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:10:11,004 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:10:11,006 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:10:11,032 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:10:11,034 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:10:11,495 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '519f38f0-e459-4015-8e6e-3f2e493a5311': getConnection()...
2018-11-21 11:10:11,496 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '519f38f0-e459-4015-8e6e-3f2e493a5311': init...
2018-11-21 11:10:11,496 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '519f38f0-e459-4015-8e6e-3f2e493a5311': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=519f38f0-e459-4015-8e6e-3f2e493a5311, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:10:11,580 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:10:11,580 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:10:11,581 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:10:11,581 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:10:11,598 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=430) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:10:11,598 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:10:11,598 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:10:11,599 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:11:22,663 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:11:22,667 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:11:22,699 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:11:22,810 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:11:22,810 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:11:22,829 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:11:22,829 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:11:22,834 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:11:22,838 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:11:22,838 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:11:22,839 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:11:22,840 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:11:22,843 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:11:22,843 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:11:22,845 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:11:22,845 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:11:22,846 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:11:22,847 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:11:22,851 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:11:22,855 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:11:22,866 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:11:22,877 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:11:22,884 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:11:22,887 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:11:22,891 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:11:22,893 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:11:22,903 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:11:22,904 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:11:22,907 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:11:22,910 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:11:22,913 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:11:22,917 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255)
     OUT V_OUT int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
   	DELETE FROM product WHERE id=v_productId
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:11:22,919 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:11:22,920 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:11:22,920 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:11:22,946 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:11:22,949 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:11:22,972 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:11:22,973 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:11:23,417 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '9423a79f-e9b5-4ea6-ae5d-7662aa165744': getConnection()...
2018-11-21 11:11:23,417 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '9423a79f-e9b5-4ea6-ae5d-7662aa165744': init...
2018-11-21 11:11:23,417 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '9423a79f-e9b5-4ea6-ae5d-7662aa165744': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=9423a79f-e9b5-4ea6-ae5d-7662aa165744, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:11:23,498 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:11:23,499 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:11:23,499 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:11:23,499 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:11:23,515 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=437) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:11:23,515 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:11:23,515 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:11:23,515 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:12:47,114 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:12:47,119 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:12:47,155 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:12:47,258 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:12:47,259 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:12:47,281 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:12:47,281 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:12:47,285 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:12:47,289 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:12:47,290 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:12:47,291 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:12:47,291 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:12:47,294 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:12:47,294 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:12:47,296 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:12:47,296 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:12:47,298 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:12:47,299 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:12:47,303 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:12:47,307 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:12:47,318 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:12:47,332 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:12:47,337 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:12:47,340 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:12:47,343 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:12:47,345 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:12:47,356 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:12:47,357 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:12:47,362 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:12:47,364 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:12:47,366 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:12:47,377 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
   	DELETE FROM product WHERE id=v_productId
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:12:47,382 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:12:47,383 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:12:47,383 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:12:47,405 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:12:47,407 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:12:47,424 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:12:47,425 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:12:47,897 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '521515e6-89ae-4201-9350-d935af5dccbd': getConnection()...
2018-11-21 11:12:47,897 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '521515e6-89ae-4201-9350-d935af5dccbd': init...
2018-11-21 11:12:47,897 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '521515e6-89ae-4201-9350-d935af5dccbd': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=521515e6-89ae-4201-9350-d935af5dccbd, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:12:47,982 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:12:47,983 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:12:47,983 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:12:47,983 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:12:48,000 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=443) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:12:48,000 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:12:48,001 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:12:48,001 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:14:24,386 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:14:24,391 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:14:24,420 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:14:24,528 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:14:24,528 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:14:24,549 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:14:24,549 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:14:24,554 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:14:24,558 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:14:24,559 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:14:24,559 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:14:24,560 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:14:24,562 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:14:24,562 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:14:24,564 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:14:24,564 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:14:24,565 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:14:24,566 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:14:24,570 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:14:24,574 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:14:24,585 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:14:24,597 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:14:24,604 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:14:24,607 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:14:24,611 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:14:24,613 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:14:24,643 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:14:24,647 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:14:24,662 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:14:24,666 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:14:24,668 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:14:24,674 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:14:24,676 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:14:24,676 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:14:24,677 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:14:24,695 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:14:24,697 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:14:24,721 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:14:24,722 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:14:25,246 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd08d4a0f-31a7-4fed-9b57-38ca664042d0': getConnection()...
2018-11-21 11:14:25,247 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd08d4a0f-31a7-4fed-9b57-38ca664042d0': init...
2018-11-21 11:14:25,247 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd08d4a0f-31a7-4fed-9b57-38ca664042d0': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=d08d4a0f-31a7-4fed-9b57-38ca664042d0, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:14:25,353 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:14:25,354 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:14:25,355 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:14:25,356 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:14:25,374 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=452) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:14:25,375 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:14:25,375 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:14:25,375 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:15:17,157 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:15:17,162 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:15:17,202 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:15:17,310 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:15:17,311 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:15:17,331 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:15:17,332 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:15:17,336 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:15:17,340 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:15:17,340 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:15:17,341 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:15:17,342 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:15:17,344 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:15:17,345 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:15:17,346 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:15:17,347 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:15:17,348 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:15:17,348 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:15:17,352 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:15:17,357 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:15:17,368 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:15:17,383 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:15:17,390 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:15:17,393 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:15:17,397 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:15:17,399 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:15:17,407 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:15:17,410 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:15:17,412 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:15:17,417 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:15:17,419 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:15:17,422 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:15:17,423 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:15:17,424 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:15:17,425 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:15:17,443 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:15:17,446 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:15:17,468 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:15:17,469 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:15:17,909 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '862a70ab-0fcc-4622-b9d9-16bf7efb119f': getConnection()...
2018-11-21 11:15:17,909 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '862a70ab-0fcc-4622-b9d9-16bf7efb119f': init...
2018-11-21 11:15:17,909 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '862a70ab-0fcc-4622-b9d9-16bf7efb119f': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=862a70ab-0fcc-4622-b9d9-16bf7efb119f, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:15:17,992 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:15:17,992 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:15:17,992 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:15:17,993 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:15:18,009 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=462) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:15:18,010 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:15:18,011 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:15:18,012 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:15:50,083 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:15:50,087 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:15:50,122 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:15:50,224 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:15:50,225 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:15:50,244 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:15:50,245 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:15:50,249 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:15:50,253 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:15:50,253 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:15:50,254 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:15:50,254 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:15:50,256 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:15:50,257 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:15:50,258 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:15:50,259 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:15:50,261 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_delete_procedures.sql
2018-11-21 11:15:50,261 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:15:50,266 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:15:50,270 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:15:50,280 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:15:50,289 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:15:50,294 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:15:50,297 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:15:50,301 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:15:50,303 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:15:50,312 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:15:50,314 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:15:50,317 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:15:50,319 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_delete_procedures.sql ...
2018-11-21 11:15:50,321 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:15:50,327 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:15:50,329 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:15:50,330 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:15:50,330 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_delete_procedures.sql (filename: V1_0_2__product_delete_procedures.sql)
2018-11-21 11:15:50,369 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:15:50,372 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:15:50,389 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:15:50,390 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:15:50,840 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '5d6541ad-f7af-4558-8d62-278c0a18578e': getConnection()...
2018-11-21 11:15:50,840 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '5d6541ad-f7af-4558-8d62-278c0a18578e': init...
2018-11-21 11:15:50,841 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '5d6541ad-f7af-4558-8d62-278c0a18578e': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=5d6541ad-f7af-4558-8d62-278c0a18578e, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:15:50,932 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:15:50,932 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:15:50,933 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:15:50,933 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:15:50,950 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=468) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:15:50,950 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:15:50,951 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:15:50,951 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:17:47,910 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:17:47,915 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:17:47,943 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:17:48,050 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:17:48,050 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:17:48,074 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:17:48,075 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:17:48,079 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:17:48,083 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:17:48,083 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:17:48,084 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:17:48,085 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:17:48,087 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:17:48,087 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:17:48,089 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:17:48,089 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:17:48,091 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_3__product_delete_procedures.sql
2018-11-21 11:17:48,091 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:17:48,095 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:17:48,099 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:17:48,109 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:17:48,116 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:17:48,121 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:17:48,124 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:17:48,127 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:17:48,129 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:17:48,136 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:17:48,138 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:17:48,141 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:17:48,143 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_3__product_delete_procedures.sql ...
2018-11-21 11:17:48,145 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:17:48,148 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:17:48,150 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:17:48,151 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:17:48,151 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_3__product_delete_procedures.sql (filename: V1_0_3__product_delete_procedures.sql)
2018-11-21 11:17:48,183 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:17:48,185 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:17:48,205 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:17:48,206 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:17:48,651 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '0f0bb4c4-17ea-4052-a7af-f0be100a77fd': getConnection()...
2018-11-21 11:17:48,651 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0f0bb4c4-17ea-4052-a7af-f0be100a77fd': init...
2018-11-21 11:17:48,652 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0f0bb4c4-17ea-4052-a7af-f0be100a77fd': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=0f0bb4c4-17ea-4052-a7af-f0be100a77fd, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:17:48,734 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:17:48,735 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:17:48,735 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:17:48,735 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:17:48,751 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=475) PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist
2018-11-21 11:17:48,752 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:17:48,752 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:17:48,752 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:18:11,529 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:18:11,533 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:18:11,564 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:18:11,666 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:18:11,666 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:18:11,686 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:18:11,687 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:18:11,691 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:18:11,695 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:18:11,695 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:18:11,696 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:18:11,697 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:18:11,699 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:18:11,699 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:18:11,701 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:18:11,701 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:18:11,702 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_3__product_delete_procedures.sql
2018-11-21 11:18:11,702 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:18:11,706 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:18:11,711 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:18:11,720 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:18:11,736 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:18:11,744 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:18:11,747 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:18:11,750 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:18:11,751 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:18:11,759 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:18:11,761 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:18:11,764 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:18:11,768 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_3__product_delete_procedures.sql ...
2018-11-21 11:18:11,771 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:18:11,774 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:18:11,779 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:18:11,779 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:18:11,779 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_3__product_delete_procedures.sql (filename: V1_0_3__product_delete_procedures.sql)
2018-11-21 11:18:11,801 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.079s)
2018-11-21 11:18:11,805 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:18:11,816 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-21 11:18:11,819 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.3 - product delete procedures
2018-11-21 11:18:11,823 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:18:11,827 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:18:11,827 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:18:11,827 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:18:11,829 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:18:11,829 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.3 - product delete procedures
2018-11-21 11:18:11,831 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:18:11,832 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:18:11,834 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:18:11,841 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 1 migration to schema `productdb` (execution time 00:00.030s)
2018-11-21 11:18:11,844 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:18:11,844 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:18:11,861 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:18:11,862 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:18:12,307 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:18:12,309 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'a736f006-8a5c-4f88-9a52-2a49d181d62c': getConnection()...
2018-11-21 11:18:12,309 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a736f006-8a5c-4f88-9a52-2a49d181d62c': init...
2018-11-21 11:18:12,310 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a736f006-8a5c-4f88-9a52-2a49d181d62c': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=a736f006-8a5c-4f88-9a52-2a49d181d62c, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:18:12,399 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@4de5031f
2018-11-21 11:18:12,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,400 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:18:12,415 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,415 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: close()...
2018-11-21 11:18:12,416 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:18:12,436 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:18:12,436 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:18:12,440 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:18:12,441 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:18:12,442 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:18:12,442 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:18:12,443 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:18:12,444 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:18:12,444 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:18:12,445 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:18:12,445 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:18:12,446 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:18:12,446 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:18:12,447 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:18:12,447 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:18:12,448 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_3__product_delete_procedures.sql
2018-11-21 11:18:12,448 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:18:12,448 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:18:12,448 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:18:12,451 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:18:12,453 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:18:12,456 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:18:12,458 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:18:12,460 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:18:12,462 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:18:12,467 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:18:12,468 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:18:12,473 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:18:12,476 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_3__product_delete_procedures.sql ...
2018-11-21 11:18:12,477 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:18:12,478 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:18:12,479 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:18:12,481 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:18:12,482 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_3__product_delete_procedures.sql (filename: V1_0_3__product_delete_procedures.sql)
2018-11-21 11:18:12,487 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.035s)
2018-11-21 11:18:12,488 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:18:12,493 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.3
2018-11-21 11:18:12,494 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:18:12,496 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 11 of 180M
2018-11-21 11:18:12,496 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-21 11:18:12,497 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:18:12,498 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd8be69ec-d8f9-487c-bc2d-9a59ef796d64': getConnection()...
2018-11-21 11:18:12,498 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd8be69ec-d8f9-487c-bc2d-9a59ef796d64': init...
2018-11-21 11:18:12,499 com.csft.product.dao.ProductDao [main] (ProductDao.java:169) DEBUG --> listall startRow = 0 , pageSize = 10
2018-11-21 11:18:12,499 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,499 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,499 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-21 11:18:12,504 com.csft.product.dao.ProductDao [main] (ProductDao.java:175) DEBUG --> listall hasRes true
2018-11-21 11:18:12,505 com.csft.product.dao.ProductDao [main] (ProductDao.java:178) DEBUG --> listall result org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet@25a65b77
2018-11-21 11:18:12,506 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,507 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: close()...
2018-11-21 11:18:12,507 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result[{code=IPAD MINI2, productId=497762af79a44fc9be81e1ed6cd0727b, name=}, {code=IPAD MINI2, productId=497762af79a44fc9be81e1ed6cd0727b2, name=}, {code=IPAD MINI2, productId=a1c573a89ca4440cbdf3b04b1f4ad09b, name=}]
2018-11-21 11:18:12,509 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:18:12,509 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:18:12,513 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:18:12,513 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:18:12,514 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:18:12,514 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:18:12,515 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:18:12,515 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:18:12,516 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:18:12,516 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:18:12,517 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:18:12,517 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:18:12,518 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:18:12,519 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:18:12,519 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:18:12,519 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_3__product_delete_procedures.sql
2018-11-21 11:18:12,520 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:18:12,520 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:18:12,521 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:18:12,523 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:18:12,524 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:18:12,525 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:18:12,526 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:18:12,527 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:18:12,527 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:18:12,529 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:18:12,530 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:18:12,530 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:18:12,532 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_3__product_delete_procedures.sql ...
2018-11-21 11:18:12,533 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:18:12,534 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE id=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:18:12,535 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:18:12,535 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:18:12,535 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_3__product_delete_procedures.sql (filename: V1_0_3__product_delete_procedures.sql)
2018-11-21 11:18:12,539 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.015s)
2018-11-21 11:18:12,540 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:18:12,545 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.3
2018-11-21 11:18:12,545 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:18:12,547 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 13 of 180M
2018-11-21 11:18:12,547 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:18:12,548 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:18:12,549 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '2e6ca0c4-09dd-4692-9186-f875f8df6756': getConnection()...
2018-11-21 11:18:12,549 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '2e6ca0c4-09dd-4692-9186-f875f8df6756': init...
2018-11-21 11:18:12,550 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:18:12,550 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,551 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,551 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:18:12,557 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=481) Unknown column 'id' in 'where clause'
2018-11-21 11:18:12,557 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:18:12,558 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: WARNING: transaction manager not running?
2018-11-21 11:18:12,558 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@67e2d983: close()...
2018-11-21 11:19:26,160 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:19:26,165 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:19:26,207 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:19:26,309 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:19:26,309 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:19:26,327 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:19:26,327 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:19:26,332 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:19:26,335 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:19:26,336 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:19:26,336 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:19:26,337 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:19:26,339 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:19:26,339 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:19:26,341 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:19:26,341 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:19:26,343 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:19:26,343 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:19:26,347 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:19:26,351 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:19:26,361 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:19:26,371 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:19:26,378 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:19:26,381 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:19:26,385 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:19:26,387 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:19:26,396 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:19:26,399 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:19:26,402 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:19:26,404 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:19:26,406 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:19:26,408 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:19:26,412 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:19:26,412 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:19:26,413 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:19:26,453 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:19:26,456 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:19:26,474 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:19:26,475 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:19:26,949 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'f4313b4c-0779-4093-8262-b253684d4df9': getConnection()...
2018-11-21 11:19:26,949 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f4313b4c-0779-4093-8262-b253684d4df9': init...
2018-11-21 11:19:26,950 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f4313b4c-0779-4093-8262-b253684d4df9': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=f4313b4c-0779-4093-8262-b253684d4df9, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:19:27,030 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:19:27,031 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:19:27,031 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:19:27,031 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:19:27,047 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}(conn=490) Unknown column 'id' in 'where clause'
2018-11-21 11:19:27,048 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:19:27,048 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: WARNING: transaction manager not running?
2018-11-21 11:19:27,048 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@448ff1a8: close()...
2018-11-21 11:19:45,418 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:19:45,423 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:19:45,456 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:19:45,559 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:19:45,559 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:19:45,582 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:19:45,583 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:19:45,587 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:19:45,591 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:19:45,591 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:19:45,592 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:19:45,593 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:19:45,595 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:19:45,595 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:19:45,597 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:19:45,597 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:19:45,598 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:19:45,599 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:19:45,603 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:19:45,607 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:19:45,619 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:19:45,629 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:19:45,634 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:19:45,639 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:19:45,642 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:19:45,645 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:19:45,653 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:19:45,655 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:19:45,658 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:19:45,662 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:19:45,664 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:19:45,669 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:19:45,674 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:19:45,674 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:19:45,674 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:19:45,712 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.090s)
2018-11-21 11:19:45,715 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:19:45,724 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-21 11:19:45,726 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.4 - product delete procedures
2018-11-21 11:19:45,729 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:19:45,732 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:19:45,733 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:19:45,739 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:19:45,739 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.4 - product delete procedures
2018-11-21 11:19:45,741 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:19:45,742 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:19:45,744 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:19:45,750 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 1 migration to schema `productdb` (execution time 00:00.031s)
2018-11-21 11:19:45,753 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:19:45,754 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:19:45,775 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:19:45,776 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:19:46,234 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'ba443b53-dbaa-44bf-9a77-fe27921dbe8e': getConnection()...
2018-11-21 11:19:46,234 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ba443b53-dbaa-44bf-9a77-fe27921dbe8e': init...
2018-11-21 11:19:46,235 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ba443b53-dbaa-44bf-9a77-fe27921dbe8e': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=ba443b53-dbaa-44bf-9a77-fe27921dbe8e, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:19:46,317 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:19:46,317 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3bbc39f8: WARNING: transaction manager not running?
2018-11-21 11:19:46,318 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3bbc39f8: WARNING: transaction manager not running?
2018-11-21 11:19:46,318 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3bbc39f8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:19:46,337 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{msg=Success delete, resultCode=200}
2018-11-21 11:19:46,337 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3bbc39f8: WARNING: transaction manager not running?
2018-11-21 11:19:46,337 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3bbc39f8: close()...
2018-11-21 11:20:30,469 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:20:30,473 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:20:30,506 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:20:30,605 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:20:30,605 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:20:30,629 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:20:30,629 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:20:30,633 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:20:30,638 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:20:30,638 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:20:30,638 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:20:30,639 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:20:30,641 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:20:30,641 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:20:30,643 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:20:30,643 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:20:30,645 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:20:30,645 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:20:30,649 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:20:30,654 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:20:30,663 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:20:30,677 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:20:30,683 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:20:30,687 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:20:30,691 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:20:30,693 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:20:30,701 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:20:30,704 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:20:30,708 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:20:30,710 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:20:30,712 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:20:30,723 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:20:30,729 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:20:30,729 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:20:30,729 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:20:30,746 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.080s)
2018-11-21 11:20:30,748 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:20:30,757 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:20:30,757 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:20:30,762 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:20:30,762 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:20:30,777 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:20:30,778 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:20:31,219 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '37bf83c5-c84f-42e2-9e61-90878db45cae': getConnection()...
2018-11-21 11:20:31,219 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '37bf83c5-c84f-42e2-9e61-90878db45cae': init...
2018-11-21 11:20:31,219 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '37bf83c5-c84f-42e2-9e61-90878db45cae': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=37bf83c5-c84f-42e2-9e61-90878db45cae, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:20:31,298 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:20:31,299 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:20:31,299 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:20:31,299 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:20:31,315 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}Fail to product 497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:20:31,315 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:20:31,316 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:20:31,316 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: close()...
2018-11-21 11:21:10,617 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:21:10,621 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:21:10,661 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:21:10,760 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:21:10,760 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:21:10,780 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:21:10,781 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:21:10,785 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:21:10,788 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:21:10,789 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:21:10,789 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:21:10,790 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:21:10,792 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:21:10,792 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:21:10,794 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:21:10,794 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:21:10,796 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:21:10,796 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:21:10,800 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:21:10,804 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:21:10,814 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:21:10,825 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:21:10,831 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:21:10,833 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:21:10,837 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:21:10,843 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:21:10,850 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:21:10,851 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:21:10,860 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:21:10,864 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:21:10,866 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:21:10,868 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:21:10,871 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:21:10,872 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:21:10,872 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:21:10,905 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.088s)
2018-11-21 11:21:10,908 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:21:10,917 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:21:10,918 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:21:10,922 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:21:10,922 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:21:10,937 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:21:10,938 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:21:11,377 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'b66bf87d-6054-4a00-be1a-7e3d3b955b7a': getConnection()...
2018-11-21 11:21:11,378 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b66bf87d-6054-4a00-be1a-7e3d3b955b7a': init...
2018-11-21 11:21:11,378 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b66bf87d-6054-4a00-be1a-7e3d3b955b7a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=b66bf87d-6054-4a00-be1a-7e3d3b955b7a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:21:11,467 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:21:11,467 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:21:11,467 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:21:11,467 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:21:11,482 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{msg=Success delete, resultCode=200}
2018-11-21 11:21:11,482 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:21:11,483 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: close()...
2018-11-21 11:22:17,406 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:22:17,411 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:22:17,455 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:22:17,565 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:22:17,565 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:22:17,586 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:22:17,587 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:22:17,591 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:22:17,596 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:22:17,596 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-21 11:22:17,597 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:22:17,598 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:22:17,600 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:22:17,600 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:22:17,602 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:22:17,602 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:22:17,604 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:22:17,604 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:22:17,610 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:22:17,615 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:22:17,627 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:22:17,638 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:22:17,646 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:22:17,649 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:22:17,654 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:22:17,656 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:22:17,675 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:22:17,684 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:22:17,697 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:22:17,699 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:22:17,700 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:22:17,706 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:22:17,708 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:22:17,709 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:22:17,709 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:22:17,725 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.096s)
2018-11-21 11:22:17,728 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:22:17,736 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:22:17,737 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:22:17,741 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:22:17,741 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:22:17,796 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:22:17,797 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:22:21,584 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '7767b08c-ec98-4bc3-93c1-824af0d640d8': getConnection()...
2018-11-21 11:22:21,585 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7767b08c-ec98-4bc3-93c1-824af0d640d8': init...
2018-11-21 11:22:21,586 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7767b08c-ec98-4bc3-93c1-824af0d640d8': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=7767b08c-ec98-4bc3-93c1-824af0d640d8, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:22:21,799 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b
2018-11-21 11:22:24,875 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-21 11:22:24,876 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-21 11:22:24,878 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:22:52,667 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{msg=Success delete, resultCode=200}
2018-11-21 11:22:56,662 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-21 11:22:56,663 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: close()...
2018-11-21 11:24:19,830 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:24:19,835 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:24:19,871 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:24:19,974 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:24:19,974 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:24:19,998 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:24:19,998 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:24:20,003 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:24:20,007 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:24:20,007 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:24:20,008 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:24:20,009 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:24:20,011 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:24:20,011 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:24:20,013 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:24:20,013 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:24:20,015 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:24:20,015 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:24:20,019 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:24:20,023 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:24:20,035 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:24:20,045 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:24:20,050 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:24:20,052 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:24:20,056 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:24:20,058 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:24:20,066 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:24:20,067 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:24:20,070 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:24:20,073 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:24:20,075 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:24:20,079 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:24:20,081 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:24:20,081 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:24:20,081 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:24:20,106 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.068s)
2018-11-21 11:24:20,109 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:24:20,123 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:24:20,124 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:24:20,129 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:24:20,129 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:24:20,145 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:24:20,146 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:24:20,605 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'f5115dc8-6042-4699-94ef-99aafa877e04': getConnection()...
2018-11-21 11:24:20,605 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f5115dc8-6042-4699-94ef-99aafa877e04': init...
2018-11-21 11:24:20,605 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f5115dc8-6042-4699-94ef-99aafa877e04': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=f5115dc8-6042-4699-94ef-99aafa877e04, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:24:20,685 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=497762af79a44fc9be81e1ed6cd0727b2
2018-11-21 11:24:20,686 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:24:20,686 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:24:20,686 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:24:20,705 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{msg=Success delete, resultCode=200}
2018-11-21 11:24:20,705 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:24:20,705 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: close()...
2018-11-21 11:24:48,195 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:24:48,200 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:24:48,238 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:24:48,350 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:24:48,350 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:24:48,372 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:24:48,373 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:24:48,378 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:24:48,382 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:24:48,383 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-21 11:24:48,383 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:24:48,384 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:24:48,387 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:24:48,387 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:24:48,389 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:24:48,390 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:24:48,392 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:24:48,392 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:24:48,397 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:24:48,404 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:24:48,417 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:24:48,428 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:24:48,434 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:24:48,437 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:24:48,443 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:24:48,445 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:24:48,454 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:24:48,456 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:24:48,467 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:24:48,471 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:24:48,474 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:24:48,478 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:24:48,479 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:24:48,480 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:24:48,480 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:24:48,507 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.087s)
2018-11-21 11:24:48,510 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:24:48,520 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:24:48,521 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:24:48,525 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:24:48,526 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:24:48,596 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:24:48,597 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:24:54,689 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'f404bc51-2c05-445b-bb7d-229a0f8fe08e': getConnection()...
2018-11-21 11:24:54,690 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f404bc51-2c05-445b-bb7d-229a0f8fe08e': init...
2018-11-21 11:24:54,690 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f404bc51-2c05-445b-bb7d-229a0f8fe08e': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=f404bc51-2c05-445b-bb7d-229a0f8fe08e, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:24:54,817 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=a1c573a89ca4440cbdf3b04b1f4ad09b
2018-11-21 11:24:57,788 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-21 11:24:57,790 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-21 11:24:57,792 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:25:10,788 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'f404bc51-2c05-445b-bb7d-229a0f8fe08e': getConnection()...
2018-11-21 11:25:10,789 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'f404bc51-2c05-445b-bb7d-229a0f8fe08e': init...
2018-11-21 11:25:10,791 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=a1c573a89ca4440cbdf3b04b1f4ad09b
2018-11-21 11:25:11,616 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@34b9f960: WARNING: transaction manager not running?
2018-11-21 11:25:11,617 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@34b9f960: WARNING: transaction manager not running?
2018-11-21 11:25:11,618 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@34b9f960: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:25:11,630 com.csft.product.dao.ProductDao [main] (ProductDao.java:131) ERROR --> local sql error :{}Fail to product a1c573a89ca4440cbdf3b04b1f4ad09b
2018-11-21 11:25:11,630 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:25:11,631 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@34b9f960: WARNING: transaction manager not running?
2018-11-21 11:25:11,631 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@34b9f960: close()...
2018-11-21 11:25:37,877 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:25:37,882 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:25:37,920 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:25:38,025 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:25:38,025 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:25:38,045 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:25:38,045 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:25:38,049 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:25:38,053 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:25:38,053 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:25:38,054 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:25:38,054 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:25:38,056 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:25:38,056 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:25:38,058 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:25:38,058 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:25:38,059 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:25:38,060 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:25:38,064 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:25:38,068 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:25:38,077 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:25:38,085 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:25:38,092 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:25:38,094 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:25:38,098 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:25:38,100 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:25:38,107 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:25:38,109 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:25:38,112 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:25:38,115 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:25:38,117 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:25:38,120 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:25:38,122 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:25:38,123 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:25:38,123 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:25:38,154 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.074s)
2018-11-21 11:25:38,157 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:25:38,166 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:25:38,166 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:25:38,170 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:25:38,170 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:25:38,193 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:25:38,194 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:25:38,634 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:25:38,637 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '2fd8f016-9916-45b6-97d7-ac10b1034de3': getConnection()...
2018-11-21 11:25:38,637 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '2fd8f016-9916-45b6-97d7-ac10b1034de3': init...
2018-11-21 11:25:38,638 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '2fd8f016-9916-45b6-97d7-ac10b1034de3': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=2fd8f016-9916-45b6-97d7-ac10b1034de3, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:25:38,765 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 11:25:38,766 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 11:25:38,766 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 11:25:38,766 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:25:38,784 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 11:25:38,785 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: close()...
2018-11-21 11:25:38,786 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:26:00,052 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:26:00,056 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:26:00,096 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:26:00,206 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:26:00,206 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:26:00,227 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:26:00,227 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:26:00,232 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:26:00,236 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:26:00,237 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:26:00,237 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:26:00,238 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:26:00,240 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:26:00,240 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:26:00,242 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:26:00,242 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:26:00,244 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:26:00,245 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:26:00,249 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:26:00,253 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:26:00,263 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:26:00,272 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:26:00,277 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:26:00,281 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:26:00,284 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:26:00,288 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:26:00,305 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:26:00,309 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:26:00,313 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:26:00,315 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:26:00,317 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:26:00,322 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:26:00,324 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:26:00,325 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:26:00,325 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:26:00,363 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.098s)
2018-11-21 11:26:00,366 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:26:00,377 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:26:00,377 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:26:00,382 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:26:00,382 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:26:00,398 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:26:00,399 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:26:00,831 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'aed217c7-9bd9-4f20-87c1-4fd490f54d38': getConnection()...
2018-11-21 11:26:00,831 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'aed217c7-9bd9-4f20-87c1-4fd490f54d38': init...
2018-11-21 11:26:00,832 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'aed217c7-9bd9-4f20-87c1-4fd490f54d38': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=aed217c7-9bd9-4f20-87c1-4fd490f54d38, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:26:00,917 com.csft.product.dao.ProductDao [main] (ProductDao.java:113) DEBUG --> delete product where id=828c4409bdc4481583618ac67532d304
2018-11-21 11:26:00,917 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:26:00,917 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:26:00,917 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:26:00,943 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{msg=Success delete, resultCode=200}
2018-11-21 11:26:00,944 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 11:26:00,944 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: close()...
2018-11-21 11:26:12,766 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:26:12,770 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:26:12,798 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:26:12,916 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:26:12,917 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:26:12,937 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:26:12,938 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:26:12,942 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:26:12,946 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:26:12,946 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:26:12,947 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:26:12,948 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:26:12,950 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:26:12,950 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:26:12,952 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:26:12,952 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:26:12,953 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:26:12,954 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:26:12,958 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:26:12,963 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:26:12,974 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:26:12,985 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:26:12,993 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:26:12,997 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:26:13,001 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:26:13,003 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:26:13,012 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:26:13,013 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:26:13,017 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:26:13,020 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:26:13,021 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:26:13,026 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:26:13,035 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:26:13,035 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:26:13,036 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:26:13,071 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 3 migrations (execution time 00:00.095s)
2018-11-21 11:26:13,074 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:26:13,083 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.4
2018-11-21 11:26:13,083 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 11:26:13,087 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:26:13,088 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:26:13,103 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:26:13,104 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:26:13,557 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:26:13,582 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '1e5959a0-ea20-42ee-b2b9-531a4315e7b8': getConnection()...
2018-11-21 11:26:13,583 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1e5959a0-ea20-42ee-b2b9-531a4315e7b8': init...
2018-11-21 11:26:13,584 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1e5959a0-ea20-42ee-b2b9-531a4315e7b8': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=1e5959a0-ea20-42ee-b2b9-531a4315e7b8, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:26:13,683 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 11:26:13,683 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 11:26:13,684 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 11:26:13,685 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:26:13,718 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 11:26:13,719 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: close()...
2018-11-21 11:26:13,719 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:28:51,986 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:28:51,996 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:28:52,064 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:28:52,166 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:28:52,167 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:28:52,189 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:28:52,189 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:28:52,195 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:28:52,199 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:28:52,200 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:28:52,200 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:28:52,201 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:28:52,203 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:28:52,203 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:28:52,205 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:28:52,205 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:28:52,207 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:28:52,211 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:28:52,215 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:28:52,225 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:28:52,236 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:28:52,242 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:28:52,244 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:28:52,248 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:28:52,250 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:28:52,259 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:28:52,262 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:28:52,265 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:28:52,266 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:28:52,272 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:28:52,274 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:28:52,275 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:28:52,320 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:28:52,322 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:28:52,342 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:28:52,342 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:28:52,822 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:28:52,824 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '70c0d90e-56ad-4f89-bc9d-dbdd62bc461f': getConnection()...
2018-11-21 11:28:52,824 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '70c0d90e-56ad-4f89-bc9d-dbdd62bc461f': init...
2018-11-21 11:28:52,825 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '70c0d90e-56ad-4f89-bc9d-dbdd62bc461f': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=70c0d90e-56ad-4f89-bc9d-dbdd62bc461f, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:28:52,907 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@61009542
2018-11-21 11:28:52,908 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:28:52,908 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:28:52,908 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:28:52,927 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:28:52,927 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: close()...
2018-11-21 11:28:52,928 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:29:13,661 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:29:13,666 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:29:13,710 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:29:13,813 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:29:13,813 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:29:13,833 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:29:13,833 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:29:13,839 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:29:13,843 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:29:13,844 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:29:13,844 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:29:13,845 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:29:13,847 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:29:13,847 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:29:13,849 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:29:13,849 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:29:13,850 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_4__product_delete_procedures.sql
2018-11-21 11:29:13,851 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:29:13,856 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:29:13,860 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:29:13,872 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:29:13,883 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:29:13,889 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:29:13,891 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:29:13,894 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:29:13,896 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:29:13,908 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:29:13,909 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:29:13,912 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:29:13,913 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:29:13,934 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:29:13,937 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_4__product_delete_procedures.sql ...
2018-11-21 11:29:13,940 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:29:13,945 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:29:13,947 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:29:13,948 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:29:13,948 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_4__product_delete_procedures.sql (filename: V1_0_4__product_delete_procedures.sql)
2018-11-21 11:29:13,966 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 11:29:13,967 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:29:13,983 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:29:13,984 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:29:14,441 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:29:14,445 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'ec36ff69-464c-40b8-9128-b6909e85bb4a': getConnection()...
2018-11-21 11:29:14,445 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ec36ff69-464c-40b8-9128-b6909e85bb4a': init...
2018-11-21 11:29:14,446 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ec36ff69-464c-40b8-9128-b6909e85bb4a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=ec36ff69-464c-40b8-9128-b6909e85bb4a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:29:14,529 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@448ff1a8
2018-11-21 11:29:14,529 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1a38c59b: WARNING: transaction manager not running?
2018-11-21 11:29:14,530 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1a38c59b: WARNING: transaction manager not running?
2018-11-21 11:29:14,530 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1a38c59b: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:29:14,544 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1a38c59b: WARNING: transaction manager not running?
2018-11-21 11:29:14,544 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1a38c59b: close()...
2018-11-21 11:29:14,545 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:30:20,144 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:30:20,153 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:30:20,193 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:30:23,309 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:30:23,309 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:30:23,330 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:30:23,331 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:30:23,335 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:30:23,340 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:30:23,340 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:30:23,341 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:30:23,341 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:30:23,343 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:30:23,343 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:30:23,345 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:30:23,345 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:30:23,347 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:30:23,351 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:30:23,355 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:30:23,366 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:30:23,380 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:30:23,388 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:30:23,396 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:30:23,400 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:30:23,402 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:30:23,411 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:30:23,412 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:30:23,415 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:30:23,417 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:30:23,419 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:30:23,423 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:30:23,423 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:30:23,438 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.069s)
2018-11-21 11:30:23,442 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:30:23,457 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:30:23,459 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:30:23,477 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:30:23,478 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:30:23,935 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:30:23,938 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '72dcf0e1-d718-4b1a-a033-3b5d19ff59d4': getConnection()...
2018-11-21 11:30:23,938 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '72dcf0e1-d718-4b1a-a033-3b5d19ff59d4': init...
2018-11-21 11:30:23,938 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '72dcf0e1-d718-4b1a-a033-3b5d19ff59d4': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=72dcf0e1-d718-4b1a-a033-3b5d19ff59d4, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:30:24,023 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@62e136d3
2018-11-21 11:30:24,024 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,024 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,024 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:30:24,039 com.csft.product.dao.ProductDao [main] (ProductDao.java:63) ERROR --> local transaction error, {}
java.sql.SQLSyntaxErrorException: (conn=567) PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.save(ProductDao.java:57)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?), parameters ['0a46bf12cb6445bca22fbdc7cd327058','IPAD MINI2','']
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-21 11:30:24,054 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-21 11:30:24,055 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,055 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: close()...
2018-11-21 11:30:24,063 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:30:24,063 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:30:24,066 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:30:24,067 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:30:24,068 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:30:24,068 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:30:24,069 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:30:24,069 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:30:24,069 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:30:24,070 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:30:24,070 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:30:24,071 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:30:24,071 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:30:24,072 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:30:24,072 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:30:24,072 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:30:24,073 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:30:24,074 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:30:24,078 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:30:24,079 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:30:24,080 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:30:24,083 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:30:24,084 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:30:24,086 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:30:24,097 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:30:24,098 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:30:24,100 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:30:24,101 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:30:24,102 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:30:24,104 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:30:24,104 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:30:24,107 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.028s)
2018-11-21 11:30:24,109 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:30:24,115 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 10 of 180M
2018-11-21 11:30:24,116 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:74) DEBUG --> ++++++Test query  product list....
2018-11-21 11:30:24,117 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:30:24,118 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '4fb54a16-58e2-41b9-8a1f-dd343823393d': getConnection()...
2018-11-21 11:30:24,118 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '4fb54a16-58e2-41b9-8a1f-dd343823393d': init...
2018-11-21 11:30:24,119 com.csft.product.dao.ProductDao [main] (ProductDao.java:171) DEBUG --> listall startRow = 0 , pageSize = 10
2018-11-21 11:30:24,119 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,119 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,120 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-21 11:30:24,122 com.csft.product.dao.ProductDao [main] (ProductDao.java:184) ERROR --> local sql error, {}
java.sql.SQLSyntaxErrorException: (conn=567) PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:236)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbStatement.executeExceptionEpilogue(MariaDbStatement.java:238)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:429)
	at org.mariadb.jdbc.MariaDbProcedureStatement.execute(MariaDbProcedureStatement.java:159)
	at com.csft.product.dao.ProductDao.listall(ProductDao.java:176)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.sql.SQLException: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist
Query is: CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?), parameters [0,10]
java thread: main
	at org.mariadb.jdbc.internal.util.LogQueryTool.exceptionWithQuery(LogQueryTool.java:163)
	at org.mariadb.jdbc.internal.protocol.AbstractQueryProtocol.executePreparedQuery(AbstractQueryProtocol.java:1041)
	at org.mariadb.jdbc.MariaDbPreparedStatementServer.executeInternal(MariaDbPreparedStatementServer.java:422)
	... 27 more
2018-11-21 11:30:24,123 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:78) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-21 11:30:24,124 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,124 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: close()...
2018-11-21 11:30:24,126 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:30:24,126 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:30:24,130 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:30:24,130 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:30:24,131 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:30:24,131 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:30:24,132 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:30:24,133 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:30:24,133 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:30:24,134 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:30:24,134 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:30:24,135 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:30:24,135 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:30:24,136 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:30:24,136 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:30:24,136 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:30:24,137 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:30:24,138 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:30:24,143 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:30:24,143 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:30:24,144 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:30:24,145 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:30:24,146 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:30:24,147 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:30:24,148 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:30:24,148 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:30:24,149 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:30:24,149 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:30:24,150 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:30:24,152 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:30:24,152 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:30:24,154 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.011s)
2018-11-21 11:30:24,156 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:30:24,162 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 11 of 180M
2018-11-21 11:30:24,163 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:89) DEBUG --> ++++++Test delete  product....
2018-11-21 11:30:24,164 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:30:24,165 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '1bdb54e5-51bc-45de-a03e-1b331bb58064': getConnection()...
2018-11-21 11:30:24,166 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1bdb54e5-51bc-45de-a03e-1b331bb58064': init...
2018-11-21 11:30:24,167 com.csft.product.dao.ProductDao [main] (ProductDao.java:115) DEBUG --> delete product where id=828c4409bdc4481583618ac67532d304
2018-11-21 11:30:24,167 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,167 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,167 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:30:24,171 com.csft.product.dao.ProductDao [main] (ProductDao.java:133) ERROR --> local sql error :{}(conn=567) Table 'productdb.product' doesn't exist
2018-11-21 11:30:24,171 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:95) DEBUG --> delete  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:30:24,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: WARNING: transaction manager not running?
2018-11-21 11:30:24,172 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@c8e4bb0: close()...
2018-11-21 11:31:19,222 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:31:19,227 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:31:19,259 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:31:19,359 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:31:19,360 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:31:19,380 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:31:19,380 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:31:19,384 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:31:19,391 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:31:19,391 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:31:19,392 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:31:19,393 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:31:19,395 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:31:19,395 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:31:19,397 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:31:19,397 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:31:19,399 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:31:19,404 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:31:19,408 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:31:19,420 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:31:19,433 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:31:19,440 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:31:19,442 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:31:19,449 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:31:19,452 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:31:19,466 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:31:19,468 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:31:19,470 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:31:19,474 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:31:19,486 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:31:19,489 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:31:19,489 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:31:19,505 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.082s)
2018-11-21 11:31:19,508 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:31:19,515 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 11:31:19,518 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-21 11:31:19,575 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 11:31:19,576 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 11:31:19,577 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 11:31:19,622 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,622 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 11:31:19,661 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,662 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 11:31:19,668 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-21 11:31:19,670 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-21 11:31:19,672 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-21 11:31:19,674 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-21 11:31:19,675 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,675 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:31:19,717 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,718 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-21 11:31:19,721 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:31:19,722 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:31:19,726 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:31:19,735 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-21 11:31:19,736 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:31:19,737 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:31:19,737 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,737 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:31:19,739 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,739 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:31:19,740 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:31:19,740 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,741 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:31:19,743 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,743 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:31:19,744 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:31:19,744 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,745 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:31:19,747 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:31:19,747 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.1 - product procedures
2018-11-21 11:31:19,749 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:31:19,750 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:31:19,751 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:31:19,767 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 2 migrations to schema `productdb` (execution time 00:00.252s)
2018-11-21 11:31:19,771 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 11:31:19,771 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:31:19,787 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:31:19,788 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:31:20,227 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:31:20,230 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'bb8f797a-09af-49b8-81c3-6bddd40315e1': getConnection()...
2018-11-21 11:31:20,230 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bb8f797a-09af-49b8-81c3-6bddd40315e1': init...
2018-11-21 11:31:20,230 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bb8f797a-09af-49b8-81c3-6bddd40315e1': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=bb8f797a-09af-49b8-81c3-6bddd40315e1, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:31:20,310 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@29f69090
2018-11-21 11:31:20,311 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-21 11:31:20,311 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-21 11:31:20,311 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:31:20,325 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-21 11:31:20,326 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: close()...
2018-11-21 11:31:20,326 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:49:26,850 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:49:26,855 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:49:26,895 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:49:27,003 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:49:27,003 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:49:27,023 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:49:27,024 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:49:27,028 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:49:27,033 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:49:27,033 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:49:27,034 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:49:27,034 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:49:27,036 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:49:27,037 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:49:27,038 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:49:27,038 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:49:27,040 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:49:27,045 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:49:27,049 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:49:27,060 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:49:27,075 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:49:27,081 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:49:27,084 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:49:27,090 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:49:27,093 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:49:27,101 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:49:27,102 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:49:27,108 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:49:27,110 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:49:27,113 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:49:27,114 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 61: --update product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 11:49:27,124 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 65: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 11:49:27,127 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:49:27,127 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:49:27,136 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.073s)
2018-11-21 11:49:27,140 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:49:27,152 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 11:49:27,155 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-21 11:49:27,164 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 11:49:27,165 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 11:49:27,165 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 11:49:27,216 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,216 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 11:49:27,256 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,257 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 11:49:27,264 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-21 11:49:27,267 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-21 11:49:27,269 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-21 11:49:27,272 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-21 11:49:27,272 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,272 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:49:27,316 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,316 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-21 11:49:27,319 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:49:27,320 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:49:27,323 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:49:27,332 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-21 11:49:27,333 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:49:27,334 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:49:27,335 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,335 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:49:27,337 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,337 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:49:27,338 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:49:27,339 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,339 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:49:27,341 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,341 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:49:27,343 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:49:27,343 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,344 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:49:27,346 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:49:27,346 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: --update product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 11:49:27,348 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-21 11:49:27,349 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-21 11:49:27,350 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-21 11:49:27,352 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:49:27,354 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:49:27,357 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:49:27,361 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 11:49:27,366 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:105) DEBUG --> ++++++Test delete  product....
2018-11-21 11:49:27,382 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:49:27,383 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:49:27,825 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '1ad4280c-8525-48aa-aaaf-89a23d5fe8e0': getConnection()...
2018-11-21 11:49:27,825 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1ad4280c-8525-48aa-aaaf-89a23d5fe8e0': init...
2018-11-21 11:49:27,825 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1ad4280c-8525-48aa-aaaf-89a23d5fe8e0': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=1ad4280c-8525-48aa-aaaf-89a23d5fe8e0, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:49:27,909 com.csft.product.dao.ProductDao [main] (ProductDao.java:164) DEBUG --> delete product where id=828c4409bdc4481583618ac67532d304
2018-11-21 11:49:27,910 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: WARNING: transaction manager not running?
2018-11-21 11:49:27,910 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: WARNING: transaction manager not running?
2018-11-21 11:49:27,910 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 11:49:27,927 com.csft.product.dao.ProductDao [main] (ProductDao.java:182) ERROR --> local sql error :{}Fail to product 828c4409bdc4481583618ac67532d304
2018-11-21 11:49:27,927 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:113) DEBUG --> update  product result{returnCode=500, error=Failed to delete products!}
2018-11-21 11:49:27,928 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: WARNING: transaction manager not running?
2018-11-21 11:49:27,928 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@534df152: close()...
2018-11-21 11:49:41,810 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:49:41,815 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:49:41,846 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:49:41,947 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:49:41,947 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:49:41,969 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:49:41,970 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:49:41,975 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:49:41,979 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:49:41,979 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:49:41,980 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:49:41,981 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:49:41,984 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:49:41,984 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:49:41,986 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:49:41,986 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:49:41,988 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:49:41,993 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:49:41,999 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:49:42,011 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:49:42,023 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:49:42,030 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:49:42,033 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:49:42,037 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:49:42,039 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:49:42,048 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:49:42,050 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:49:42,053 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:49:42,054 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:49:42,075 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:49:42,081 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 61: --update product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 11:49:42,089 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 65: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 11:49:42,093 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:49:42,094 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:49:42,112 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:49:42,113 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:49:42,129 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:49:42,130 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:49:42,631 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:49:42,635 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '040ed8b2-1e57-4531-99da-c84db0b55664': getConnection()...
2018-11-21 11:49:42,635 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '040ed8b2-1e57-4531-99da-c84db0b55664': init...
2018-11-21 11:49:42,636 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '040ed8b2-1e57-4531-99da-c84db0b55664': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=040ed8b2-1e57-4531-99da-c84db0b55664, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:49:42,716 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@61009542
2018-11-21 11:49:42,716 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:49:42,716 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:49:42,716 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:49:42,731 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:49:42,731 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: close()...
2018-11-21 11:49:42,732 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:51:15,184 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:51:15,190 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:51:15,229 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:51:15,332 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:51:15,333 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:51:15,352 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:51:15,353 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:51:15,358 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:51:15,362 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:51:15,362 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:51:15,363 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:51:15,363 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:51:15,366 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:51:15,366 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:51:15,367 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:51:15,367 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:51:15,369 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:51:15,374 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:51:15,380 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:51:15,391 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:51:15,402 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:51:15,409 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:51:15,411 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:51:15,415 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:51:15,417 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:51:15,427 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:51:15,429 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:51:15,432 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:51:15,433 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:51:15,437 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:51:15,438 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 61: --update product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 11:51:15,442 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 65: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 11:51:15,454 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:51:15,454 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:51:15,476 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.081s)
2018-11-21 11:51:15,479 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 11:51:15,487 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 11:51:15,491 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-21 11:51:15,499 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 11:51:15,499 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 11:51:15,500 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 11:51:15,550 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,550 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 11:51:15,589 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,590 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 11:51:15,596 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-21 11:51:15,598 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-21 11:51:15,600 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-21 11:51:15,602 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-21 11:51:15,603 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,603 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:51:15,646 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,646 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-21 11:51:15,649 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:51:15,650 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:51:15,652 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:51:15,661 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-21 11:51:15,662 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:51:15,663 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:51:15,664 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,664 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:51:15,666 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,666 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:51:15,667 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:51:15,667 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,667 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:51:15,669 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,670 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:51:15,671 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 11:51:15,672 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,672 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:51:15,674 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 11:51:15,674 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: --update product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 11:51:15,677 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-21 11:51:15,678 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-21 11:51:15,679 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.1 - product procedures failed! Please restore backups and roll back database and code!
2018-11-21 11:51:15,681 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 11:51:15,682 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 11:51:15,685 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 11:51:15,689 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 11:51:15,694 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:51:15,716 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:51:15,718 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:51:16,155 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:51:16,158 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'bcb40028-e786-48fb-a254-3db5b7ae82b4': getConnection()...
2018-11-21 11:51:16,158 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bcb40028-e786-48fb-a254-3db5b7ae82b4': init...
2018-11-21 11:51:16,158 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bcb40028-e786-48fb-a254-3db5b7ae82b4': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=bcb40028-e786-48fb-a254-3db5b7ae82b4, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:51:16,241 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@534df152
2018-11-21 11:51:16,241 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-21 11:51:16,241 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-21 11:51:16,241 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:51:16,256 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: WARNING: transaction manager not running?
2018-11-21 11:51:16,257 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@52e677af: close()...
2018-11-21 11:51:16,257 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 11:52:20,039 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 11:52:20,044 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:52:20,081 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 11:52:20,187 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 11:52:20,188 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 11:52:20,208 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 11:52:20,209 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 11:52:20,213 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 11:52:20,217 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 11:52:20,217 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 11:52:20,218 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 11:52:20,219 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 11:52:20,221 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 11:52:20,221 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 11:52:20,222 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 11:52:20,223 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 11:52:20,224 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 11:52:20,228 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 11:52:20,233 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 11:52:20,242 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 11:52:20,256 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 11:52:20,264 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 11:52:20,266 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 11:52:20,270 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 11:52:20,272 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 11:52:20,283 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 11:52:20,284 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 11:52:20,287 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 11:52:20,289 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 11:52:20,293 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 11:52:20,294 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 11:52:20,297 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 11:52:20,307 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 11:52:20,308 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 11:52:20,325 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 11:52:20,328 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 11:52:20,344 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 11:52:20,345 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 11:52:20,787 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 11:52:20,789 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '3fb903f4-a621-402f-9025-cff8bdeeb08e': getConnection()...
2018-11-21 11:52:20,790 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '3fb903f4-a621-402f-9025-cff8bdeeb08e': init...
2018-11-21 11:52:20,791 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '3fb903f4-a621-402f-9025-cff8bdeeb08e': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=3fb903f4-a621-402f-9025-cff8bdeeb08e, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 11:52:20,874 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@61009542
2018-11-21 11:52:20,874 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:52:20,874 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:52:20,874 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 11:52:20,898 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 11:52:20,898 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: close()...
2018-11-21 11:52:20,899 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 12:02:33,958 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:02:33,963 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:02:34,009 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:02:34,136 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:02:34,137 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:02:34,168 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:02:34,168 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:02:34,173 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:02:34,179 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:02:34,179 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:02:34,180 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:02:34,181 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:02:34,184 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:02:34,185 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:02:34,187 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:02:34,187 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 12:02:34,193 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:02:34,209 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:02:34,219 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:02:34,240 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:02:34,253 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:02:34,260 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:02:34,271 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:02:34,277 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 12:02:34,279 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:02:34,288 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:02:34,289 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:02:34,303 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:02:34,305 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:02:34,317 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:02:34,318 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:02:34,320 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:02:34,323 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:02:34,323 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 12:02:34,334 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.092s)
2018-11-21 12:02:34,337 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:02:34,351 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 12:02:34,357 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-21 12:02:34,380 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 12:02:34,384 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 12:02:34,385 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 12:02:34,431 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,431 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 12:02:34,471 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,471 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 12:02:34,480 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-21 12:02:34,483 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-21 12:02:34,486 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-21 12:02:34,490 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-21 12:02:34,490 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,491 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:02:34,534 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,535 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-21 12:02:34,538 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 12:02:34,539 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 12:02:34,547 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 12:02:34,560 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.1 - product procedures
2018-11-21 12:02:34,562 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:02:34,564 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:02:34,564 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,564 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:02:34,567 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,567 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:02:34,569 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:02:34,569 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,570 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:02:34,572 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,573 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:02:34,574 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:02:34,574 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,575 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:02:34,577 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,577 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:02:34,578 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:02:34,578 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,578 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:02:34,581 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:02:34,581 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.1 - product procedures
2018-11-21 12:02:34,584 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 12:02:34,585 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 12:02:34,586 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 12:02:34,614 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 2 migrations to schema `productdb` (execution time 00:00.264s)
2018-11-21 12:02:34,619 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 12:02:34,620 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 12:02:34,646 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:02:34,647 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:02:35,161 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 12:02:35,166 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd5d3d9ef-0d47-40f1-a046-2eefb83e7f61': getConnection()...
2018-11-21 12:02:35,166 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd5d3d9ef-0d47-40f1-a046-2eefb83e7f61': init...
2018-11-21 12:02:35,167 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd5d3d9ef-0d47-40f1-a046-2eefb83e7f61': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=d5d3d9ef-0d47-40f1-a046-2eefb83e7f61, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:02:35,296 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@29f69090
2018-11-21 12:02:35,297 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-21 12:02:35,297 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-21 12:02:35,297 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 12:02:35,350 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: WARNING: transaction manager not running?
2018-11-21 12:02:35,350 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@568bf312: close()...
2018-11-21 12:02:35,351 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 12:03:01,306 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:03:01,311 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:03:01,349 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:03:01,468 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:03:01,469 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:03:01,497 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:03:01,498 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:03:01,503 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:03:01,507 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:03:01,508 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:03:01,508 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:03:01,509 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:03:01,514 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:03:01,514 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:03:01,516 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:03:01,517 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 12:03:01,519 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:03:01,526 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:03:01,532 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:03:01,544 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:03:01,554 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:03:01,561 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:03:01,563 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:03:01,567 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 12:03:01,569 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:03:01,578 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:03:01,580 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:03:01,583 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:03:01,584 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:03:01,588 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:03:01,590 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:03:01,606 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:03:01,608 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:03:01,608 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 12:03:01,636 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.089s)
2018-11-21 12:03:01,639 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:03:01,676 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-21 12:03:01,678 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 12:03:01,686 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 12:03:01,686 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:105) DEBUG --> ++++++Test delete  product....
2018-11-21 12:03:01,711 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:03:01,712 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:03:02,212 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'cc15cc59-c4a4-48d0-932f-42ebd5083dde': getConnection()...
2018-11-21 12:03:02,213 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'cc15cc59-c4a4-48d0-932f-42ebd5083dde': init...
2018-11-21 12:03:02,213 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'cc15cc59-c4a4-48d0-932f-42ebd5083dde': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=cc15cc59-c4a4-48d0-932f-42ebd5083dde, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:03:02,296 com.csft.product.dao.ProductDao [main] (ProductDao.java:164) DEBUG --> delete product where id=e5de908273964c34a3107a0a2b21e17a
2018-11-21 12:03:02,296 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-21 12:03:02,297 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-21 12:03:02,297 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: calling prepareCall({CALL QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(?,?)})...
2018-11-21 12:03:02,327 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:113) DEBUG --> update  product result{msg=Success delete, resultCode=200}
2018-11-21 12:03:02,327 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: WARNING: transaction manager not running?
2018-11-21 12:03:02,328 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@41ee392b: close()...
2018-11-21 12:03:49,860 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:03:49,867 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:03:49,915 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:03:50,070 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:03:50,070 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:03:50,099 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:03:50,101 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:03:50,106 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:03:50,112 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:03:50,112 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:03:50,113 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:03:50,114 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:03:50,116 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:03:50,117 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:03:50,119 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:03:50,119 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 12:03:50,122 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:03:50,128 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:03:50,135 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:03:50,149 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:03:50,160 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:03:50,168 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:03:50,174 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:03:50,177 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 12:03:50,188 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:03:50,216 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:03:50,224 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:03:50,233 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:03:50,234 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:03:50,242 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:03:50,244 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:03:50,254 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:03:50,256 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:03:50,257 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 12:03:50,274 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.123s)
2018-11-21 12:03:50,278 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:03:50,287 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-21 12:03:50,288 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 12:03:50,296 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 12:03:50,296 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 12:03:50,331 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:03:50,333 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:03:50,924 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 12:03:50,928 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'b0c22ad6-22f8-432c-99de-8a6c5c75d5bb': getConnection()...
2018-11-21 12:03:50,928 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b0c22ad6-22f8-432c-99de-8a6c5c75d5bb': init...
2018-11-21 12:03:50,929 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b0c22ad6-22f8-432c-99de-8a6c5c75d5bb': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=b0c22ad6-22f8-432c-99de-8a6c5c75d5bb, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:03:51,031 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@41ee392b
2018-11-21 12:03:51,031 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:03:51,032 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:03:51,032 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 12:03:51,055 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:03:51,056 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 12:03:51,057 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 12:05:32,674 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:05:32,679 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:05:32,727 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:05:32,850 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:05:32,851 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:05:32,876 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:05:32,876 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:05:32,881 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:05:32,885 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:05:32,886 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:05:32,887 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:05:32,888 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:05:32,891 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:05:32,891 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:05:32,893 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:05:32,893 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_1__product_procedures.sql
2018-11-21 12:05:32,895 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:05:32,901 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:05:32,909 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:05:32,926 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:05:32,936 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:05:32,941 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:05:32,951 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:05:32,955 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_1__product_procedures.sql ...
2018-11-21 12:05:32,957 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:05:32,989 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:05:32,992 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:05:32,998 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:05:33,004 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:05:33,006 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:05:33,007 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:05:33,009 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE PRODUCT set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:05:33,014 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:05:33,014 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_1__product_procedures.sql (filename: V1_0_1__product_procedures.sql)
2018-11-21 12:05:33,030 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.102s)
2018-11-21 12:05:33,035 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:05:33,045 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.1
2018-11-21 12:05:33,046 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 12:05:33,053 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 12:05:33,053 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 12:05:33,084 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:05:33,086 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:05:33,630 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '131f56b5-f5d4-4e24-8664-392c49b29ff8': getConnection()...
2018-11-21 12:05:33,630 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '131f56b5-f5d4-4e24-8664-392c49b29ff8': init...
2018-11-21 12:05:33,631 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '131f56b5-f5d4-4e24-8664-392c49b29ff8': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=131f56b5-f5d4-4e24-8664-392c49b29ff8, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:05:33,726 com.csft.product.dao.ProductDao [main] (ProductDao.java:107) DEBUG --> update product where id=f8b870f16b2f4aebae4c3865402d988c
2018-11-21 12:05:33,727 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:05:33,727 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:05:33,727 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 12:05:33,750 com.csft.product.dao.ProductDao [main] (ProductDao.java:127) ERROR --> local sql error :{}(conn=653) Table 'productdb.PRODUCT' doesn't exist
2018-11-21 12:05:33,751 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{returnCode=500, error=Failed to update products!}
2018-11-21 12:05:33,751 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:05:33,752 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 12:06:21,670 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:06:21,675 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:06:21,721 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:06:21,842 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:06:21,842 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:06:21,865 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:06:21,866 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:06:21,871 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:06:21,875 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:06:21,876 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:06:21,877 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:06:21,877 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:06:21,880 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:06:21,880 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:06:21,882 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:06:21,882 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 12:06:21,884 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:06:21,891 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:06:21,899 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:06:21,914 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:06:21,926 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:06:21,933 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:06:21,937 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:06:21,942 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 12:06:21,950 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:06:21,973 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:06:21,992 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:06:22,000 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:06:22,001 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:06:22,011 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:06:22,012 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:06:22,014 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:06:22,016 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:06:22,017 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 12:06:22,036 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 40 of 180M
2018-11-21 12:06:22,038 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 12:06:22,063 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:06:22,064 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:06:22,603 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd07a8fb7-3291-4524-956e-fb44f6891cce': getConnection()...
2018-11-21 12:06:22,603 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd07a8fb7-3291-4524-956e-fb44f6891cce': init...
2018-11-21 12:06:22,604 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd07a8fb7-3291-4524-956e-fb44f6891cce': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=d07a8fb7-3291-4524-956e-fb44f6891cce, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:06:22,700 com.csft.product.dao.ProductDao [main] (ProductDao.java:107) DEBUG --> update product where id=f8b870f16b2f4aebae4c3865402d988c
2018-11-21 12:06:22,700 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 12:06:22,701 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 12:06:22,701 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 12:06:22,722 com.csft.product.dao.ProductDao [main] (ProductDao.java:127) ERROR --> local sql error :{}(conn=659) Table 'productdb.PRODUCT' doesn't exist
2018-11-21 12:06:22,723 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{returnCode=500, error=Failed to update products!}
2018-11-21 12:06:22,723 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 12:06:22,723 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: close()...
2018-11-21 12:06:45,010 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:06:45,015 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:06:45,064 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:06:45,205 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:06:45,206 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:06:45,231 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:06:45,231 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:06:45,237 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:06:45,242 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:06:45,242 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:06:45,243 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:06:45,244 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:06:45,247 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:06:45,247 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:06:45,249 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:06:45,249 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 12:06:45,251 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:06:45,257 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:06:45,263 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:06:45,277 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:06:45,287 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:06:45,295 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:06:45,298 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:06:45,303 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 12:06:45,305 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:06:45,321 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:06:45,325 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:06:45,328 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:06:45,329 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:06:45,333 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:06:45,334 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:06:45,344 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:06:45,352 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:06:45,352 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 12:06:45,372 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.091s)
2018-11-21 12:06:45,375 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:06:45,385 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.0
2018-11-21 12:06:45,387 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.2 - product procedures
2018-11-21 12:06:45,393 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:06:45,418 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,418 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:06:45,421 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,422 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:06:45,425 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,425 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:06:45,428 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,428 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:06:45,430 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,430 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:06:45,433 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,434 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:06:45,436 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,437 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:06:45,439 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:06:45,439 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.2 - product procedures
2018-11-21 12:06:45,441 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 12:06:45,443 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 12:06:45,446 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 12:06:45,471 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 1 migration to schema `productdb` (execution time 00:00.091s)
2018-11-21 12:06:45,474 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 12:06:45,475 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 12:06:45,494 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:06:45,496 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:06:46,032 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'ee469459-1eca-4631-ad98-d4b5853cef55': getConnection()...
2018-11-21 12:06:46,033 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ee469459-1eca-4631-ad98-d4b5853cef55': init...
2018-11-21 12:06:46,033 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ee469459-1eca-4631-ad98-d4b5853cef55': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=ee469459-1eca-4631-ad98-d4b5853cef55, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:06:46,155 com.csft.product.dao.ProductDao [main] (ProductDao.java:107) DEBUG --> update product where id=f8b870f16b2f4aebae4c3865402d988c
2018-11-21 12:06:46,156 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5ea434c8: WARNING: transaction manager not running?
2018-11-21 12:06:46,156 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5ea434c8: WARNING: transaction manager not running?
2018-11-21 12:06:46,156 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5ea434c8: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 12:06:46,188 com.csft.product.dao.ProductDao [main] (ProductDao.java:127) ERROR --> local sql error :{}Parameter in index '2' is not declared as output parameter with method registerOutParameter
2018-11-21 12:06:46,189 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{returnCode=500, error=Failed to update products!}
2018-11-21 12:06:46,189 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5ea434c8: WARNING: transaction manager not running?
2018-11-21 12:06:46,189 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5ea434c8: close()...
2018-11-21 12:07:50,873 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:07:50,879 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:07:50,922 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:07:51,045 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:07:51,045 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:07:51,070 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:07:51,071 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:07:51,075 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:07:51,080 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:07:51,080 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:07:51,081 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:07:51,082 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:07:51,084 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:07:51,085 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:07:51,086 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:07:51,086 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 12:07:51,089 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:07:51,094 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:07:51,102 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:07:51,122 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:07:51,132 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:07:51,140 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:07:51,142 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:07:51,156 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 12:07:51,157 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:07:51,166 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:07:51,174 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:07:51,194 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:07:51,196 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:07:51,200 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:07:51,201 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:07:51,207 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 64: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:07:51,210 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:07:51,215 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 12:07:51,237 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.112s)
2018-11-21 12:07:51,239 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:07:51,248 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 12:07:51,249 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 12:07:51,254 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 12:07:51,254 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 12:07:51,281 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:07:51,283 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:07:51,802 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '26d25055-e296-4dc5-8e84-50380e4e6aee': getConnection()...
2018-11-21 12:07:51,802 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '26d25055-e296-4dc5-8e84-50380e4e6aee': init...
2018-11-21 12:07:51,803 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '26d25055-e296-4dc5-8e84-50380e4e6aee': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=26d25055-e296-4dc5-8e84-50380e4e6aee, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:07:51,895 com.csft.product.dao.ProductDao [main] (ProductDao.java:107) DEBUG --> update product where id=f8b870f16b2f4aebae4c3865402d988c
2018-11-21 12:07:51,896 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:07:51,896 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:07:51,896 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 12:07:51,917 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{msg=Success delete, resultCode=200}
2018-11-21 12:07:51,917 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 12:07:51,918 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 12:24:04,575 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:24:04,582 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:24:04,631 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:24:04,770 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:24:04,770 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:24:04,794 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:24:04,795 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:24:04,800 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:24:04,804 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:24:04,805 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:24:04,806 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:24:04,808 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:24:04,810 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:24:04,810 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:24:04,812 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:24:04,812 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 12:24:04,815 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:24:04,821 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:24:04,826 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:24:04,839 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:24:04,850 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:24:04,858 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:24:04,861 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:24:04,870 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 12:24:04,876 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:24:04,902 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:24:04,905 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:24:04,909 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:24:04,910 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:24:04,913 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:24:04,916 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 62: --update product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:24:04,921 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 65: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:24:04,924 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:24:04,924 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 12:24:04,941 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.099s)
2018-11-21 12:24:04,946 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:24:04,959 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 12:24:04,964 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-21 12:24:04,972 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 12:24:04,974 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 12:24:04,979 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 12:24:05,032 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,032 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 12:24:05,069 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,070 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 12:24:05,078 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-21 12:24:05,080 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-21 12:24:05,083 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-21 12:24:05,085 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-21 12:24:05,086 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,086 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:24:05,128 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,129 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-21 12:24:05,132 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 12:24:05,134 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 12:24:05,140 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 12:24:05,154 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.2 - product procedures
2018-11-21 12:24:05,156 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:24:05,158 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:24:05,159 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,159 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:24:05,161 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,161 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:24:05,162 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:24:05,162 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,163 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:24:05,164 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,165 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:24:05,168 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:24:05,168 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,169 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:24:05,171 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:05,171 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: --update product
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:24:05,174 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Rolling back transaction...
2018-11-21 12:24:05,174 org.flywaydb.core.internal.jdbc.TransactionTemplate [main] (Slf4jLog.java:45) DEBUG --> Transaction rolled back
2018-11-21 12:24:05,175 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:57) ERROR --> Migration of schema `productdb` to version 1.0.2 - product procedures failed! Please restore backups and roll back database and code!
2018-11-21 12:24:05,177 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 12:24:05,179 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 12:24:05,191 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 12:24:05,195 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 12:24:05,199 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 12:24:05,239 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:24:05,240 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:24:05,838 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 12:24:05,842 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '718ee7a8-6fa2-4914-af64-5ae755547b36': getConnection()...
2018-11-21 12:24:05,842 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '718ee7a8-6fa2-4914-af64-5ae755547b36': init...
2018-11-21 12:24:05,843 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '718ee7a8-6fa2-4914-af64-5ae755547b36': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=718ee7a8-6fa2-4914-af64-5ae755547b36, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:24:05,944 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@52e677af
2018-11-21 12:24:05,945 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@35083305: WARNING: transaction manager not running?
2018-11-21 12:24:05,945 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@35083305: WARNING: transaction manager not running?
2018-11-21 12:24:05,946 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@35083305: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 12:24:05,979 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@35083305: WARNING: transaction manager not running?
2018-11-21 12:24:05,979 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@35083305: close()...
2018-11-21 12:24:05,980 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 12:24:50,416 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 12:24:50,423 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:24:50,472 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 12:24:50,595 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 12:24:50,595 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 12:24:50,618 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 12:24:50,620 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 12:24:50,624 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 12:24:50,630 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 12:24:50,631 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 12:24:50,632 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 12:24:50,632 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 12:24:50,635 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 12:24:50,635 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 12:24:50,638 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 12:24:50,638 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 12:24:50,640 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 12:24:50,645 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 12:24:50,653 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 12:24:50,668 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 12:24:50,678 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 12:24:50,688 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 12:24:50,704 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:24:50,709 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 12:24:50,712 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:24:50,738 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:24:50,742 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:24:50,749 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:24:50,753 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:24:50,756 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:24:50,758 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:24:50,760 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:24:50,763 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 12:24:50,763 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 12:24:50,778 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.106s)
2018-11-21 12:24:50,780 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 12:24:50,789 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:49) INFO  --> Creating Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 12:24:50,794 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing createMetaDataTable.sql ...
2018-11-21 12:24:50,813 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 17: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 12:24:50,813 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 32: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 12:24:50,814 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE TABLE `productdb`.`flyway_schema_history` (
    `installed_rank` INT NOT NULL,
    `version` VARCHAR(50),
    `description` VARCHAR(200) NOT NULL,
    `type` VARCHAR(20) NOT NULL,
    `script` VARCHAR(1000) NOT NULL,
    `checksum` INT,
    `installed_by` VARCHAR(100) NOT NULL,
    `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `execution_time` INT NOT NULL,
    `success` BOOL NOT NULL,
    -- Add the primary key as part of the CREATE TABLE statement in case `innodb_force_primary_key` is enabled
    CONSTRAINT `flyway_schema_history_pk`PRIMARY KEY (`installed_rank`)
) ENGINE=InnoDB
2018-11-21 12:24:50,894 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:50,894 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE INDEX `flyway_schema_history_s_idx` ON `productdb`.`flyway_schema_history` (`success`)
2018-11-21 12:24:50,953 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:50,954 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Created Schema History table: `productdb`.`flyway_schema_history`
2018-11-21 12:24:50,963 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: << Empty Schema >>
2018-11-21 12:24:50,966 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.0 - init product table
2018-11-21 12:24:50,970 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: drop table if exists product
2018-11-21 12:24:50,972 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: Unknown table 'productdb.product' (SQL State: 42S02 - Error Code: 1051)
2018-11-21 12:24:50,972 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:50,973 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 12:24:51,016 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,016 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.0 - init product table
2018-11-21 12:24:51,020 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 12:24:51,021 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 12:24:51,024 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 12:24:51,033 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Migrating schema `productdb` to version 1.0.2 - product procedures
2018-11-21 12:24:51,034 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 12:24:51,036 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_INSERT_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:24:51,036 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,037 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 12:24:51,039 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,040 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 12:24:51,041 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:24:51,041 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,042 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 12:24:51,043 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,044 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 12:24:51,045 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_DELETE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:24:51,046 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,046 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 12:24:51,048 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,049 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 12:24:51,051 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:53) WARN  --> DB: PROCEDURE productdb.QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE does not exist (SQL State: null - Error Code: 1305)
2018-11-21 12:24:51,051 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,051 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Executing SQL: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 12:24:51,054 org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor [main] (Slf4jLog.java:45) DEBUG --> Update Count: 0
2018-11-21 12:24:51,054 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:45) DEBUG --> Successfully completed migration of schema `productdb` to version 1.0.2 - product procedures
2018-11-21 12:24:51,058 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Locking table `productdb`.`flyway_schema_history`...
2018-11-21 12:24:51,061 org.flywaydb.core.internal.database.base.Table [main] (Slf4jLog.java:45) DEBUG --> Lock acquired for table `productdb`.`flyway_schema_history`
2018-11-21 12:24:51,063 org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory [main] (Slf4jLog.java:45) DEBUG --> Schema History table `productdb`.`flyway_schema_history` successfully updated to reflect changes
2018-11-21 12:24:51,091 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Successfully applied 2 migrations to schema `productdb` (execution time 00:00.302s)
2018-11-21 12:24:51,094 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 12:24:51,095 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 12:24:51,116 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 12:24:51,117 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 12:24:51,665 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 12:24:51,671 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'c74d24a4-e8ed-492a-a7a8-3718312a5f97': getConnection()...
2018-11-21 12:24:51,671 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'c74d24a4-e8ed-492a-a7a8-3718312a5f97': init...
2018-11-21 12:24:51,673 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'c74d24a4-e8ed-492a-a7a8-3718312a5f97': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=c74d24a4-e8ed-492a-a7a8-3718312a5f97, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 12:24:51,782 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@568bf312
2018-11-21 12:24:51,783 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-21 12:24:51,783 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-21 12:24:51,783 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 12:24:51,802 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: WARNING: transaction manager not running?
2018-11-21 12:24:51,802 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@ca263c2: close()...
2018-11-21 12:24:51,803 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 14:00:15,655 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 14:00:15,659 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:00:15,712 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 14:00:15,848 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 14:00:15,848 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 14:00:15,880 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 14:00:15,880 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 14:00:15,887 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 14:00:15,895 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 14:00:15,896 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 14:00:15,896 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 14:00:15,897 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 14:00:15,900 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 14:00:15,900 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 14:00:15,903 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 14:00:15,904 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 14:00:15,907 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 14:00:15,915 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 14:00:15,927 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 14:00:15,941 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 14:00:15,952 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 14:00:15,960 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 14:00:15,972 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 14:00:15,981 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 14:00:15,986 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 14:00:16,015 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 14:00:16,018 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 14:00:16,021 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 14:00:16,023 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 14:00:16,030 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 14:00:16,031 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 14:00:16,036 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 14:00:16,039 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 14:00:16,039 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 14:00:16,067 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.124s)
2018-11-21 14:00:16,071 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 14:00:16,082 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 14:00:16,084 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 14:00:16,090 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 14:00:16,090 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 14:00:16,119 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 14:00:16,121 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:00:16,726 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 14:00:16,732 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '93e1ab50-0e88-4c05-ba1f-a33bdf5a1609': getConnection()...
2018-11-21 14:00:16,733 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '93e1ab50-0e88-4c05-ba1f-a33bdf5a1609': init...
2018-11-21 14:00:16,733 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '93e1ab50-0e88-4c05-ba1f-a33bdf5a1609': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=93e1ab50-0e88-4c05-ba1f-a33bdf5a1609, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 14:00:16,852 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@1e67a849
2018-11-21 14:00:16,853 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 14:00:16,854 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 14:00:16,854 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 14:00:16,877 com.csft.product.dao.ProductDao [main] (ProductDao.java:67) ERROR --> local transaction error, {}
java.lang.Exception: exception
	at com.csft.product.dao.ProductDao.save(ProductDao.java:59)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
2018-11-21 14:00:16,880 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-21 14:00:16,880 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 14:00:16,882 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: close()...
2018-11-21 14:23:04,771 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 14:23:04,778 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:23:04,819 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 14:23:04,944 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 14:23:04,945 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 14:23:04,972 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 14:23:04,972 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 14:23:04,978 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 14:23:04,987 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 14:23:04,987 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 14:23:04,988 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 14:23:04,989 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 14:23:04,993 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 14:23:04,994 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 14:23:04,996 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 14:23:04,996 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 14:23:05,000 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 14:23:05,008 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 14:23:05,017 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 14:23:05,070 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 14:23:05,079 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 14:23:05,088 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 14:23:05,090 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 14:23:05,096 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 14:23:05,098 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 14:23:05,110 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 14:23:05,112 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 14:23:05,125 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 14:23:05,127 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 14:23:05,129 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 14:23:05,130 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 14:23:05,135 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 14:23:05,138 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 14:23:05,139 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 14:23:05,164 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.092s)
2018-11-21 14:23:05,168 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 14:23:05,179 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 14:23:05,180 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 14:23:05,187 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 14:23:05,187 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 14:23:05,218 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 14:23:05,219 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:23:05,731 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 14:23:05,736 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '65f91a6d-fb3a-4842-af09-4e4e0445b64a': getConnection()...
2018-11-21 14:23:05,736 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '65f91a6d-fb3a-4842-af09-4e4e0445b64a': init...
2018-11-21 14:23:05,736 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '65f91a6d-fb3a-4842-af09-4e4e0445b64a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=65f91a6d-fb3a-4842-af09-4e4e0445b64a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 14:23:05,831 com.csft.product.dao.ProductDao [main] (ProductDao.java:45) DEBUG --> saving product = com.csft.product.pojo.Product@1e67a849
2018-11-21 14:23:05,831 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 14:23:05,831 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 14:23:05,832 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 14:23:05,852 com.csft.product.dao.ProductDao [main] (ProductDao.java:67) ERROR --> local transaction error, {}
java.lang.Exception: exception
	at com.csft.product.dao.ProductDao.save(ProductDao.java:59)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
2018-11-21 14:23:05,855 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-21 14:23:05,856 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 14:23:05,856 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: close()...
2018-11-21 14:44:33,382 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 14:44:33,387 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:44:33,424 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 14:44:33,559 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 14:44:33,559 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 14:44:33,582 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 14:44:33,583 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 14:44:33,589 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 14:44:33,594 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 14:44:33,595 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 14:44:33,595 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 14:44:33,596 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 14:44:33,598 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 14:44:33,599 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 14:44:33,600 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 14:44:33,600 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 14:44:33,602 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 14:44:33,608 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 14:44:33,614 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 14:44:33,629 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 14:44:33,646 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 14:44:33,656 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 14:44:33,662 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 14:44:33,667 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 14:44:33,669 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 14:44:33,692 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 14:44:33,694 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 14:44:33,705 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 14:44:33,706 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 14:44:33,711 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 14:44:33,712 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 14:44:33,715 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 14:44:33,717 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 14:44:33,717 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 14:44:33,730 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.099s)
2018-11-21 14:44:33,733 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 14:44:33,742 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 14:44:33,744 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 14:44:33,748 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 14:44:33,749 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 14:44:33,774 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 14:44:33,775 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:44:34,290 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 14:44:34,294 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '61dd7ef1-e5e1-4b63-8eb5-d8af3283b757': getConnection()...
2018-11-21 14:44:34,294 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '61dd7ef1-e5e1-4b63-8eb5-d8af3283b757': init...
2018-11-21 14:44:34,294 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '61dd7ef1-e5e1-4b63-8eb5-d8af3283b757': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=61dd7ef1-e5e1-4b63-8eb5-d8af3283b757, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 14:44:34,398 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:34,398 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 14:44:34,399 com.csft.product.dao.ProductDao [main] (ProductDao.java:47) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 14:44:34,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:34,400 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:34,400 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 14:44:34,422 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:34,422 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling rollback...
2018-11-21 14:44:34,447 com.csft.product.dao.ProductDao [main] (ProductDao.java:86) ERROR --> local transaction error, {}
java.lang.ArithmeticException: / by zero
	at com.csft.product.dao.ProductDao.save(ProductDao.java:62)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
2018-11-21 14:44:34,451 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-21 14:44:34,452 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:34,452 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 14:44:56,381 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 14:44:56,386 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:44:56,431 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 14:44:56,546 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 14:44:56,546 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 14:44:56,569 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 14:44:56,570 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 14:44:56,575 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 14:44:56,579 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 14:44:56,579 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 14:44:56,580 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 14:44:56,581 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 14:44:56,584 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 14:44:56,584 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 14:44:56,586 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 14:44:56,586 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 14:44:56,588 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 14:44:56,592 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 14:44:56,598 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 14:44:56,611 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 14:44:56,625 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 14:44:56,636 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 14:44:56,639 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 14:44:56,645 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 14:44:56,649 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 14:44:56,658 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 14:44:56,660 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 14:44:56,669 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 14:44:56,678 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 14:44:56,686 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 14:44:56,689 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 14:44:56,694 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 14:44:56,700 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 14:44:56,701 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 14:44:56,715 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.101s)
2018-11-21 14:44:56,718 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 14:44:56,728 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 14:44:56,729 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 14:44:56,738 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 14:44:56,738 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 14:44:56,758 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 14:44:56,759 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:44:57,285 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 14:44:57,289 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '1312379e-20ce-4956-906e-af6cee3e55b8': getConnection()...
2018-11-21 14:44:57,289 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1312379e-20ce-4956-906e-af6cee3e55b8': init...
2018-11-21 14:44:57,289 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '1312379e-20ce-4956-906e-af6cee3e55b8': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=1312379e-20ce-4956-906e-af6cee3e55b8, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 14:44:57,381 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:57,381 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 14:44:57,382 com.csft.product.dao.ProductDao [main] (ProductDao.java:47) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 14:44:57,382 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:57,383 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:57,383 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 14:44:57,405 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:57,405 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling rollback...
2018-11-21 14:44:57,419 com.csft.product.dao.ProductDao [main] (ProductDao.java:86) ERROR --> local transaction error, {}
java.lang.ArithmeticException: / by zero
	at com.csft.product.dao.ProductDao.save(ProductDao.java:62)
	at com.csft.product.dao.test.ProductDaoTest.testSave(ProductDaoTest.java:62)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
2018-11-21 14:44:57,422 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=500, error=failed to save the product!}
2018-11-21 14:44:57,422 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:44:57,423 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 14:45:55,020 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 14:45:55,026 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:45:55,067 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 14:45:55,186 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 14:45:55,187 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 14:45:55,212 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 14:45:55,213 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 14:45:55,219 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 14:45:55,226 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 14:45:55,226 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 14:45:55,228 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 14:45:55,229 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 14:45:55,231 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 14:45:55,231 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 14:45:55,233 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 14:45:55,233 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 14:45:55,235 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 14:45:55,241 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 14:45:55,251 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 14:45:55,270 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 14:45:55,282 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 14:45:55,288 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 14:45:55,295 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 14:45:55,298 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 14:45:55,301 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 14:45:55,324 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 14:45:55,326 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 14:45:55,329 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 14:45:55,330 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 14:45:55,335 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 14:45:55,336 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 14:45:55,343 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 14:45:55,346 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 14:45:55,346 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 14:45:55,373 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.100s)
2018-11-21 14:45:55,376 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 14:45:55,386 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 14:45:55,387 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 14:45:55,392 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 14:45:55,393 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 14:45:55,411 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 14:45:55,411 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 14:45:55,920 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO  ....
2018-11-21 14:45:55,924 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'b2d3cd6c-65fb-455d-9653-9d2032b715c9': getConnection()...
2018-11-21 14:45:55,924 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b2d3cd6c-65fb-455d-9653-9d2032b715c9': init...
2018-11-21 14:45:55,925 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b2d3cd6c-65fb-455d-9653-9d2032b715c9': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=b2d3cd6c-65fb-455d-9653-9d2032b715c9, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 14:45:56,026 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:45:56,027 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 14:45:56,028 com.csft.product.dao.ProductDao [main] (ProductDao.java:47) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 14:45:56,029 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:45:56,029 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:45:56,030 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 14:45:56,050 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:45:56,050 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 14:45:56,115 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 14:45:56,115 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 14:45:56,116 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 15:09:33,183 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 15:09:33,193 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:09:33,258 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 15:09:33,397 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 15:09:33,397 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 15:09:33,420 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 15:09:33,420 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 15:09:33,428 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 15:09:33,434 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 15:09:33,435 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 15:09:33,436 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 15:09:33,436 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 15:09:33,439 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 15:09:33,439 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 15:09:33,440 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 15:09:33,441 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 15:09:33,442 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 15:09:33,447 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 15:09:33,456 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 15:09:33,470 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 15:09:33,481 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 15:09:33,489 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 15:09:33,495 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 15:09:33,499 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 15:09:33,502 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 15:09:33,531 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 15:09:33,538 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 15:09:33,561 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 15:09:33,565 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 15:09:33,568 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 15:09:33,569 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 15:09:33,575 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 15:09:33,578 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 15:09:33,578 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 15:09:33,599 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.127s)
2018-11-21 15:09:33,609 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 15:09:33,625 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 15:09:33,627 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 15:09:33,635 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 15:09:33,635 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 15:09:33,667 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 15:09:33,668 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:09:34,182 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 15:09:34,186 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '935c0789-dd18-4fcb-8221-071e5224d92c': getConnection()...
2018-11-21 15:09:34,186 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '935c0789-dd18-4fcb-8221-071e5224d92c': init...
2018-11-21 15:09:34,186 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '935c0789-dd18-4fcb-8221-071e5224d92c': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=935c0789-dd18-4fcb-8221-071e5224d92c, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 15:09:34,310 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:34,311 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 15:09:34,314 com.csft.product.dao.ProductDao [main] (ProductDao.java:47) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 15:09:34,314 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:34,314 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:34,315 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 15:09:34,333 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:34,333 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 15:09:34,336 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 15:09:34,336 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:34,337 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 15:09:55,353 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 15:09:55,357 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:09:55,406 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 15:09:55,528 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 15:09:55,528 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 15:09:55,554 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 15:09:55,555 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 15:09:55,560 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 15:09:55,567 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 15:09:55,567 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 15:09:55,568 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 15:09:55,570 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 15:09:55,574 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 15:09:55,574 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 15:09:55,576 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 15:09:55,576 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 15:09:55,578 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 15:09:55,586 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 15:09:55,598 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 15:09:55,615 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 15:09:55,625 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 15:09:55,634 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 15:09:55,637 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 15:09:55,641 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 15:09:55,647 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 15:09:55,669 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 15:09:55,671 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 15:09:55,675 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 15:09:55,676 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 15:09:55,693 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 15:09:55,696 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 15:09:55,705 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 15:09:55,708 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 15:09:55,709 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 15:09:55,730 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.113s)
2018-11-21 15:09:55,734 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 15:09:55,746 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 15:09:55,747 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 15:09:55,751 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 15:09:55,752 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 15:09:55,770 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 15:09:55,772 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:09:56,285 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 15:09:56,288 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'ad531cd2-a338-416e-a5eb-f7f6b5793559': getConnection()...
2018-11-21 15:09:56,288 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ad531cd2-a338-416e-a5eb-f7f6b5793559': init...
2018-11-21 15:09:56,289 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'ad531cd2-a338-416e-a5eb-f7f6b5793559': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=ad531cd2-a338-416e-a5eb-f7f6b5793559, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 15:09:56,381 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:56,381 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 15:09:56,383 com.csft.product.dao.ProductDao [main] (ProductDao.java:47) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 15:09:56,383 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:56,383 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:56,384 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 15:09:56,405 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:56,405 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 15:09:56,408 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 15:09:56,409 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:09:56,409 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 15:40:42,472 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 15:40:42,476 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:40:42,521 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 15:40:42,660 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 15:40:42,660 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 15:40:42,689 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 15:40:42,690 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 15:40:42,697 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 15:40:42,702 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 15:40:42,703 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 15:40:42,704 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 15:40:42,704 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 15:40:42,707 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 15:40:42,707 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 15:40:42,710 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 15:40:42,710 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 15:40:42,714 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 15:40:42,724 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 15:40:42,737 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 15:40:42,755 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 15:40:42,771 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 15:40:42,781 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 15:40:42,792 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 15:40:42,796 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 15:40:42,800 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 15:40:42,815 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 15:40:42,816 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 15:40:42,822 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 15:40:42,823 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 15:40:42,829 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 15:40:42,831 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 15:40:42,834 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 15:40:42,838 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 15:40:42,839 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 15:40:42,856 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.097s)
2018-11-21 15:40:42,863 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 15:40:42,886 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 15:40:42,887 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 15:40:42,893 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 15:40:42,893 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 15:40:42,917 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 15:40:42,919 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:40:43,552 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 15:40:43,557 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '08b721b4-bcba-49ba-8e40-6a24dc88d030': getConnection()...
2018-11-21 15:40:43,558 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '08b721b4-bcba-49ba-8e40-6a24dc88d030': init...
2018-11-21 15:40:43,559 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '08b721b4-bcba-49ba-8e40-6a24dc88d030': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=08b721b4-bcba-49ba-8e40-6a24dc88d030, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 15:40:43,690 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:40:43,690 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 15:40:43,691 com.csft.product.dao.ProductDao [main] (ProductDao.java:47) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 15:40:43,692 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:40:43,692 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:40:43,692 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 15:40:43,713 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:40:43,713 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 15:40:43,720 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 15:40:43,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:40:43,721 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 15:41:00,440 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 15:41:00,445 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:41:00,490 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 15:41:00,614 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 15:41:00,615 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 15:41:00,639 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 15:41:00,639 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 15:41:00,644 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 15:41:00,649 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 15:41:00,650 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 15:41:00,650 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 15:41:00,651 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 15:41:00,653 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 15:41:00,653 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 15:41:00,655 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 15:41:00,655 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 15:41:00,657 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 15:41:00,663 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 15:41:00,670 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 15:41:00,690 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 15:41:00,702 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 15:41:00,708 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 15:41:00,718 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 15:41:00,724 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 15:41:00,728 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 15:41:00,761 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 15:41:00,764 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 15:41:00,781 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 15:41:00,782 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 15:41:00,785 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 15:41:00,786 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 15:41:00,790 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 15:41:00,795 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 15:41:00,795 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 15:41:00,821 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.128s)
2018-11-21 15:41:00,827 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 15:41:00,843 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 15:41:00,844 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 15:41:00,850 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 15:41:00,851 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 15:41:00,875 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 15:41:00,877 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 15:41:01,471 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 15:41:01,479 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'acb19db5-50ea-4069-9b4e-014a3e524b74': getConnection()...
2018-11-21 15:41:01,480 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'acb19db5-50ea-4069-9b4e-014a3e524b74': init...
2018-11-21 15:41:01,480 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'acb19db5-50ea-4069-9b4e-014a3e524b74': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=acb19db5-50ea-4069-9b4e-014a3e524b74, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 15:41:01,619 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:41:01,620 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 15:41:01,621 com.csft.product.dao.ProductDao [main] (ProductDao.java:47) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 15:41:01,621 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:41:01,621 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:41:01,621 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 15:41:01,637 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:41:01,637 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 15:41:01,640 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 15:41:01,640 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 15:41:01,640 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 16:17:29,299 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 16:17:29,304 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 16:17:29,351 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 16:17:29,482 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 16:17:29,483 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 16:17:29,520 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 16:17:29,520 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 16:17:29,527 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 16:17:29,534 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 16:17:29,535 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 16:17:29,536 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 16:17:29,537 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 16:17:29,542 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 16:17:29,543 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 16:17:29,546 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 16:17:29,546 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 16:17:29,549 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 16:17:29,555 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 16:17:29,560 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 16:17:29,574 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 16:17:29,586 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 16:17:29,596 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 16:17:29,606 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 16:17:29,610 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 16:17:29,613 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 16:17:29,626 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 16:17:29,628 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 16:17:29,633 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 16:17:29,635 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 16:17:29,639 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 16:17:29,651 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 16:17:29,657 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 16:17:29,660 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 16:17:29,662 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 16:17:29,690 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.113s)
2018-11-21 16:17:29,693 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 16:17:29,705 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 16:17:29,706 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 16:17:29,710 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 16:17:29,711 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 16:17:29,729 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 16:17:29,730 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 16:17:30,281 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 16:17:30,285 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '5285dd7a-7a13-4ccd-aaca-886c58e88138': getConnection()...
2018-11-21 16:17:30,285 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '5285dd7a-7a13-4ccd-aaca-886c58e88138': init...
2018-11-21 16:17:30,286 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '5285dd7a-7a13-4ccd-aaca-886c58e88138': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=5285dd7a-7a13-4ccd-aaca-886c58e88138, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 16:17:30,379 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:17:30,379 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 16:17:30,380 com.csft.product.dao.ProductDao [main] (ProductDao.java:48) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 16:17:30,381 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:17:30,381 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:17:30,381 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 16:17:30,402 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:17:30,403 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 16:17:30,404 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 16:17:30,404 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:17:30,404 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 16:18:42,642 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 16:18:42,647 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 16:18:42,708 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 16:18:42,837 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 16:18:42,837 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 16:18:42,860 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 16:18:42,861 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 16:18:42,865 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 16:18:42,870 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 16:18:42,870 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 16:18:42,871 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 16:18:42,872 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 16:18:42,874 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 16:18:42,874 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 16:18:42,876 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 16:18:42,876 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 16:18:42,879 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 16:18:42,884 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 16:18:42,888 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 16:18:42,898 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 16:18:42,908 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 16:18:42,915 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 16:18:42,926 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 16:18:42,930 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 16:18:42,933 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 16:18:42,952 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 16:18:42,953 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 16:18:42,955 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 16:18:42,956 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 16:18:42,959 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 16:18:42,962 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 16:18:42,973 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 16:18:42,975 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 16:18:42,975 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 16:18:42,994 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.093s)
2018-11-21 16:18:42,997 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 16:18:43,014 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 16:18:43,014 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 16:18:43,020 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 16:18:43,021 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 16:18:43,040 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 16:18:43,041 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 16:18:43,592 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 16:18:43,597 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd9c9b7b0-b441-4aaa-a575-67ec7aecaf81': getConnection()...
2018-11-21 16:18:43,597 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd9c9b7b0-b441-4aaa-a575-67ec7aecaf81': init...
2018-11-21 16:18:43,598 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd9c9b7b0-b441-4aaa-a575-67ec7aecaf81': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=d9c9b7b0-b441-4aaa-a575-67ec7aecaf81, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 16:18:43,694 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:18:43,694 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 16:18:43,695 com.csft.product.dao.ProductDao [main] (ProductDao.java:48) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 16:18:43,696 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:18:43,696 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:18:43,696 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 16:18:43,716 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:18:43,717 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 16:18:43,719 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 16:18:43,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 16:18:43,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 17:00:40,489 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:00:40,494 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:00:40,537 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:00:40,668 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:00:40,668 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:00:40,698 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:00:40,698 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:00:40,704 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:00:40,709 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:00:40,710 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 17:00:40,711 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:00:40,713 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:00:40,717 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:00:40,718 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:00:40,719 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:00:40,720 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:00:40,722 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:00:40,732 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:00:40,743 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:00:40,758 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:00:40,771 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:00:40,780 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:00:40,790 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:00:40,797 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:00:40,799 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:00:40,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:00:40,821 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:00:40,832 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:00:40,834 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:00:40,839 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:00:40,841 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:00:40,847 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:00:40,851 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:00:40,851 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:00:40,867 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.107s)
2018-11-21 17:00:40,871 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:00:40,883 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:00:40,884 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:00:40,888 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 17:00:40,889 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 17:00:40,908 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:00:40,909 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:00:41,469 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 17:00:41,473 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '85ce801e-ba72-462d-ba3a-ab30a7646546': getConnection()...
2018-11-21 17:00:41,473 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '85ce801e-ba72-462d-ba3a-ab30a7646546': init...
2018-11-21 17:00:41,474 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '85ce801e-ba72-462d-ba3a-ab30a7646546': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=85ce801e-ba72-462d-ba3a-ab30a7646546, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:00:41,572 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:00:41,573 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 17:00:41,573 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@57d5872c
2018-11-21 17:00:41,574 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:00:41,574 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:00:41,574 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 17:00:41,617 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:00:41,618 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 17:00:41,638 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 17:00:41,639 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:00:41,639 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 17:01:14,009 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:01:14,014 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:01:14,059 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:01:14,185 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:01:14,186 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:01:14,211 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:01:14,211 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:01:14,216 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:01:14,221 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:01:14,221 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 17:01:14,222 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:01:14,223 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:01:14,226 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:01:14,226 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:01:14,228 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:01:14,228 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:01:14,231 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:01:14,236 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:01:14,241 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:01:14,259 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:01:14,268 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:01:14,274 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:01:14,276 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:01:14,280 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:01:14,284 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:01:14,293 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:01:14,295 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:01:14,316 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:01:14,318 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:01:14,331 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:01:14,334 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:01:14,338 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:01:14,341 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:01:14,341 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:01:14,357 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.096s)
2018-11-21 17:01:14,360 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:01:14,370 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:01:14,371 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:01:14,375 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 17:01:14,376 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 17:01:14,399 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:01:14,400 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:01:14,959 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '2bfb8a44-3f8b-4c92-804b-b7689a0acc80': getConnection()...
2018-11-21 17:01:14,959 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '2bfb8a44-3f8b-4c92-804b-b7689a0acc80': init...
2018-11-21 17:01:14,960 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '2bfb8a44-3f8b-4c92-804b-b7689a0acc80': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=2bfb8a44-3f8b-4c92-804b-b7689a0acc80, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:01:15,115 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:01:15,116 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 17:01:15,117 com.csft.product.dao.ProductDao [main] (ProductDao.java:95) DEBUG --> update product where id=fa1d7dca8551455699a545c07e28e41d
2018-11-21 17:01:15,117 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:01:15,117 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:01:15,117 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 17:01:15,130 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:01:15,130 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:01:15,131 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 17:01:15,135 com.csft.product.dao.ProductDao [main] (ProductDao.java:119) ERROR --> local sql error :{}No output result.
2018-11-21 17:01:15,135 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{returnCode=500, error=Failed to update products!}
2018-11-21 17:01:15,136 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:01:15,136 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 17:05:10,452 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:05:10,458 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:05:10,505 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:05:10,654 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:05:10,655 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:05:10,686 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:05:10,687 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:05:10,694 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:05:10,703 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:05:10,703 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-21 17:05:10,704 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:05:10,705 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:05:10,709 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:05:10,709 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:05:10,712 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:05:10,712 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:05:10,716 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:05:10,726 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:05:10,734 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:05:10,755 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:05:10,777 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:05:10,789 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:05:10,792 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:05:10,797 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:05:10,800 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:05:10,814 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:05:10,815 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:05:10,821 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:05:10,822 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:05:10,826 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:05:10,827 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:05:10,842 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:05:10,857 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:05:10,858 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:05:10,884 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.125s)
2018-11-21 17:05:10,889 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:05:10,904 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:05:10,905 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:05:10,914 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 17:05:10,914 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 17:05:11,000 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:05:11,001 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:05:11,561 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '7ad61caf-e7b7-43d6-aa37-7632a19c8b00': getConnection()...
2018-11-21 17:05:11,562 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7ad61caf-e7b7-43d6-aa37-7632a19c8b00': init...
2018-11-21 17:05:11,563 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7ad61caf-e7b7-43d6-aa37-7632a19c8b00': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=7ad61caf-e7b7-43d6-aa37-7632a19c8b00, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:05:11,694 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: WARNING: transaction manager not running?
2018-11-21 17:05:11,694 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: calling setAutoCommit(false)...
2018-11-21 17:05:11,695 com.csft.product.dao.ProductDao [main] (ProductDao.java:95) DEBUG --> update product where id=fa1d7dca8551455699a545c07e28e41d
2018-11-21 17:05:11,696 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: WARNING: transaction manager not running?
2018-11-21 17:05:11,696 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: WARNING: transaction manager not running?
2018-11-21 17:05:11,696 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 17:05:11,712 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: WARNING: transaction manager not running?
2018-11-21 17:05:11,712 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: WARNING: transaction manager not running?
2018-11-21 17:05:11,712 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1787f2a0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 17:08:22,141 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '7ad61caf-e7b7-43d6-aa37-7632a19c8b00': getConnection()...
2018-11-21 17:08:22,142 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7ad61caf-e7b7-43d6-aa37-7632a19c8b00': init...
2018-11-21 17:08:22,146 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5e17553a: WARNING: transaction manager not running?
2018-11-21 17:08:22,146 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5e17553a: calling setAutoCommit(false)...
2018-11-21 17:08:22,147 com.csft.product.dao.ProductDao [main] (ProductDao.java:96) DEBUG --> update product where id=fa1d7dca8551455699a545c07e28e41d
2018-11-21 17:08:22,147 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5e17553a: WARNING: transaction manager not running?
2018-11-21 17:08:22,148 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5e17553a: WARNING: transaction manager not running?
2018-11-21 17:08:22,148 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5e17553a: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 17:08:25,168 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{msg=Success delete, resultCode=200}
2018-11-21 17:08:25,169 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5e17553a: WARNING: transaction manager not running?
2018-11-21 17:08:25,170 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@5e17553a: close()...
2018-11-21 17:08:54,130 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:08:54,135 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:08:54,177 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:08:54,315 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:08:54,316 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:08:54,356 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:08:54,357 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:08:54,364 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:08:54,372 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:08:54,372 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 17:08:54,373 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:08:54,374 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:08:54,377 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:08:54,378 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:08:54,381 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:08:54,381 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:08:54,383 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:08:54,390 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:08:54,397 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:08:54,414 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:08:54,427 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:08:54,439 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:08:54,442 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:08:54,446 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:08:54,450 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:08:54,474 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:08:54,480 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:08:54,496 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:08:54,506 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:08:54,521 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:08:54,523 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:08:54,533 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:08:54,543 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:08:54,544 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:08:54,619 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.202s)
2018-11-21 17:08:54,622 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:08:54,631 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:08:54,632 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:08:54,637 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 17:08:54,637 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 17:08:54,657 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:08:54,659 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:08:55,235 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '4b760f3e-a5f2-4c1c-b0f5-cb25aac41462': getConnection()...
2018-11-21 17:08:55,235 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '4b760f3e-a5f2-4c1c-b0f5-cb25aac41462': init...
2018-11-21 17:08:55,236 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '4b760f3e-a5f2-4c1c-b0f5-cb25aac41462': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=4b760f3e-a5f2-4c1c-b0f5-cb25aac41462, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:08:55,336 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:08:55,336 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 17:08:55,337 com.csft.product.dao.ProductDao [main] (ProductDao.java:96) DEBUG --> update product where id=fa1d7dca8551455699a545c07e28e41d
2018-11-21 17:08:55,338 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:08:55,338 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:08:55,338 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 17:08:55,356 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{msg=Success delete, resultCode=200}
2018-11-21 17:08:55,357 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:08:55,357 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 17:09:33,651 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:09:33,655 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:09:33,697 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:09:33,823 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:09:33,823 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:09:33,848 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:09:33,849 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:09:33,855 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:09:33,861 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:09:33,861 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 17:09:33,862 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:09:33,863 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:09:33,865 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:09:33,866 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:09:33,870 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:09:33,870 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:09:33,872 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:09:33,881 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:09:33,887 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:09:33,901 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:09:33,913 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:09:33,926 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:09:33,944 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:09:33,950 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:09:33,953 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:09:33,982 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:09:33,983 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:09:34,001 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:09:34,006 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:09:34,016 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:09:34,018 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:09:34,022 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:09:34,025 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:09:34,025 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:09:34,043 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.140s)
2018-11-21 17:09:34,046 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:09:34,057 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:09:34,059 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:09:34,065 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 17:09:34,065 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 17:09:34,089 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:09:34,090 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:09:34,639 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '6bb24b2e-6c52-44c0-90b2-062ae7ced614': getConnection()...
2018-11-21 17:09:34,640 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '6bb24b2e-6c52-44c0-90b2-062ae7ced614': init...
2018-11-21 17:09:34,640 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '6bb24b2e-6c52-44c0-90b2-062ae7ced614': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=6bb24b2e-6c52-44c0-90b2-062ae7ced614, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:09:34,737 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:09:34,737 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 17:09:34,738 com.csft.product.dao.ProductDao [main] (ProductDao.java:96) DEBUG --> update product where id=fa1d7dca8551455699a545c07e28e41d
2018-11-21 17:09:34,739 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:09:34,739 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:09:34,739 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 17:09:34,760 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{msg=Success delete, resultCode=200}
2018-11-21 17:09:34,761 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:09:34,761 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 17:12:28,060 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:12:28,065 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:12:28,121 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:12:28,273 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:12:28,273 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:12:28,302 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:12:28,303 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:12:28,311 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:12:28,318 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:12:28,319 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 17:12:28,320 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:12:28,322 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:12:28,326 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:12:28,326 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:12:28,329 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:12:28,330 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:12:28,334 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:12:28,341 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:12:28,350 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:12:28,365 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:12:28,379 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:12:28,386 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:12:28,389 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:12:28,392 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:12:28,395 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:12:28,406 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:12:28,408 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:12:28,411 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:12:28,413 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:12:28,419 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:12:28,421 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:12:28,424 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:12:28,430 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:12:28,430 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:12:28,458 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.089s)
2018-11-21 17:12:28,461 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:12:28,472 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:12:28,473 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:12:28,477 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 17:12:28,477 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:106) DEBUG --> ++++++Test delete  product....
2018-11-21 17:12:28,506 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:12:28,508 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:12:29,080 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '086d7f98-c19b-434d-84a1-b87b4d54e7a1': getConnection()...
2018-11-21 17:12:29,080 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '086d7f98-c19b-434d-84a1-b87b4d54e7a1': init...
2018-11-21 17:12:29,081 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '086d7f98-c19b-434d-84a1-b87b4d54e7a1': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=086d7f98-c19b-434d-84a1-b87b4d54e7a1, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:12:29,177 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:12:29,178 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 17:12:29,179 com.csft.product.dao.ProductDao [main] (ProductDao.java:96) DEBUG --> update product where id=fa1d7dca8551455699a545c07e28e41d
2018-11-21 17:12:29,179 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:12:29,179 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:12:29,179 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-21 17:12:29,200 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:12:29,201 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 17:12:29,206 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:114) DEBUG --> update  product result{msg=Success delete, resultCode=200}
2018-11-21 17:12:29,206 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:12:29,207 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 17:49:33,534 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:49:33,544 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:49:33,617 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:49:33,787 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:49:33,787 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:49:33,812 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:49:33,812 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:49:33,817 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:49:33,824 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:49:33,824 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 17:49:33,825 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:49:33,826 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:49:33,828 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:49:33,828 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:49:33,830 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:49:33,830 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:49:33,832 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:49:33,839 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:49:33,846 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:49:33,859 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:49:33,872 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:49:33,879 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:49:33,882 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:49:33,893 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:49:33,895 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:49:33,919 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:49:33,921 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:49:33,924 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:49:33,926 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:49:33,936 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:49:33,937 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:49:33,942 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:49:33,944 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:49:33,945 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:49:33,963 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.100s)
2018-11-21 17:49:33,967 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:49:33,977 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:49:33,978 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:49:33,992 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 17:49:33,993 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 17:49:34,022 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:49:34,023 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:49:34,565 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 17:49:34,568 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'a78d696c-287e-49c8-9cd8-0502609feb2c': getConnection()...
2018-11-21 17:49:34,569 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a78d696c-287e-49c8-9cd8-0502609feb2c': init...
2018-11-21 17:49:34,569 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a78d696c-287e-49c8-9cd8-0502609feb2c': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=a78d696c-287e-49c8-9cd8-0502609feb2c, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:49:34,712 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:49:34,713 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 17:49:34,716 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:49:34,717 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling hashCode...
2018-11-21 17:49:34,717 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'a78d696c-287e-49c8-9cd8-0502609feb2c': getConnection()...
2018-11-21 17:49:34,718 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a78d696c-287e-49c8-9cd8-0502609feb2c': init...
2018-11-21 17:49:34,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 17:49:34,720 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling setAutoCommit(false)...
2018-11-21 17:49:34,724 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 17:49:34,724 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling hashCode...
2018-11-21 17:49:34,725 com.csft.product.dao.ProductDao [main] (ProductDao.java:44) DEBUG --> saving product = com.csft.product.pojo.Product@36f0f1be
2018-11-21 17:49:34,725 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:49:34,725 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:49:34,725 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 17:49:34,752 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:49:34,753 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 17:49:34,765 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 17:49:34,766 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:49:34,766 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 17:50:19,345 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 17:50:19,349 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:50:19,393 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 17:50:19,517 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 17:50:19,517 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 17:50:19,540 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 17:50:19,541 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 17:50:19,546 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 17:50:19,551 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 17:50:19,551 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 17:50:19,552 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 17:50:19,553 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 17:50:19,555 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 17:50:19,555 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 17:50:19,557 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 17:50:19,557 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 17:50:19,558 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 17:50:19,563 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 17:50:19,568 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 17:50:19,590 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 17:50:19,604 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 17:50:19,612 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 17:50:19,614 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 17:50:19,621 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 17:50:19,623 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 17:50:19,648 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 17:50:19,658 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 17:50:19,663 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 17:50:19,664 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 17:50:19,673 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 17:50:19,674 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 17:50:19,678 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 17:50:19,682 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 17:50:19,682 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 17:50:19,704 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.110s)
2018-11-21 17:50:19,712 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 17:50:19,735 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 17:50:19,736 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 17:50:19,742 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 17:50:19,743 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 17:50:19,769 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 17:50:19,771 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 17:50:20,321 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 17:50:20,325 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '92f98968-3a02-462c-9917-458abe862063': getConnection()...
2018-11-21 17:50:20,325 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '92f98968-3a02-462c-9917-458abe862063': init...
2018-11-21 17:50:20,326 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '92f98968-3a02-462c-9917-458abe862063': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=92f98968-3a02-462c-9917-458abe862063, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 17:50:20,438 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:50:20,439 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling setAutoCommit(false)...
2018-11-21 17:50:20,441 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:50:20,441 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling toString...
2018-11-21 17:50:20,442 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '92f98968-3a02-462c-9917-458abe862063': getConnection()...
2018-11-21 17:50:20,442 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '92f98968-3a02-462c-9917-458abe862063': init...
2018-11-21 17:50:20,443 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 17:50:20,444 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling setAutoCommit(false)...
2018-11-21 17:50:20,445 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-21 17:50:20,445 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling toString...
2018-11-21 17:50:20,445 com.csft.product.dao.ProductDao [main] (ProductDao.java:46) DEBUG --> saving product = com.csft.product.pojo.Product@36f0f1be
2018-11-21 17:50:20,446 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:50:20,446 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:50:20,446 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 17:50:20,462 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:50:20,462 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling commit...
2018-11-21 17:50:20,465 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 17:50:20,465 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-21 17:50:20,465 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-21 18:28:24,221 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:28:24,226 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:28:24,279 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:28:24,410 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:28:24,411 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:28:24,437 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:28:24,438 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:28:24,443 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:28:24,448 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:28:24,448 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 18:28:24,449 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:28:24,450 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:28:24,452 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:28:24,453 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:28:24,454 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:28:24,455 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:28:24,456 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:28:24,461 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:28:24,466 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:28:24,479 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:28:24,489 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:28:24,497 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:28:24,509 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:28:24,515 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:28:24,519 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:28:24,535 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:28:24,536 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:28:24,538 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:28:24,539 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:28:24,546 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:28:24,547 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:28:24,551 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:28:24,555 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:28:24,556 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:28:24,589 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.106s)
2018-11-21 18:28:24,600 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:28:24,611 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:28:24,612 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:28:24,618 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 18:28:24,618 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:53) DEBUG --> ++++++Test save product ....
2018-11-21 18:28:24,639 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:28:24,640 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:28:25,150 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:60) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:28:25,154 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@5cdd8682
2018-11-21 18:28:25,156 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:28:25,156 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'dc20dbdb-f21c-41fd-8ec1-528dd8da32af': getConnection()...
2018-11-21 18:28:25,156 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'dc20dbdb-f21c-41fd-8ec1-528dd8da32af': init...
2018-11-21 18:28:25,157 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'dc20dbdb-f21c-41fd-8ec1-528dd8da32af': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=dc20dbdb-f21c-41fd-8ec1-528dd8da32af, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:28:25,254 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 18:28:25,254 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-21 18:28:25,255 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:28:25,278 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:63) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:30:47,864 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:30:47,868 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:30:47,913 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:30:48,043 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:30:48,043 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:30:48,068 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:30:48,069 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:30:48,074 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:30:48,079 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:30:48,079 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-21 18:30:48,080 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:30:48,081 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:30:48,083 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:30:48,083 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:30:48,085 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:30:48,085 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:30:48,087 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:30:48,093 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:30:48,100 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:30:48,116 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:30:48,132 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:30:48,140 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:30:48,146 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:30:48,151 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:30:48,154 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:30:48,193 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:30:48,194 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:30:48,197 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:30:48,198 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:30:48,202 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:30:48,203 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:30:48,205 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:30:48,207 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:30:48,208 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:30:48,222 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.103s)
2018-11-21 18:30:48,225 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:30:48,234 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:30:48,235 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:30:48,240 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-21 18:30:48,241 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-21 18:30:48,268 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:30:48,269 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:30:48,815 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '90d69783-bfd5-4c7d-8345-41b86568fe23': getConnection()...
2018-11-21 18:30:48,816 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '90d69783-bfd5-4c7d-8345-41b86568fe23': init...
2018-11-21 18:30:48,816 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '90d69783-bfd5-4c7d-8345-41b86568fe23': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=90d69783-bfd5-4c7d-8345-41b86568fe23, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:30:48,919 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 18:30:48,919 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling getAutoCommit...
2018-11-21 18:30:48,919 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-21 18:30:48,920 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling setAutoCommit(false)...
2018-11-21 18:30:48,931 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:30:48,933 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:64) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:30:48,936 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@667a738
2018-11-21 18:30:48,936 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '835e07ac-0bde-49d4-8182-1793b8810d8e': getConnection()...
2018-11-21 18:30:48,937 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '835e07ac-0bde-49d4-8182-1793b8810d8e': init...
2018-11-21 18:30:48,938 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@157632c9: WARNING: transaction manager not running?
2018-11-21 18:30:48,938 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@157632c9: WARNING: transaction manager not running?
2018-11-21 18:30:48,938 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@157632c9: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:30:48,955 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:67) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:33:14,113 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:33:14,118 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:33:14,167 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:33:14,305 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:33:14,305 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:33:14,335 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:33:14,336 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:33:14,342 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:33:14,348 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:33:14,348 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-21 18:33:14,349 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:33:14,350 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:33:14,353 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:33:14,354 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:33:14,355 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:33:14,355 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:33:14,358 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:33:14,367 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:33:14,378 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:33:14,393 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:33:14,405 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:33:14,413 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:33:14,417 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:33:14,426 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:33:14,432 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:33:14,444 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:33:14,460 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:33:14,465 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:33:14,467 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:33:14,472 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:33:14,473 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:33:14,476 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:33:14,479 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:33:14,481 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:33:14,502 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.105s)
2018-11-21 18:33:14,505 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:33:14,516 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:33:14,517 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:33:14,523 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 18:33:14,523 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-21 18:33:14,565 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:33:14,566 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:33:30,897 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '242888f4-dc8b-4328-8843-3a81bed90e54': getConnection()...
2018-11-21 18:33:30,898 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '242888f4-dc8b-4328-8843-3a81bed90e54': init...
2018-11-21 18:33:30,900 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '242888f4-dc8b-4328-8843-3a81bed90e54': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=242888f4-dc8b-4328-8843-3a81bed90e54, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:33:40,358 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: WARNING: transaction manager not running?
2018-11-21 18:33:40,359 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: calling getAutoCommit...
2018-11-21 18:33:41,779 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: WARNING: transaction manager not running?
2018-11-21 18:33:41,779 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: calling setAutoCommit(false)...
2018-11-21 18:33:47,504 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:34:00,217 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:34:02,286 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@7de62196
2018-11-21 18:34:03,472 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'a267d5ec-d811-40f7-8011-ef19c26a0a1f': getConnection()...
2018-11-21 18:34:03,472 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a267d5ec-d811-40f7-8011-ef19c26a0a1f': init...
2018-11-21 18:34:03,479 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: WARNING: transaction manager not running?
2018-11-21 18:34:03,480 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: WARNING: transaction manager not running?
2018-11-21 18:34:03,480 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:34:03,513 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:35:57,711 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:35:57,717 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:35:57,768 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:35:57,904 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:35:57,905 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:35:57,931 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:35:57,931 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:35:57,936 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:35:57,942 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:35:57,942 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-21 18:35:57,943 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:35:57,944 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:35:57,946 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:35:57,946 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:35:57,949 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:35:57,949 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:35:57,951 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:35:57,957 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:35:57,970 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:35:57,989 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:35:58,003 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:35:58,012 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:35:58,014 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:35:58,022 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:35:58,026 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:35:58,054 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:35:58,056 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:35:58,060 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:35:58,062 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:35:58,064 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:35:58,065 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:35:58,070 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:35:58,076 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:35:58,076 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:35:58,123 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.130s)
2018-11-21 18:35:58,127 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:35:58,140 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:35:58,142 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:35:58,148 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-21 18:35:58,148 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-21 18:35:58,227 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:35:58,234 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:36:11,731 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '47c8b2cb-1198-40c5-bf5a-5bbf20f8550a': getConnection()...
2018-11-21 18:36:11,733 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '47c8b2cb-1198-40c5-bf5a-5bbf20f8550a': init...
2018-11-21 18:36:11,734 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '47c8b2cb-1198-40c5-bf5a-5bbf20f8550a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=47c8b2cb-1198-40c5-bf5a-5bbf20f8550a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:36:13,772 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: WARNING: transaction manager not running?
2018-11-21 18:36:13,774 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: calling toString...
2018-11-21 18:36:32,006 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: WARNING: transaction manager not running?
2018-11-21 18:36:32,007 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: calling getAutoCommit...
2018-11-21 18:36:32,007 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: WARNING: transaction manager not running?
2018-11-21 18:36:32,008 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@18ece7f4: calling setAutoCommit(false)...
2018-11-21 18:36:35,898 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:36:39,342 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:36:48,815 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@7de62196
2018-11-21 18:37:14,661 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '7920becf-8b01-44de-9bdf-733c913eac9b': getConnection()...
2018-11-21 18:37:14,663 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7920becf-8b01-44de-9bdf-733c913eac9b': init...
2018-11-21 18:37:20,243 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: WARNING: transaction manager not running?
2018-11-21 18:37:20,245 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: calling toString...
2018-11-21 18:37:22,762 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: WARNING: transaction manager not running?
2018-11-21 18:37:22,762 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: WARNING: transaction manager not running?
2018-11-21 18:37:22,762 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@51bf5add: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:37:22,795 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:37:58,784 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:128) DEBUG --> ++++++Test save product ....
2018-11-21 18:37:58,868 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:38:25,358 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:38:25,361 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:38:25,411 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:38:25,582 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:38:25,582 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:38:25,620 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:38:25,620 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:38:25,626 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:38:25,633 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:38:25,634 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:38:25,635 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:38:25,635 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:38:25,640 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:38:25,641 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:38:25,643 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:38:25,643 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:38:25,646 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:38:25,656 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:38:25,663 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:38:25,679 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:38:25,695 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:38:25,705 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:38:25,708 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:38:25,711 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:38:25,714 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:38:25,720 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:38:25,721 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:38:25,724 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:38:25,725 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:38:25,729 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:38:25,730 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:38:25,734 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:38:25,736 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:38:25,737 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:38:25,784 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.085s)
2018-11-21 18:38:25,789 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:38:25,801 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:38:25,803 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:38:25,809 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:38:25,809 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:38:25,832 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:38:25,833 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:38:26,365 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '81d83587-2ed8-4f3e-9b00-a0ebea496efb': getConnection()...
2018-11-21 18:38:26,365 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '81d83587-2ed8-4f3e-9b00-a0ebea496efb': init...
2018-11-21 18:38:26,366 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '81d83587-2ed8-4f3e-9b00-a0ebea496efb': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=81d83587-2ed8-4f3e-9b00-a0ebea496efb, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:38:26,462 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:38:26,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:38:26,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:38:26,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:38:26,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:38:26,463 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:38:26,467 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:38:26,469 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:153) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:38:26,472 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:38:26,473 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'a91084c4-32a1-45b0-85c3-945ad6e86956': getConnection()...
2018-11-21 18:38:26,473 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a91084c4-32a1-45b0-85c3-945ad6e86956': init...
2018-11-21 18:38:26,474 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:38:26,475 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: calling toString...
2018-11-21 18:38:26,475 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:38:26,475 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:38:26,475 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:38:26,498 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:156) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:38:48,119 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:38:48,121 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:38:48,170 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:38:48,328 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:38:48,328 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:38:48,350 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:38:48,350 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:38:48,356 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:38:48,363 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:38:48,363 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:38:48,364 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:38:48,364 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:38:48,366 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:38:48,367 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:38:48,369 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:38:48,369 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:38:48,372 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:38:48,378 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:38:48,385 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:38:48,411 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:38:48,429 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:38:48,435 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:38:48,437 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:38:48,442 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:38:48,444 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:38:48,453 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:38:48,459 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:38:48,465 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:38:48,468 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:38:48,474 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:38:48,482 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:38:48,485 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:38:48,487 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:38:48,488 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:38:48,519 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.092s)
2018-11-21 18:38:48,539 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:38:48,550 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:38:48,551 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:38:48,555 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:38:48,556 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:38:48,578 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:38:48,580 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:38:49,136 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'b56ca485-0aff-493e-94a0-b50d796f8c88': getConnection()...
2018-11-21 18:38:49,136 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b56ca485-0aff-493e-94a0-b50d796f8c88': init...
2018-11-21 18:38:49,136 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b56ca485-0aff-493e-94a0-b50d796f8c88': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=b56ca485-0aff-493e-94a0-b50d796f8c88, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:38:49,234 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:38:49,234 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:38:49,235 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:38:49,235 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:38:49,235 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:38:49,235 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:38:49,239 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:38:49,240 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:153) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:38:49,246 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:38:49,247 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '55f05e50-c5dc-46a6-9e1f-5905a3572eff': getConnection()...
2018-11-21 18:38:49,247 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '55f05e50-c5dc-46a6-9e1f-5905a3572eff': init...
2018-11-21 18:38:49,251 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:38:49,251 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: calling toString...
2018-11-21 18:38:49,252 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:38:49,252 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:38:49,252 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:38:49,270 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:156) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:42:09,509 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:42:09,512 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:42:09,584 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:42:09,731 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:42:09,731 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:42:09,759 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:42:09,760 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:42:09,767 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:42:09,773 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:42:09,773 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:42:09,774 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:42:09,775 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:42:09,778 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:42:09,778 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:42:09,779 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:42:09,780 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:42:09,781 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:42:09,789 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:42:09,797 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:42:09,813 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:42:09,826 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:42:09,833 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:42:09,836 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:42:09,839 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:42:09,841 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:42:09,850 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:42:09,852 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:42:09,858 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:42:09,860 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:42:09,863 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:42:09,864 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:42:09,867 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:42:09,869 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:42:09,869 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:42:09,903 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.073s)
2018-11-21 18:42:09,907 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:42:09,927 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:42:09,928 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:42:09,934 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:42:09,935 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:42:09,960 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:42:09,961 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:42:10,481 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '128f0de1-1045-43d6-b8ab-f5bc5ec79eb0': getConnection()...
2018-11-21 18:42:10,482 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '128f0de1-1045-43d6-b8ab-f5bc5ec79eb0': init...
2018-11-21 18:42:10,482 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '128f0de1-1045-43d6-b8ab-f5bc5ec79eb0': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=128f0de1-1045-43d6-b8ab-f5bc5ec79eb0, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:42:10,594 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:42:10,595 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:42:10,596 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:42:10,597 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:42:10,597 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:42:10,597 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:42:10,603 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:42:10,605 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:153) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:42:10,610 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:42:10,610 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd78b81d2-f71c-4758-bfea-1460905d2b30': getConnection()...
2018-11-21 18:42:10,610 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd78b81d2-f71c-4758-bfea-1460905d2b30': init...
2018-11-21 18:42:10,611 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:42:10,612 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: calling toString...
2018-11-21 18:42:10,612 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:42:10,612 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: WARNING: transaction manager not running?
2018-11-21 18:42:10,612 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@3d8314f0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:42:10,638 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:156) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:43:37,051 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:43:37,055 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:43:37,122 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:43:37,265 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:43:37,265 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:43:37,289 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:43:37,289 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:43:37,294 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:43:37,298 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:43:37,299 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:43:37,299 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:43:37,300 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:43:37,302 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:43:37,302 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:43:37,304 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:43:37,304 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:43:37,307 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:43:37,313 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:43:37,319 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:43:37,337 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:43:37,348 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:43:37,355 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:43:37,358 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:43:37,362 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:43:37,368 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:43:37,380 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:43:37,385 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:43:37,389 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:43:37,392 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:43:37,397 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:43:37,398 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:43:37,401 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:43:37,403 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:43:37,404 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:43:37,430 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.082s)
2018-11-21 18:43:37,434 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:43:37,447 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:43:37,449 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:43:37,453 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:43:37,454 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:43:37,485 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:43:37,487 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:43:38,066 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '4b3d8459-8828-4d8a-a135-c4ba235644c6': getConnection()...
2018-11-21 18:43:38,067 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '4b3d8459-8828-4d8a-a135-c4ba235644c6': init...
2018-11-21 18:43:38,068 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '4b3d8459-8828-4d8a-a135-c4ba235644c6': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=4b3d8459-8828-4d8a-a135-c4ba235644c6, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:43:38,163 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:43:38,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:43:38,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:43:38,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:43:38,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:43:38,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:43:38,168 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:43:38,169 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:153) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:43:38,173 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:43:38,174 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:43:38,174 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:43:38,174 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:43:38,174 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:43:38,174 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:43:38,189 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:156) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:44:08,081 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:44:08,084 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:08,146 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:44:08,292 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:44:08,292 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:44:08,317 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:44:08,318 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:44:08,325 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:44:08,330 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:44:08,330 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:44:08,331 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:44:08,331 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:44:08,333 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:44:08,334 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:44:08,336 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:44:08,336 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:44:08,338 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:44:08,343 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:44:08,351 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:44:08,376 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:44:08,389 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:44:08,394 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:44:08,397 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:44:08,399 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:44:08,401 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:44:08,409 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:44:08,410 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:44:08,418 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:44:08,420 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:44:08,428 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:44:08,430 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:44:08,434 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:44:08,436 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:44:08,436 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:44:08,463 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.074s)
2018-11-21 18:44:08,467 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:44:08,480 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:44:08,481 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:44:08,487 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:44:08,487 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:44:08,511 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:44:08,512 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:09,051 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd489266d-a7a7-4f85-8d81-dba7bb62f142': getConnection()...
2018-11-21 18:44:09,051 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd489266d-a7a7-4f85-8d81-dba7bb62f142': init...
2018-11-21 18:44:09,052 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd489266d-a7a7-4f85-8d81-dba7bb62f142': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=d489266d-a7a7-4f85-8d81-dba7bb62f142, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:44:09,162 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,162 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:09,162 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,162 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:44:09,163 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,163 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:44:09,167 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:09,168 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,169 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:09,169 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,169 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:44:09,169 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,169 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling commit...
2018-11-21 18:44:09,170 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:153) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:44:09,173 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:44:09,177 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,177 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:09,177 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,177 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:09,177 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:44:09,195 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:156) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:44:30,048 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:44:30,051 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:30,109 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:44:30,254 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:44:30,255 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:44:30,278 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:44:30,279 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:44:30,284 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:44:30,292 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:44:30,292 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:44:30,293 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:44:30,293 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:44:30,296 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:44:30,296 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:44:30,297 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:44:30,298 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:44:30,299 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:44:30,311 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:44:30,321 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:44:30,349 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:44:30,359 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:44:30,366 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:44:30,371 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:44:30,374 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:44:30,377 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:44:30,383 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:44:30,387 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:44:30,392 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:44:30,394 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:44:30,399 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:44:30,401 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:44:30,409 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:44:30,412 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:44:30,412 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:44:30,444 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.080s)
2018-11-21 18:44:30,448 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:44:30,468 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:44:30,469 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:44:30,474 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:44:30,475 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:44:30,499 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:44:30,500 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:31,064 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'cd5478b1-0d15-4354-9f8a-3585cc72a45f': getConnection()...
2018-11-21 18:44:31,065 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'cd5478b1-0d15-4354-9f8a-3585cc72a45f': init...
2018-11-21 18:44:31,067 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'cd5478b1-0d15-4354-9f8a-3585cc72a45f': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=cd5478b1-0d15-4354-9f8a-3585cc72a45f, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:44:31,159 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,159 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:31,159 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,159 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:44:31,159 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,160 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:44:31,163 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:31,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:31,164 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,165 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:44:31,165 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,165 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling commit...
2018-11-21 18:44:31,166 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:44:31,170 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:44:31,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:31,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:31,171 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:44:31,190 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:44:54,060 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:44:54,063 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:54,111 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:44:54,258 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:44:54,259 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:44:54,282 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:44:54,283 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:44:54,290 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:44:54,296 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:44:54,297 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:44:54,297 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:44:54,297 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:44:54,300 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:44:54,300 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:44:54,302 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:44:54,302 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:44:54,303 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:44:54,308 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:44:54,315 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:44:54,335 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:44:54,351 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:44:54,360 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:44:54,363 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:44:54,366 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:44:54,368 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:44:54,380 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:44:54,381 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:44:54,387 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:44:54,388 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:44:54,392 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:44:54,393 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:44:54,399 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:44:54,402 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:44:54,403 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:44:54,432 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.083s)
2018-11-21 18:44:54,438 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:44:54,461 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:44:54,463 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:44:54,471 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:44:54,471 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:44:54,497 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:44:54,498 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:55,043 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '7af13e14-1b58-457b-b194-8a5af5e02ea2': getConnection()...
2018-11-21 18:44:55,043 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7af13e14-1b58-457b-b194-8a5af5e02ea2': init...
2018-11-21 18:44:55,043 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7af13e14-1b58-457b-b194-8a5af5e02ea2': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=7af13e14-1b58-457b-b194-8a5af5e02ea2, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:44:55,143 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,144 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:55,145 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,145 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:44:55,146 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,146 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:44:55,149 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:44:55,150 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,151 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:55,151 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,151 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:44:55,151 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,151 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling commit...
2018-11-21 18:44:55,151 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:44:55,155 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:44:55,156 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,156 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:44:55,156 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,156 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:44:55,157 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:44:55,171 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:46:20,233 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:46:20,236 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:46:20,285 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:46:20,449 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:46:20,449 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:46:20,481 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:46:20,481 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:46:20,488 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:46:20,493 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:46:20,493 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-21 18:46:20,494 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:46:20,495 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:46:20,497 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:46:20,498 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:46:20,499 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:46:20,500 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:46:20,503 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:46:20,510 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:46:20,519 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:46:20,537 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:46:20,549 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:46:20,556 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:46:20,558 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:46:20,562 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:46:20,565 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:46:20,572 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:46:20,573 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:46:20,578 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:46:20,579 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:46:20,598 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:46:20,599 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:46:20,603 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:46:20,606 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:46:20,606 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:46:20,647 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.090s)
2018-11-21 18:46:20,653 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:46:20,673 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:46:20,675 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:46:20,682 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 37 of 180M
2018-11-21 18:46:20,682 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:46:20,757 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:46:20,766 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:46:33,698 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '81cb5cee-9375-4ed4-9edb-c62747aef1ad': getConnection()...
2018-11-21 18:46:33,699 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '81cb5cee-9375-4ed4-9edb-c62747aef1ad': init...
2018-11-21 18:46:33,700 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '81cb5cee-9375-4ed4-9edb-c62747aef1ad': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=81cb5cee-9375-4ed4-9edb-c62747aef1ad, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:46:38,034 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:46:38,035 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling toString...
2018-11-21 18:46:41,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:46:41,398 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling toString...
2018-11-21 18:46:41,398 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:46:41,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling getAutoCommit...
2018-11-21 18:46:41,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:46:41,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling setAutoCommit(false)...
2018-11-21 18:46:41,442 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:46:50,394 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:46:50,394 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling toString...
2018-11-21 18:46:57,071 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:46:57,073 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling toString...
2018-11-21 18:47:02,776 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:47:02,778 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling getAutoCommit...
2018-11-21 18:47:06,708 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:47:06,709 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling toString...
2018-11-21 18:47:11,688 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:47:11,690 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling commit...
2018-11-21 18:47:16,645 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:47:20,703 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@54a7079e
2018-11-21 18:47:31,265 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:47:31,266 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling toString...
2018-11-21 18:47:31,266 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:47:31,266 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: WARNING: transaction manager not running?
2018-11-21 18:47:31,267 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@36916eb0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:47:31,297 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:48:04,496 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:48:04,498 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:48:04,547 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:48:04,736 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:48:04,737 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:48:04,775 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:48:04,776 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:48:04,780 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:48:04,785 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:48:04,785 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:48:04,786 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:48:04,786 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:48:04,789 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:48:04,789 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:48:04,791 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:48:04,791 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:48:04,797 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:48:04,803 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:48:04,811 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:48:04,830 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:48:04,840 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:48:04,847 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:48:04,848 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:48:04,852 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:48:04,855 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:48:04,861 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:48:04,862 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:48:04,867 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:48:04,868 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:48:04,873 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:48:04,875 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:48:04,878 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:48:04,881 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:48:04,881 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:48:04,911 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.064s)
2018-11-21 18:48:04,915 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:48:04,929 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:48:04,930 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:48:04,936 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:48:04,936 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:48:04,960 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:48:04,961 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:48:05,480 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '5f259e8c-c164-4d61-b525-38320d9d03cc': getConnection()...
2018-11-21 18:48:05,480 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '5f259e8c-c164-4d61-b525-38320d9d03cc': init...
2018-11-21 18:48:05,480 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '5f259e8c-c164-4d61-b525-38320d9d03cc': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=5f259e8c-c164-4d61-b525-38320d9d03cc, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:48:05,576 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,577 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:48:05,578 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,579 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:48:05,579 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,579 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:48:05,597 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:48:05,600 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:48:05,607 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:48:05,607 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,607 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:48:05,607 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,607 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,607 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:48:05,622 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:48:05,622 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,622 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:48:05,622 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,623 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:48:05,623 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:05,623 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling commit...
2018-11-21 18:48:29,158 com.csft.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-21 18:48:29,160 com.csft.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:48:29,236 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-21 18:48:29,408 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-21 18:48:29,408 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-21 18:48:29,488 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-21 18:48:29,489 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-21 18:48:29,495 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-21 18:48:29,499 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-21 18:48:29,500 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-21 18:48:29,500 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-21 18:48:29,501 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-21 18:48:29,503 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-21 18:48:29,503 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-21 18:48:29,505 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-21 18:48:29,505 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-21 18:48:29,507 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-21 18:48:29,515 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-21 18:48:29,523 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-21 18:48:29,602 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-21 18:48:29,615 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-21 18:48:29,621 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-21 18:48:29,624 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-21 18:48:29,628 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-21 18:48:29,629 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-21 18:48:29,637 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-21 18:48:29,638 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-21 18:48:29,645 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-21 18:48:29,647 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-21 18:48:29,653 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-21 18:48:29,654 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-21 18:48:29,658 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-21 18:48:29,659 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-21 18:48:29,660 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-21 18:48:29,689 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.068s)
2018-11-21 18:48:29,692 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-21 18:48:29,703 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-21 18:48:29,704 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-21 18:48:29,711 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-21 18:48:29,711 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-21 18:48:29,739 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-21 18:48:29,740 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:48:30,239 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '84d4499c-2cb8-44dd-a31e-d67e45c4c0e3': getConnection()...
2018-11-21 18:48:30,239 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '84d4499c-2cb8-44dd-a31e-d67e45c4c0e3': init...
2018-11-21 18:48:30,240 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '84d4499c-2cb8-44dd-a31e-d67e45c4c0e3': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=84d4499c-2cb8-44dd-a31e-d67e45c4c0e3, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-21 18:48:30,332 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,332 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:48:30,333 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,333 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:48:30,333 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,333 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling setAutoCommit(false)...
2018-11-21 18:48:30,336 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-21 18:48:30,338 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-21 18:48:30,342 com.csft.product.dao.ProductDao [main] (ProductDao.java:41) DEBUG --> saving product = com.csft.product.pojo.Product@76b10754
2018-11-21 18:48:30,342 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,343 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:48:30,343 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,343 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,343 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-21 18:48:30,366 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-21 18:48:30,366 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,367 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling toString...
2018-11-21 18:48:30,367 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,367 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling getAutoCommit...
2018-11-21 18:48:30,367 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,368 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: calling commit...
2018-11-21 18:48:30,392 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: WARNING: transaction manager not running?
2018-11-21 18:48:30,392 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@133e16fd: close()...
2018-11-22 11:03:24,944 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:03:24,944 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:03:24,988 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:03:46,116 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 25 of 180M
2018-11-22 11:03:46,130 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-22 11:03:46,146 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:03:46,146 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:03:46,724 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:03:46,739 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:44) DEBUG --> saving product = com.qloudbiz.product.pojo.Product@57536d79
2018-11-22 11:03:46,739 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:03:46,739 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '7a688e7d-cc37-46b0-a20b-001ecdf5d6ac': getConnection()...
2018-11-22 11:03:46,739 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7a688e7d-cc37-46b0-a20b-001ecdf5d6ac': init...
2018-11-22 11:03:46,739 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '7a688e7d-cc37-46b0-a20b-001ecdf5d6ac': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=7a688e7d-cc37-46b0-a20b-001ecdf5d6ac, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:04:07,803 com.atomikos.jdbc.AtomikosXAConnectionFactory [main] (Slf4jLogger.java:40) WARN  --> XAConnectionFactory: failed to create pooled connection - DBMS down or unreachable?
java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:290)
	at org.mariadb.jdbc.MariaDbDataSource.getXAConnection(MariaDbDataSource.java:474)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:43)
	at com.atomikos.datasource.pool.ConnectionPool.createPooledConnection(ConnectionPool.java:98)
	at com.atomikos.datasource.pool.ConnectionPool.addConnectionsIfMinPoolSizeNotReached(ConnectionPool.java:86)
	at com.atomikos.datasource.pool.ConnectionPool.init(ConnectionPool.java:60)
	at com.atomikos.datasource.pool.ConnectionPool.<init>(ConnectionPool.java:49)
	at com.atomikos.datasource.pool.ConnectionPoolWithConcurrentValidation.<init>(ConnectionPoolWithConcurrentValidation.java:23)
	at com.atomikos.jdbc.AbstractDataSourceBean.init(AbstractDataSourceBean.java:294)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:343)
	at com.qloudfin.sagas.persistence.jdbc.JdbcClient.poolConnect(JdbcClient.java:162)
	at com.qloudbiz.utils.ConnectionUtils.getConnection(ConnectionUtils.java:43)
	at com.qloudbiz.base.dao.BaseDao.callProcUpdate(BaseDao.java:213)
	at com.qloudbiz.product.dao.ProductDao.save(ProductDao.java:51)
	at com.csft.product.dao.test.ProductDaoTest.main(ProductDaoTest.java:156)
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.connException(ExceptionMapper.java:95)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1203)
	at org.mariadb.jdbc.internal.util.Utils.retrieveProxy(Utils.java:560)
	at org.mariadb.jdbc.MariaDbConnection.newConnection(MariaDbConnection.java:174)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:288)
	... 14 more
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connect(AbstractConnectProtocol.java:503)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1195)
	... 17 more
2018-11-22 11:04:28,866 com.atomikos.jdbc.AtomikosXAConnectionFactory [main] (Slf4jLogger.java:40) WARN  --> XAConnectionFactory: failed to create pooled connection - DBMS down or unreachable?
java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:290)
	at org.mariadb.jdbc.MariaDbDataSource.getXAConnection(MariaDbDataSource.java:474)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:43)
	at com.atomikos.datasource.pool.ConnectionPool.createPooledConnection(ConnectionPool.java:98)
	at com.atomikos.datasource.pool.ConnectionPool.addConnectionsIfMinPoolSizeNotReached(ConnectionPool.java:86)
	at com.atomikos.datasource.pool.ConnectionPool.init(ConnectionPool.java:60)
	at com.atomikos.datasource.pool.ConnectionPool.<init>(ConnectionPool.java:49)
	at com.atomikos.datasource.pool.ConnectionPoolWithConcurrentValidation.<init>(ConnectionPoolWithConcurrentValidation.java:23)
	at com.atomikos.jdbc.AbstractDataSourceBean.init(AbstractDataSourceBean.java:294)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:343)
	at com.qloudfin.sagas.persistence.jdbc.JdbcClient.poolConnect(JdbcClient.java:162)
	at com.qloudbiz.utils.ConnectionUtils.getConnection(ConnectionUtils.java:43)
	at com.qloudbiz.base.dao.BaseDao.callProcUpdate(BaseDao.java:213)
	at com.qloudbiz.product.dao.ProductDao.save(ProductDao.java:51)
	at com.csft.product.dao.test.ProductDaoTest.main(ProductDaoTest.java:156)
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.connException(ExceptionMapper.java:95)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1203)
	at org.mariadb.jdbc.internal.util.Utils.retrieveProxy(Utils.java:560)
	at org.mariadb.jdbc.MariaDbConnection.newConnection(MariaDbConnection.java:174)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:288)
	... 14 more
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connect(AbstractConnectProtocol.java:503)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1195)
	... 17 more
2018-11-22 11:04:49,885 com.atomikos.jdbc.AtomikosXAConnectionFactory [main] (Slf4jLogger.java:40) WARN  --> XAConnectionFactory: failed to create pooled connection - DBMS down or unreachable?
java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:290)
	at org.mariadb.jdbc.MariaDbDataSource.getXAConnection(MariaDbDataSource.java:474)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:43)
	at com.atomikos.datasource.pool.ConnectionPool.createPooledConnection(ConnectionPool.java:98)
	at com.atomikos.datasource.pool.ConnectionPool.addConnectionsIfMinPoolSizeNotReached(ConnectionPool.java:86)
	at com.atomikos.datasource.pool.ConnectionPool.init(ConnectionPool.java:60)
	at com.atomikos.datasource.pool.ConnectionPool.<init>(ConnectionPool.java:49)
	at com.atomikos.datasource.pool.ConnectionPoolWithConcurrentValidation.<init>(ConnectionPoolWithConcurrentValidation.java:23)
	at com.atomikos.jdbc.AbstractDataSourceBean.init(AbstractDataSourceBean.java:294)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:343)
	at com.qloudfin.sagas.persistence.jdbc.JdbcClient.poolConnect(JdbcClient.java:162)
	at com.qloudbiz.utils.ConnectionUtils.getConnection(ConnectionUtils.java:43)
	at com.qloudbiz.base.dao.BaseDao.callProcUpdate(BaseDao.java:213)
	at com.qloudbiz.product.dao.ProductDao.save(ProductDao.java:51)
	at com.csft.product.dao.test.ProductDaoTest.main(ProductDaoTest.java:156)
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.connException(ExceptionMapper.java:95)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1203)
	at org.mariadb.jdbc.internal.util.Utils.retrieveProxy(Utils.java:560)
	at org.mariadb.jdbc.MariaDbConnection.newConnection(MariaDbConnection.java:174)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:288)
	... 14 more
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connect(AbstractConnectProtocol.java:503)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1195)
	... 17 more
2018-11-22 11:05:10,900 com.atomikos.jdbc.AtomikosXAConnectionFactory [main] (Slf4jLogger.java:40) WARN  --> XAConnectionFactory: failed to create pooled connection - DBMS down or unreachable?
java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:290)
	at org.mariadb.jdbc.MariaDbDataSource.getXAConnection(MariaDbDataSource.java:474)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:43)
	at com.atomikos.datasource.pool.ConnectionPool.createPooledConnection(ConnectionPool.java:98)
	at com.atomikos.datasource.pool.ConnectionPool.addConnectionsIfMinPoolSizeNotReached(ConnectionPool.java:86)
	at com.atomikos.datasource.pool.ConnectionPool.init(ConnectionPool.java:60)
	at com.atomikos.datasource.pool.ConnectionPool.<init>(ConnectionPool.java:49)
	at com.atomikos.datasource.pool.ConnectionPoolWithConcurrentValidation.<init>(ConnectionPoolWithConcurrentValidation.java:23)
	at com.atomikos.jdbc.AbstractDataSourceBean.init(AbstractDataSourceBean.java:294)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:343)
	at com.qloudfin.sagas.persistence.jdbc.JdbcClient.poolConnect(JdbcClient.java:162)
	at com.qloudbiz.utils.ConnectionUtils.getConnection(ConnectionUtils.java:43)
	at com.qloudbiz.base.dao.BaseDao.callProcUpdate(BaseDao.java:213)
	at com.qloudbiz.product.dao.ProductDao.save(ProductDao.java:51)
	at com.csft.product.dao.test.ProductDaoTest.main(ProductDaoTest.java:156)
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.connException(ExceptionMapper.java:95)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1203)
	at org.mariadb.jdbc.internal.util.Utils.retrieveProxy(Utils.java:560)
	at org.mariadb.jdbc.MariaDbConnection.newConnection(MariaDbConnection.java:174)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:288)
	... 14 more
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connect(AbstractConnectProtocol.java:503)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1195)
	... 17 more
2018-11-22 11:05:31,923 com.atomikos.jdbc.AtomikosXAConnectionFactory [main] (Slf4jLogger.java:40) WARN  --> XAConnectionFactory: failed to create pooled connection - DBMS down or unreachable?
java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:290)
	at org.mariadb.jdbc.MariaDbDataSource.getXAConnection(MariaDbDataSource.java:474)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:43)
	at com.atomikos.datasource.pool.ConnectionPool.createPooledConnection(ConnectionPool.java:98)
	at com.atomikos.datasource.pool.ConnectionPool.addConnectionsIfMinPoolSizeNotReached(ConnectionPool.java:86)
	at com.atomikos.datasource.pool.ConnectionPool.init(ConnectionPool.java:60)
	at com.atomikos.datasource.pool.ConnectionPool.<init>(ConnectionPool.java:49)
	at com.atomikos.datasource.pool.ConnectionPoolWithConcurrentValidation.<init>(ConnectionPoolWithConcurrentValidation.java:23)
	at com.atomikos.jdbc.AbstractDataSourceBean.init(AbstractDataSourceBean.java:294)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:343)
	at com.qloudfin.sagas.persistence.jdbc.JdbcClient.poolConnect(JdbcClient.java:162)
	at com.qloudbiz.utils.ConnectionUtils.getConnection(ConnectionUtils.java:43)
	at com.qloudbiz.base.dao.BaseDao.callProcUpdate(BaseDao.java:213)
	at com.qloudbiz.product.dao.ProductDao.save(ProductDao.java:51)
	at com.csft.product.dao.test.ProductDaoTest.main(ProductDaoTest.java:156)
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.connException(ExceptionMapper.java:95)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1203)
	at org.mariadb.jdbc.internal.util.Utils.retrieveProxy(Utils.java:560)
	at org.mariadb.jdbc.MariaDbConnection.newConnection(MariaDbConnection.java:174)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:288)
	... 14 more
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connect(AbstractConnectProtocol.java:503)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1195)
	... 17 more
2018-11-22 11:05:52,973 com.atomikos.jdbc.AtomikosXAConnectionFactory [main] (Slf4jLogger.java:40) WARN  --> XAConnectionFactory: failed to create pooled connection - DBMS down or unreachable?
java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:290)
	at org.mariadb.jdbc.MariaDbDataSource.getXAConnection(MariaDbDataSource.java:474)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:43)
	at com.atomikos.datasource.pool.ConnectionPool.createPooledConnection(ConnectionPool.java:98)
	at com.atomikos.datasource.pool.ConnectionPool.growPool(ConnectionPool.java:205)
	at com.atomikos.datasource.pool.ConnectionPool.retrieveFirstAvailableConnectionAndGrowPoolIfNecessary(ConnectionPool.java:155)
	at com.atomikos.datasource.pool.ConnectionPool.findOrWaitForAnAvailableConnection(ConnectionPool.java:141)
	at com.atomikos.datasource.pool.ConnectionPool.borrowConnection(ConnectionPool.java:132)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:346)
	at com.qloudfin.sagas.persistence.jdbc.JdbcClient.poolConnect(JdbcClient.java:162)
	at com.qloudbiz.utils.ConnectionUtils.getConnection(ConnectionUtils.java:43)
	at com.qloudbiz.base.dao.BaseDao.callProcUpdate(BaseDao.java:213)
	at com.qloudbiz.product.dao.ProductDao.save(ProductDao.java:51)
	at com.csft.product.dao.test.ProductDaoTest.main(ProductDaoTest.java:156)
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.connException(ExceptionMapper.java:95)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1203)
	at org.mariadb.jdbc.internal.util.Utils.retrieveProxy(Utils.java:560)
	at org.mariadb.jdbc.MariaDbConnection.newConnection(MariaDbConnection.java:174)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:288)
	... 13 more
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connect(AbstractConnectProtocol.java:503)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1195)
	... 16 more
2018-11-22 11:05:52,974 com.atomikos.jdbc.AtomikosSQLException [main] (Slf4jLogger.java:40) WARN  --> Failed to grow the connection pool
com.atomikos.datasource.pool.CreateConnectionException: XAConnectionFactory: failed to create pooled connection - DBMS down or unreachable?
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:48)
	at com.atomikos.datasource.pool.ConnectionPool.createPooledConnection(ConnectionPool.java:98)
	at com.atomikos.datasource.pool.ConnectionPool.growPool(ConnectionPool.java:205)
	at com.atomikos.datasource.pool.ConnectionPool.retrieveFirstAvailableConnectionAndGrowPoolIfNecessary(ConnectionPool.java:155)
	at com.atomikos.datasource.pool.ConnectionPool.findOrWaitForAnAvailableConnection(ConnectionPool.java:141)
	at com.atomikos.datasource.pool.ConnectionPool.borrowConnection(ConnectionPool.java:132)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:346)
	at com.qloudfin.sagas.persistence.jdbc.JdbcClient.poolConnect(JdbcClient.java:162)
	at com.qloudbiz.utils.ConnectionUtils.getConnection(ConnectionUtils.java:43)
	at com.qloudbiz.base.dao.BaseDao.callProcUpdate(BaseDao.java:213)
	at com.qloudbiz.product.dao.ProductDao.save(ProductDao.java:51)
	at com.csft.product.dao.test.ProductDaoTest.main(ProductDaoTest.java:156)
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.getException(ExceptionMapper.java:165)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:290)
	at org.mariadb.jdbc.MariaDbDataSource.getXAConnection(MariaDbDataSource.java:474)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:43)
	... 11 more
Caused by: java.sql.SQLNonTransientConnectionException: Could not connect to address=(host=192.168.11.130)(port=3306)(type=master) : Connection timed out: connect
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.get(ExceptionMapper.java:234)
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionMapper.connException(ExceptionMapper.java:95)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1203)
	at org.mariadb.jdbc.internal.util.Utils.retrieveProxy(Utils.java:560)
	at org.mariadb.jdbc.MariaDbConnection.newConnection(MariaDbConnection.java:174)
	at org.mariadb.jdbc.MariaDbDataSource.getConnection(MariaDbDataSource.java:288)
	... 13 more
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connect(AbstractConnectProtocol.java:503)
	at org.mariadb.jdbc.internal.protocol.AbstractConnectProtocol.connectWithoutProxy(AbstractConnectProtocol.java:1195)
	... 16 more
2018-11-22 11:05:52,977 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-22 11:07:28,479 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:07:28,479 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:07:28,538 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:07:28,709 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:07:28,709 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:07:28,725 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:07:28,725 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:07:28,725 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:07:28,741 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:07:28,741 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:07:28,756 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:07:28,756 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:07:28,756 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:07:28,772 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:07:28,788 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:07:28,788 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:07:28,788 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:07:28,788 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:07:28,803 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:07:28,803 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:07:28,803 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:07:28,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:07:28,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:07:28,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:07:28,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:07:28,819 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:07:28,819 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:07:28,850 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.086s)
2018-11-22 11:07:28,850 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:07:28,866 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:07:28,866 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:07:28,866 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 11:07:28,866 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 11:07:28,881 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:07:28,881 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:07:29,319 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'd5ec748e-413e-467d-b775-8a05d3591e2b': getConnection()...
2018-11-22 11:07:29,319 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd5ec748e-413e-467d-b775-8a05d3591e2b': init...
2018-11-22 11:07:29,319 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'd5ec748e-413e-467d-b775-8a05d3591e2b': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=d5ec748e-413e-467d-b775-8a05d3591e2b, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:07:29,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-22 11:07:29,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling toString...
2018-11-22 11:07:29,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-22 11:07:29,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling getAutoCommit...
2018-11-22 11:07:29,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-22 11:07:29,397 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling setAutoCommit(false)...
2018-11-22 11:07:29,413 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:07:29,413 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:07:29,413 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:44) DEBUG --> saving product = com.qloudbiz.product.pojo.Product@667a738
2018-11-22 11:07:29,413 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-22 11:07:29,413 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling toString...
2018-11-22 11:07:29,413 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-22 11:07:29,413 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: WARNING: transaction manager not running?
2018-11-22 11:07:29,413 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@77e9807f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:07:29,475 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-22 11:07:40,976 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:07:40,980 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:07:41,023 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:07:41,156 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:07:41,156 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:07:41,175 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:07:41,175 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:07:41,179 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:07:41,183 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:07:41,183 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 11:07:41,187 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:07:41,187 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:07:41,187 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:07:41,187 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:07:41,191 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:07:41,191 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:07:41,191 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:07:41,195 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:07:41,202 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:07:41,222 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:07:41,230 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:07:41,238 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:07:41,238 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:07:41,242 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:07:41,242 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:07:41,249 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:07:41,255 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:07:41,259 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:07:41,259 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:07:41,267 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:07:41,274 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:07:41,278 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:07:41,282 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:07:41,282 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:07:41,306 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.072s)
2018-11-22 11:07:41,310 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:07:41,321 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:07:41,321 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:07:41,329 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 11:07:41,329 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-22 11:07:41,349 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:07:41,353 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:07:41,833 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:07:41,837 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:44) DEBUG --> saving product = com.qloudbiz.product.pojo.Product@23fe1d71
2018-11-22 11:07:41,837 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:07:41,837 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '05355a37-8cdf-442a-9dae-4ad421dbc2b3': getConnection()...
2018-11-22 11:07:41,837 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '05355a37-8cdf-442a-9dae-4ad421dbc2b3': init...
2018-11-22 11:07:41,837 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '05355a37-8cdf-442a-9dae-4ad421dbc2b3': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=05355a37-8cdf-442a-9dae-4ad421dbc2b3, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:07:41,934 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-22 11:07:41,934 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: calling toString...
2018-11-22 11:07:41,934 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-22 11:07:41,934 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-22 11:07:41,934 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:07:41,954 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-22 11:08:31,104 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:08:31,107 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:08:31,146 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:08:31,268 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:08:31,268 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:08:31,289 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:08:31,290 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:08:31,294 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:08:31,300 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:08:31,300 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 11:08:31,300 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:08:31,301 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:08:31,303 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:08:31,303 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:08:31,305 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:08:31,305 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:08:31,307 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:08:31,311 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:08:31,316 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:08:31,329 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:08:31,342 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:08:31,349 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:08:31,351 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:08:31,353 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:08:31,356 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:08:31,362 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:08:31,363 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:08:31,366 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:08:31,368 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:08:31,374 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:08:31,375 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:08:31,378 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:08:31,380 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:08:31,381 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:08:31,409 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.062s)
2018-11-22 11:08:31,411 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:08:31,421 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:08:31,421 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:08:31,426 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 11:08:31,426 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-22 11:08:31,451 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:08:31,452 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:08:31,887 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:08:31,890 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:44) DEBUG --> saving product = com.qloudbiz.product.pojo.Product@23fe1d71
2018-11-22 11:08:31,892 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:08:31,892 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '95c908f2-b6e2-49c5-80a9-00c4484cc6ce': getConnection()...
2018-11-22 11:08:31,893 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '95c908f2-b6e2-49c5-80a9-00c4484cc6ce': init...
2018-11-22 11:08:31,893 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '95c908f2-b6e2-49c5-80a9-00c4484cc6ce': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=95c908f2-b6e2-49c5-80a9-00c4484cc6ce, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:08:31,974 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-22 11:08:31,974 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: calling toString...
2018-11-22 11:08:31,975 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-22 11:08:31,975 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: WARNING: transaction manager not running?
2018-11-22 11:08:31,975 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@76b10754: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:08:31,990 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-22 11:09:13,641 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:09:13,648 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:09:13,686 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:09:13,788 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:09:13,789 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:09:13,809 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:09:13,810 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:09:13,814 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:09:13,818 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:09:13,819 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-22 11:09:13,820 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:09:13,820 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:09:13,823 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:09:13,823 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:09:13,825 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:09:13,825 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:09:13,827 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:09:13,832 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:09:13,837 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:09:13,852 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:09:13,865 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:09:13,872 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:09:13,882 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:09:13,885 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:09:13,887 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:09:13,897 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:09:13,899 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:09:13,909 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:09:13,910 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:09:13,919 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:09:13,920 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:09:13,923 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:09:13,928 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:09:13,929 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:09:13,943 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.088s)
2018-11-22 11:09:13,947 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:09:13,956 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:09:13,957 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:09:13,961 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 11:09:13,962 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 11:09:13,988 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:09:13,989 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:09:14,437 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:09:14,440 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:44) DEBUG --> saving product = com.qloudbiz.product.pojo.Product@5cdd8682
2018-11-22 11:09:14,441 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:09:14,442 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'e5d61a9f-2ba8-4baf-af46-ff5db3f8482f': getConnection()...
2018-11-22 11:09:14,442 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e5d61a9f-2ba8-4baf-af46-ff5db3f8482f': init...
2018-11-22 11:09:14,443 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e5d61a9f-2ba8-4baf-af46-ff5db3f8482f': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=e5d61a9f-2ba8-4baf-af46-ff5db3f8482f, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:09:14,528 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-22 11:09:14,528 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling toString...
2018-11-22 11:09:14,528 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-22 11:09:14,528 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: WARNING: transaction manager not running?
2018-11-22 11:09:14,529 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@57d5872c: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:09:14,544 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, error=Succeeding saving the product!}
2018-11-22 11:15:44,924 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:15:44,928 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:15:44,962 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:15:45,072 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:15:45,073 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:15:45,092 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:15:45,093 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:15:45,098 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:15:45,103 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:15:45,104 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-22 11:15:45,104 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:15:45,105 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:15:45,107 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:15:45,107 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:15:45,109 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:15:45,109 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:15:45,110 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:15:45,114 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:15:45,121 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:15:45,131 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:15:45,141 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:15:45,148 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:15:45,151 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:15:45,156 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:15:45,158 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:15:45,168 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:15:45,169 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:15:45,172 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:15:45,178 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:15:45,191 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:15:45,192 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:15:45,195 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:15:45,198 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:15:45,198 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:15:45,220 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.087s)
2018-11-22 11:15:45,224 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:15:45,232 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:15:45,233 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:15:45,237 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 11:15:45,237 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:111) DEBUG --> ++++++Test delete  product....
2018-11-22 11:15:45,254 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:15:45,255 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:15:45,705 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:92) DEBUG --> update product where id=72ea69fef20c4ce992cc04013c7917e5
2018-11-22 11:15:45,708 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:15:45,709 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '0b90190c-882c-4e63-a8ec-131c70ed4c69': getConnection()...
2018-11-22 11:15:45,710 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0b90190c-882c-4e63-a8ec-131c70ed4c69': init...
2018-11-22 11:15:45,711 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0b90190c-882c-4e63-a8ec-131c70ed4c69': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=0b90190c-882c-4e63-a8ec-131c70ed4c69, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:15:45,827 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:15:45,828 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling toString...
2018-11-22 11:15:45,828 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:15:45,828 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:15:45,829 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(?,?,?,?)})...
2018-11-22 11:15:45,892 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:15:45,892 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling getAutoCommit...
2018-11-22 11:15:45,894 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:124) ERROR --> local sql error :{}null
2018-11-22 11:15:45,895 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:119) DEBUG --> update  product result{returnCode=500, error=Failed to update products!}
2018-11-22 11:17:50,497 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:17:50,501 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:17:50,535 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:17:50,639 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:17:50,639 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:17:50,660 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:17:50,661 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:17:50,666 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:17:50,670 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:17:50,670 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-22 11:17:50,671 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:17:50,672 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:17:50,674 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:17:50,674 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:17:50,676 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:17:50,676 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:17:50,678 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:17:50,683 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:17:50,687 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:17:50,698 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:17:50,709 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:17:50,716 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:17:50,719 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:17:50,724 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:17:50,726 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:17:50,737 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:17:50,739 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:17:50,746 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:17:50,747 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:17:50,751 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:17:50,752 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:17:50,758 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:17:50,761 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:17:50,761 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:17:50,775 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.074s)
2018-11-22 11:17:50,778 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:17:50,786 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:17:50,787 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:17:50,791 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 11:17:50,791 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:79) DEBUG --> ++++++Test query  product list....
2018-11-22 11:17:50,806 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:17:50,807 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:17:51,251 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:189) DEBUG --> listall startRow = 0 , pageSize = 10
2018-11-22 11:17:51,253 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:17:51,254 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '92b71f34-8ad4-44c5-a030-20382ba3fa8a': getConnection()...
2018-11-22 11:17:51,254 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '92b71f34-8ad4-44c5-a030-20382ba3fa8a': init...
2018-11-22 11:17:51,255 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '92b71f34-8ad4-44c5-a030-20382ba3fa8a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=92b71f34-8ad4-44c5-a030-20382ba3fa8a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:17:51,335 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:17:51,336 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling toString...
2018-11-22 11:17:51,336 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:17:51,336 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:17:51,336 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-22 11:17:51,356 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:83) DEBUG --> query all product result[{code=P002, productId=72ea69fef20c4ce992cc04013c7917e5, name=Ipad mini 6}]
2018-11-22 11:28:31,536 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:28:31,538 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:28:31,583 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:28:31,710 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:28:31,710 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:28:31,738 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:28:31,738 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:28:31,744 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:28:31,750 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:28:31,750 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 11:28:31,751 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:28:31,751 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:28:31,754 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:28:31,755 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:28:31,757 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:28:31,757 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:28:31,760 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:28:31,767 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:28:31,772 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:28:31,790 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:28:31,806 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:28:31,815 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:28:31,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:28:31,823 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:28:31,827 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:28:31,850 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:28:31,852 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:28:31,859 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:28:31,860 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:28:31,866 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:28:31,867 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:28:31,871 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:28:31,872 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:28:31,873 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:28:31,915 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.100s)
2018-11-22 11:28:31,919 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:28:31,933 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:28:31,935 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:28:31,941 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 11:28:31,941 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-22 11:28:31,970 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:28:31,973 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:28:32,482 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:28:32,487 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:28:32,487 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '395a5a0c-b8c3-4c17-bbfe-2aa7fc414743': getConnection()...
2018-11-22 11:28:32,487 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '395a5a0c-b8c3-4c17-bbfe-2aa7fc414743': init...
2018-11-22 11:28:32,488 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '395a5a0c-b8c3-4c17-bbfe-2aa7fc414743': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=395a5a0c-b8c3-4c17-bbfe-2aa7fc414743, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:28:32,559 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:28:32,560 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling toString...
2018-11-22 11:28:32,560 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:28:32,560 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:28:32,560 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:28:32,576 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:28:32,576 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling getAutoCommit...
2018-11-22 11:28:32,576 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:28:32,576 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: close()...
2018-11-22 11:28:32,577 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, num=1, error=Succeeding saving the product!}
2018-11-22 11:39:18,666 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:39:18,668 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:39:18,711 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:39:18,851 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:39:18,851 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:39:18,872 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:39:18,873 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:39:18,877 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:39:18,882 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:39:18,882 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 11:39:18,883 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:39:18,883 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:39:18,886 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:39:18,887 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:39:18,888 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:39:18,888 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:39:18,890 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:39:18,894 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:39:18,899 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:39:18,914 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:39:18,925 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:39:18,932 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:39:18,934 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:39:18,937 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:39:18,938 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:39:18,944 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:39:18,947 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:39:18,950 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:39:18,951 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:39:18,955 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:39:18,956 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:39:18,959 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:39:18,961 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:39:18,961 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:39:18,985 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.058s)
2018-11-22 11:39:18,988 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:39:18,997 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:39:18,999 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:39:19,003 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 11:39:19,003 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-22 11:39:19,027 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:39:19,028 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:39:19,490 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:39:19,495 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:39:19,496 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '4a08aec7-d1a1-4d62-b305-90b0e2f21296': getConnection()...
2018-11-22 11:39:19,496 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '4a08aec7-d1a1-4d62-b305-90b0e2f21296': init...
2018-11-22 11:39:19,496 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '4a08aec7-d1a1-4d62-b305-90b0e2f21296': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=4a08aec7-d1a1-4d62-b305-90b0e2f21296, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:39:19,576 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:39:19,576 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling toString...
2018-11-22 11:39:19,577 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:39:19,577 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:39:19,577 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:39:19,595 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:39:19,595 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling getAutoCommit...
2018-11-22 11:39:19,595 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:39:19,596 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling getAutoCommit...
2018-11-22 11:39:19,596 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:39:19,596 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: close()...
2018-11-22 11:39:19,598 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, num=null, error=Succeeding saving the product!}
2018-11-22 11:43:36,444 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:43:36,449 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:43:36,491 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:43:36,605 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:43:36,605 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:43:36,631 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:43:36,632 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:43:36,638 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:43:36,645 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:43:36,645 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-22 11:43:36,647 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:43:36,648 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:43:36,653 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:43:36,653 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:43:36,655 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:43:36,656 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:43:36,659 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:43:36,664 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:43:36,669 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:43:36,681 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:43:36,692 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:43:36,701 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:43:36,712 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:43:36,717 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:43:36,720 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:43:36,742 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:43:36,745 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:43:36,750 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:43:36,752 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:43:36,759 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:43:36,761 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:43:36,764 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:43:36,766 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:43:36,766 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:43:36,782 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.098s)
2018-11-22 11:43:36,784 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:43:36,794 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:43:36,795 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:43:36,799 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 11:43:36,799 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 11:43:36,816 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:43:36,817 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:43:37,345 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:43:37,352 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:43:37,353 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'b5f85321-991e-4acf-a4cb-81daba3e7d44': getConnection()...
2018-11-22 11:43:37,354 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b5f85321-991e-4acf-a4cb-81daba3e7d44': init...
2018-11-22 11:43:37,355 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'b5f85321-991e-4acf-a4cb-81daba3e7d44': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=b5f85321-991e-4acf-a4cb-81daba3e7d44, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:43:37,456 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:43:37,457 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling toString...
2018-11-22 11:43:37,457 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:43:37,458 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:43:37,458 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:43:37,473 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:43:37,474 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling getAutoCommit...
2018-11-22 11:43:37,474 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:43:37,474 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling getAutoCommit...
2018-11-22 11:43:37,475 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 11:43:37,475 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-22 11:43:37,475 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, num=null, error=Succeeding saving the product!}
2018-11-22 11:43:50,633 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:43:50,638 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:43:50,677 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:43:50,801 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:43:50,801 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:43:50,824 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:43:50,825 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:43:50,829 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:43:50,835 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:43:50,835 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-22 11:43:50,836 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:43:50,836 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:43:50,839 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:43:50,839 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:43:50,841 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:43:50,841 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:43:50,843 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:43:50,848 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:43:50,855 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:43:50,868 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:43:50,883 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:43:50,891 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:43:50,896 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:43:50,906 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:43:50,909 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:43:50,921 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:43:50,929 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:43:50,934 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:43:50,936 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:43:50,940 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:43:50,941 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:43:50,944 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:43:50,947 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:43:50,949 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:43:50,962 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.091s)
2018-11-22 11:43:50,966 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:43:50,974 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:43:50,975 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:43:50,981 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-22 11:43:50,982 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 11:44:02,406 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:44:02,408 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:03,795 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:44:03,810 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:03,810 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'e9d5f2c5-3dd0-4735-8ff2-bb5ea4319768': getConnection()...
2018-11-22 11:44:03,811 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e9d5f2c5-3dd0-4735-8ff2-bb5ea4319768': init...
2018-11-22 11:44:03,811 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'e9d5f2c5-3dd0-4735-8ff2-bb5ea4319768': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=e9d5f2c5-3dd0-4735-8ff2-bb5ea4319768, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:44:04,242 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:04,243 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling toString...
2018-11-22 11:44:04,243 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:04,243 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:04,243 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:44:04,264 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:04,264 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling getAutoCommit...
2018-11-22 11:44:04,264 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:04,264 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling getAutoCommit...
2018-11-22 11:44:04,265 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:04,265 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: close()...
2018-11-22 11:44:04,265 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, num=null, error=Succeeding saving the product!}
2018-11-22 11:44:17,538 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:44:17,543 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:17,583 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:44:17,708 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:44:17,708 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:44:17,744 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:44:17,744 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:44:17,751 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:44:17,757 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:44:17,757 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-22 11:44:17,758 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:44:17,759 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:44:17,762 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:44:17,763 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:44:17,765 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:44:17,765 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:44:17,767 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:44:17,775 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:44:17,783 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:44:17,795 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:44:17,809 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:44:17,819 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:44:17,831 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:44:17,835 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:44:17,839 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:44:17,866 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:44:17,868 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:44:17,871 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:44:17,875 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:44:17,881 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:44:17,882 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:44:17,885 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:44:17,888 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:44:17,888 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:44:17,910 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.112s)
2018-11-22 11:44:17,915 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:44:17,927 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:44:17,928 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:44:17,934 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-22 11:44:17,934 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 11:44:21,207 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:44:21,209 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:24,515 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:44:24,527 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:24,527 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '86829599-6956-4680-8e17-94fbc91f3297': getConnection()...
2018-11-22 11:44:24,530 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '86829599-6956-4680-8e17-94fbc91f3297': init...
2018-11-22 11:44:24,531 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '86829599-6956-4680-8e17-94fbc91f3297': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=86829599-6956-4680-8e17-94fbc91f3297, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:44:24,662 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:24,662 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling toString...
2018-11-22 11:44:24,662 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:24,662 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:24,662 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:44:24,680 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:24,680 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling getAutoCommit...
2018-11-22 11:44:24,680 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:24,680 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling getAutoCommit...
2018-11-22 11:44:24,681 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:44:24,681 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: close()...
2018-11-22 11:44:24,681 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, num=null, error=Succeeding saving the product!}
2018-11-22 11:44:51,800 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:44:51,806 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:51,844 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:44:51,967 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:44:51,967 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:44:51,992 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:44:51,992 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:44:51,998 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:44:52,004 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:44:52,004 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-22 11:44:52,005 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:44:52,006 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:44:52,009 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:44:52,009 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:44:52,011 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:44:52,011 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:44:52,012 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:44:52,018 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:44:52,025 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:44:52,037 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:44:52,053 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:44:52,059 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:44:52,062 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:44:52,066 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:44:52,069 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:44:52,090 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:44:52,097 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:44:52,105 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:44:52,106 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:44:52,109 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:44:52,109 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:44:52,112 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:44:52,114 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:44:52,115 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:44:52,132 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.092s)
2018-11-22 11:44:52,135 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:44:52,145 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:44:52,146 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:44:52,150 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-22 11:44:52,150 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 11:44:55,000 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:44:55,002 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:56,739 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:44:56,752 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:56,753 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'fb6bd552-0a8b-4dff-b620-f8170a126704': getConnection()...
2018-11-22 11:44:56,753 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'fb6bd552-0a8b-4dff-b620-f8170a126704': init...
2018-11-22 11:44:56,754 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'fb6bd552-0a8b-4dff-b620-f8170a126704': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=fb6bd552-0a8b-4dff-b620-f8170a126704, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:44:56,890 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:56,890 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: calling toString...
2018-11-22 11:44:56,891 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:56,891 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:56,891 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:44:56,908 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:56,908 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: calling getAutoCommit...
2018-11-22 11:44:56,909 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:56,909 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: calling getAutoCommit...
2018-11-22 11:44:56,909 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:56,909 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: close()...
2018-11-22 11:44:56,910 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, num=null, error=Succeeding saving the product!}
2018-11-22 11:44:56,919 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:44:56,919 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:56,922 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:44:56,923 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:44:56,923 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:44:56,924 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:44:56,925 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:44:56,925 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:44:56,925 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-22 11:44:56,926 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:44:56,927 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:44:56,927 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:44:56,927 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:44:56,928 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:44:56,928 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:44:56,929 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:44:56,929 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:44:56,930 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:44:56,936 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:44:56,937 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:44:56,938 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:44:56,939 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:44:56,941 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:44:56,942 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:44:56,946 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:44:56,947 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:44:56,948 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:44:56,948 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:44:56,951 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:44:56,951 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:44:56,952 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:44:56,954 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:44:56,954 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:44:56,963 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.026s)
2018-11-22 11:44:56,965 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:44:56,971 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:44:56,973 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:44:56,974 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 11 of 180M
2018-11-22 11:44:56,974 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:79) DEBUG --> ++++++Test query  product list....
2018-11-22 11:44:56,975 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:56,982 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:182) DEBUG --> listall startRow = 0 , pageSize = 10
2018-11-22 11:44:56,982 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:56,982 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: calling toString...
2018-11-22 11:44:56,983 com.atomikos.jdbc.AtomikosSQLException [main] (Slf4jLogger.java:40) WARN  --> Connection was already closed - calling prepareCall is no longer allowed!
2018-11-22 11:44:56,983 com.atomikos.jdbc.AtomikosSQLException [main] (Slf4jLogger.java:40) WARN  --> Connection was already closed - calling getAutoCommit is no longer allowed!
2018-11-22 11:44:56,983 com.atomikos.jdbc.AtomikosSQLException [main] (Slf4jLogger.java:40) WARN  --> Connection was already closed - calling getAutoCommit is no longer allowed!
2018-11-22 11:44:56,984 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:198) ERROR --> local sql error, {}
com.atomikos.jdbc.AtomikosSQLException: Connection was already closed - calling getAutoCommit is no longer allowed!
	at com.atomikos.jdbc.AtomikosSQLException.throwAtomikosSQLException(AtomikosSQLException.java:29)
	at com.atomikos.jdbc.AtomikosSQLException.throwAtomikosSQLException(AtomikosSQLException.java:40)
	at com.atomikos.jdbc.AtomikosConnectionProxy.invoke(AtomikosConnectionProxy.java:100)
	at com.sun.proxy.$Proxy4.getAutoCommit(Unknown Source)
	at com.qloudbiz.base.dao.BaseDao.callProcQueryList(BaseDao.java:149)
	at com.qloudbiz.product.dao.ProductDao.listall(ProductDao.java:185)
	at com.csft.product.dao.test.ProductDaoTest.testQuerylist(ProductDaoTest.java:82)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
2018-11-22 11:44:56,989 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:83) DEBUG --> query all product result{returnCode=500, error=Failed to listall products!}
2018-11-22 11:44:56,991 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:44:56,992 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:56,998 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:44:56,998 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:44:56,999 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:44:56,999 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:44:57,000 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:44:57,000 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:44:57,000 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-22 11:44:57,001 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:44:57,002 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:44:57,002 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:44:57,003 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:44:57,003 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:44:57,004 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:44:57,004 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:44:57,004 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:44:57,005 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:44:57,008 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:44:57,009 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:44:57,010 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:44:57,011 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:44:57,013 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:44:57,014 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:44:57,015 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:44:57,016 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:44:57,016 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:44:57,017 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:44:57,018 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:44:57,018 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:44:57,019 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:44:57,020 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:44:57,020 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:44:57,025 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.016s)
2018-11-22 11:44:57,027 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:44:57,035 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:44:57,036 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:44:57,038 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 13 of 180M
2018-11-22 11:44:57,039 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:111) DEBUG --> ++++++Test delete  product....
2018-11-22 11:44:57,040 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:44:57,046 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:88) DEBUG --> update product where id=72ea69fef20c4ce992cc04013c7917e5
2018-11-22 11:44:57,046 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: WARNING: transaction manager not running?
2018-11-22 11:44:57,046 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1169afe1: calling toString...
2018-11-22 11:44:57,046 com.atomikos.jdbc.AtomikosSQLException [main] (Slf4jLogger.java:40) WARN  --> Connection was already closed - calling prepareCall is no longer allowed!
2018-11-22 11:44:57,047 com.atomikos.jdbc.AtomikosSQLException [main] (Slf4jLogger.java:40) WARN  --> Connection was already closed - calling getAutoCommit is no longer allowed!
2018-11-22 11:44:57,047 com.atomikos.jdbc.AtomikosSQLException [main] (Slf4jLogger.java:40) WARN  --> Connection was already closed - calling getAutoCommit is no longer allowed!
2018-11-22 11:44:57,050 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:120) ERROR --> local sql error :{}Connection was already closed - calling getAutoCommit is no longer allowed!
2018-11-22 11:44:57,050 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:119) DEBUG --> update  product result{returnCode=500, error=Failed to update products!}
2018-11-22 11:45:42,997 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:45:43,003 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:45:43,045 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:45:43,170 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:45:43,170 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:45:43,193 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:45:43,194 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:45:43,199 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:45:43,204 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:45:43,204 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@18b4aac2 ...
2018-11-22 11:45:43,205 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:45:43,205 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:45:43,208 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:45:43,209 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:45:43,210 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:45:43,210 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:45:43,212 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:45:43,218 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:45:43,224 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:45:43,244 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:45:43,259 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:45:43,267 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:45:43,270 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:45:43,274 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:45:43,278 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:45:43,287 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:45:43,289 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:45:43,293 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:45:43,294 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:45:43,297 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:45:43,302 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:45:43,305 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:45:43,308 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:45:43,308 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:45:43,327 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.081s)
2018-11-22 11:45:43,330 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:45:43,339 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:45:43,340 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:45:43,344 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 42 of 180M
2018-11-22 11:45:43,344 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 11:45:46,031 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:45:46,033 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:45:49,782 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:46:09,820 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:46:09,824 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '72105ea9-9560-468f-8ddc-d94b60d13d63': getConnection()...
2018-11-22 11:46:09,825 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '72105ea9-9560-468f-8ddc-d94b60d13d63': init...
2018-11-22 11:46:09,825 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '72105ea9-9560-468f-8ddc-d94b60d13d63': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=72105ea9-9560-468f-8ddc-d94b60d13d63, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:46:10,107 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:46:10,107 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling toString...
2018-11-22 11:46:13,541 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:46:13,543 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:46:13,544 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:46:36,535 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:46:36,536 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling getAutoCommit...
2018-11-22 11:46:36,536 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:46:36,537 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: calling getAutoCommit...
2018-11-22 11:46:36,538 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: WARNING: transaction manager not running?
2018-11-22 11:46:36,538 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@7de62196: close()...
2018-11-22 11:46:36,540 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, num=null, error=Succeeding saving the product!}
2018-11-22 11:46:56,162 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 11:46:56,164 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:46:56,208 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 11:46:56,342 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 11:46:56,342 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 11:46:56,363 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 11:46:56,363 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 11:46:56,368 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 11:46:56,372 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 11:46:56,373 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 11:46:56,373 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 11:46:56,374 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 11:46:56,377 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 11:46:56,377 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 11:46:56,379 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 11:46:56,379 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 11:46:56,381 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 11:46:56,385 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 11:46:56,390 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 11:46:56,409 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 11:46:56,421 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 11:46:56,427 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 11:46:56,430 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 11:46:56,435 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 11:46:56,438 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 11:46:56,447 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 11:46:56,449 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 11:46:56,451 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 11:46:56,454 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 11:46:56,458 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 11:46:56,459 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 11:46:56,463 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 11:46:56,466 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 11:46:56,467 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 11:46:56,492 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.069s)
2018-11-22 11:46:56,496 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 11:46:56,507 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 11:46:56,508 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 11:46:56,513 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 11:46:56,514 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-22 11:46:56,539 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 11:46:56,541 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:46:56,976 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 11:46:56,981 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 11:46:56,982 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'bc90fe95-970e-4982-9780-22c0ffafc4ac': getConnection()...
2018-11-22 11:46:56,983 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bc90fe95-970e-4982-9780-22c0ffafc4ac': init...
2018-11-22 11:46:56,983 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'bc90fe95-970e-4982-9780-22c0ffafc4ac': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=bc90fe95-970e-4982-9780-22c0ffafc4ac, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 11:46:57,059 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:46:57,060 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling toString...
2018-11-22 11:46:57,060 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:46:57,060 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:46:57,060 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 11:46:57,107 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:46:57,107 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling getAutoCommit...
2018-11-22 11:46:57,107 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:46:57,107 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling getAutoCommit...
2018-11-22 11:46:57,108 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 11:46:57,108 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: close()...
2018-11-22 11:46:57,109 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, num=null, error=Succeeding saving the product!}
2018-11-22 12:33:23,106 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 12:33:23,110 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 12:33:23,146 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 12:33:23,255 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 12:33:23,255 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 12:33:23,277 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 12:33:23,277 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 12:33:23,282 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 12:33:23,286 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 12:33:23,287 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@6193b845 ...
2018-11-22 12:33:23,287 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 12:33:23,288 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 12:33:23,290 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 12:33:23,290 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 12:33:23,292 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 12:33:23,292 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 12:33:23,293 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 12:33:23,298 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 12:33:23,302 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 12:33:23,313 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 12:33:23,324 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 12:33:23,334 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 12:33:23,337 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 12:33:23,347 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 12:33:23,348 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 12:33:23,359 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 12:33:23,361 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 12:33:23,364 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 12:33:23,365 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 12:33:23,370 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 12:33:23,372 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 12:33:23,375 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 12:33:23,377 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 12:33:23,378 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 12:33:23,394 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.079s)
2018-11-22 12:33:23,398 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 12:33:23,408 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 12:33:23,409 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 12:33:23,414 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 12:33:23,414 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 12:33:23,431 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 12:33:23,433 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 12:33:23,907 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 12:33:23,911 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 12:33:23,911 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '29615037-eabb-4cbc-b763-11e43bba770e': getConnection()...
2018-11-22 12:33:23,912 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '29615037-eabb-4cbc-b763-11e43bba770e': init...
2018-11-22 12:33:23,912 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '29615037-eabb-4cbc-b763-11e43bba770e': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=29615037-eabb-4cbc-b763-11e43bba770e, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 12:33:23,994 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 12:33:23,994 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling toString...
2018-11-22 12:33:23,995 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 12:33:23,995 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 12:33:23,995 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 12:33:24,010 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 12:33:24,010 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: calling getAutoCommit...
2018-11-22 12:33:24,011 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: WARNING: transaction manager not running?
2018-11-22 12:33:24,011 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1e67a849: close()...
2018-11-22 12:33:24,011 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product {returnCode=200, num=1, error=Succeeding saving the product!}
2018-11-22 12:33:36,459 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 12:33:36,461 com.qloudbiz.base.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 12:33:36,504 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 12:33:36,637 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 12:33:36,638 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 12:33:36,658 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 12:33:36,659 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 12:33:36,663 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 12:33:36,668 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 12:33:36,668 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 12:33:36,669 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 12:33:36,670 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 12:33:36,672 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 12:33:36,672 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 12:33:36,674 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 12:33:36,674 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 12:33:36,676 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 12:33:36,680 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 12:33:36,686 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 12:33:36,698 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 12:33:36,711 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 12:33:36,721 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 12:33:36,725 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 12:33:36,731 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 12:33:36,733 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 12:33:36,741 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 12:33:36,742 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 12:33:36,746 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 12:33:36,747 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 12:33:36,750 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 12:33:36,751 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 12:33:36,754 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 12:33:36,757 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 12:33:36,757 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 12:33:36,782 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.070s)
2018-11-22 12:33:36,784 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 12:33:36,794 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 12:33:36,795 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 12:33:36,799 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 12:33:36,800 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:142) DEBUG --> ++++++Test save product ....
2018-11-22 12:33:36,820 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 12:33:36,822 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 12:33:37,261 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:154) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 12:33:37,264 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 12:33:37,265 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '09477e37-f60a-4c50-b102-9920cb8a60dd': getConnection()...
2018-11-22 12:33:37,265 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '09477e37-f60a-4c50-b102-9920cb8a60dd': init...
2018-11-22 12:33:37,265 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '09477e37-f60a-4c50-b102-9920cb8a60dd': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=09477e37-f60a-4c50-b102-9920cb8a60dd, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 12:33:37,343 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 12:33:37,344 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling toString...
2018-11-22 12:33:37,344 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 12:33:37,344 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 12:33:37,345 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 12:33:37,363 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 12:33:37,363 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: calling getAutoCommit...
2018-11-22 12:33:37,363 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: WARNING: transaction manager not running?
2018-11-22 12:33:37,363 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@de3a06f: close()...
2018-11-22 12:33:37,364 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> test save product {returnCode=200, num=1, error=Succeeding saving the product!}
2018-11-22 14:37:57,110 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 14:37:57,118 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:37:57,165 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 14:37:57,277 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 14:37:57,277 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 14:37:57,298 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 14:37:57,299 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 14:37:57,304 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 14:37:57,308 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 14:37:57,309 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@c4437c4 ...
2018-11-22 14:37:57,309 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 14:37:57,310 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 14:37:57,313 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 14:37:57,313 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 14:37:57,315 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 14:37:57,315 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 14:37:57,317 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 14:37:57,321 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 14:37:57,326 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 14:37:57,338 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 14:37:57,353 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 14:37:57,364 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 14:37:57,369 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 14:37:57,373 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 14:37:57,375 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 14:37:57,383 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 14:37:57,386 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 14:37:57,402 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 14:37:57,404 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 14:37:57,408 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 14:37:57,409 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 14:37:57,412 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 14:37:57,414 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 14:37:57,416 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 14:37:57,430 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.089s)
2018-11-22 14:37:57,433 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 14:37:57,442 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 14:37:57,443 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 14:37:57,446 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 14:37:57,447 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 14:37:57,467 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 14:37:57,468 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:37:58,005 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 14:37:58,009 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:37:58,010 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '825f43b1-0112-4bb7-9b30-722cc4a40771': getConnection()...
2018-11-22 14:37:58,011 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '825f43b1-0112-4bb7-9b30-722cc4a40771': init...
2018-11-22 14:37:58,011 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '825f43b1-0112-4bb7-9b30-722cc4a40771': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=825f43b1-0112-4bb7-9b30-722cc4a40771, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 14:37:58,093 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 14:37:58,094 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling toString...
2018-11-22 14:37:58,094 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 14:37:58,094 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 14:37:58,095 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 14:37:58,111 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 14:37:58,112 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling getAutoCommit...
2018-11-22 14:37:58,112 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 14:37:58,112 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: close()...
2018-11-22 14:38:46,948 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:128) DEBUG --> ++++++Test save product ....
2018-11-22 14:38:46,991 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 14:39:38,873 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 14:39:38,875 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:39:38,920 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 14:39:39,049 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 14:39:39,049 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 14:39:39,071 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 14:39:39,071 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 14:39:39,076 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 14:39:39,081 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 14:39:39,081 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 14:39:39,081 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 14:39:39,082 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 14:39:39,084 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 14:39:39,084 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 14:39:39,086 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 14:39:39,086 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 14:39:39,087 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 14:39:39,092 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 14:39:39,097 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 14:39:39,112 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 14:39:39,125 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 14:39:39,132 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 14:39:39,137 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 14:39:39,141 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 14:39:39,142 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 14:39:39,147 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 14:39:39,149 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 14:39:39,154 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 14:39:39,155 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 14:39:39,159 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 14:39:39,160 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 14:39:39,163 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 14:39:39,164 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 14:39:39,165 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 14:39:39,189 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.065s)
2018-11-22 14:39:39,192 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 14:39:39,202 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 14:39:39,203 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 14:39:39,207 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 14:39:39,208 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:141) DEBUG --> ++++++Test save product ....
2018-11-22 14:39:39,235 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 14:39:39,237 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:39:39,704 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:152) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 14:39:39,709 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:39:39,710 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '58790678-1f7a-4d40-a669-d25b38e5c152': getConnection()...
2018-11-22 14:39:39,710 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '58790678-1f7a-4d40-a669-d25b38e5c152': init...
2018-11-22 14:39:39,710 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '58790678-1f7a-4d40-a669-d25b38e5c152': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=58790678-1f7a-4d40-a669-d25b38e5c152, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 14:39:39,790 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:39:39,790 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: calling toString...
2018-11-22 14:39:39,790 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:39:39,790 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:39:39,790 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 14:39:39,807 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:39:39,808 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: calling getAutoCommit...
2018-11-22 14:39:39,808 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:39:39,809 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: close()...
2018-11-22 14:40:33,308 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 14:40:33,311 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:40:33,352 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 14:40:33,501 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 14:40:33,501 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 14:40:33,521 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 14:40:33,521 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 14:40:33,525 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 14:40:33,529 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 14:40:33,529 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 14:40:33,530 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 14:40:33,531 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 14:40:33,533 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 14:40:33,533 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 14:40:33,535 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 14:40:33,535 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 14:40:33,537 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 14:40:33,541 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 14:40:33,547 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 14:40:33,559 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 14:40:33,570 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 14:40:33,579 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 14:40:33,581 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 14:40:33,584 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 14:40:33,585 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 14:40:33,590 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 14:40:33,591 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 14:40:33,594 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 14:40:33,596 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 14:40:33,599 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 14:40:33,600 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 14:40:33,605 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 14:40:33,607 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 14:40:33,608 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 14:40:33,636 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.061s)
2018-11-22 14:40:33,639 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 14:40:33,648 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 14:40:33,649 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 14:40:33,653 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 14:40:33,654 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:141) DEBUG --> ++++++Test save product ....
2018-11-22 14:40:33,678 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 14:40:33,679 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:40:34,130 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:152) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 14:40:34,134 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 14:40:34,135 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '88298d35-9725-47f7-a6be-a476162593c0': getConnection()...
2018-11-22 14:40:34,135 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '88298d35-9725-47f7-a6be-a476162593c0': init...
2018-11-22 14:40:34,135 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '88298d35-9725-47f7-a6be-a476162593c0': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=88298d35-9725-47f7-a6be-a476162593c0, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 14:40:34,211 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:40:34,212 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: calling toString...
2018-11-22 14:40:34,212 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:40:34,212 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:40:34,212 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 14:40:34,229 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:40:34,229 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: calling getAutoCommit...
2018-11-22 14:40:34,229 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: WARNING: transaction manager not running?
2018-11-22 14:40:34,230 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@2bea5ab4: close()...
2018-11-22 14:40:34,233 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:155) DEBUG --> test save product ResultData(resultStatus=200, resultCode=PROD_0000, msg=Succeeding saving the product! , data=null)
2018-11-22 16:51:33,933 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 16:51:33,935 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:51:34,011 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 16:51:34,398 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 16:51:34,399 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 16:51:34,420 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 16:51:34,420 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 16:51:34,425 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 16:51:34,429 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 16:51:34,429 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 16:51:34,430 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 16:51:34,430 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 16:51:34,432 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 16:51:34,432 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 16:51:34,434 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 16:51:34,434 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 16:51:34,436 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 16:51:34,440 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 16:51:34,445 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 16:51:34,457 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 16:51:34,466 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 16:51:34,473 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 16:51:34,475 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 16:51:34,478 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 16:51:34,481 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 16:51:34,489 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 16:51:34,491 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 16:51:34,494 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 16:51:34,495 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 16:51:34,499 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 16:51:34,500 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 16:51:34,504 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 16:51:34,506 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 16:51:34,506 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 16:51:34,528 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.059s)
2018-11-22 16:51:34,531 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 16:51:34,541 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 16:51:34,542 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 16:51:34,547 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 16:51:34,547 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:141) DEBUG --> ++++++Test save product ....
2018-11-22 16:51:34,566 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 16:51:34,567 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:51:35,005 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'fee5b4bb-f0f3-404b-8325-6b9b591e6d7a': getConnection()...
2018-11-22 16:51:35,005 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'fee5b4bb-f0f3-404b-8325-6b9b591e6d7a': init...
2018-11-22 16:51:35,005 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'fee5b4bb-f0f3-404b-8325-6b9b591e6d7a': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=fee5b4bb-f0f3-404b-8325-6b9b591e6d7a, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 16:51:35,077 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:51:35,078 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling toString...
2018-11-22 16:51:35,078 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:51:35,078 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling getAutoCommit...
2018-11-22 16:51:35,078 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:51:35,078 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling setAutoCommit(false)...
2018-11-22 16:51:35,081 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:51:35,083 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 16:51:35,086 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:51:35,087 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling toString...
2018-11-22 16:51:35,087 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:51:35,087 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:51:35,087 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 16:51:35,102 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:51:35,103 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling getAutoCommit...
2018-11-22 16:52:04,816 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 16:52:04,818 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:52:04,886 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 16:52:05,035 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 16:52:05,035 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 16:52:05,062 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 16:52:05,063 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 16:52:05,068 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 16:52:05,072 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 16:52:05,072 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@73d16e93 ...
2018-11-22 16:52:05,072 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 16:52:05,073 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 16:52:05,075 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 16:52:05,075 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 16:52:05,077 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 16:52:05,077 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 16:52:05,079 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 16:52:05,083 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 16:52:05,089 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 16:52:05,114 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 16:52:05,126 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 16:52:05,131 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 16:52:05,133 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 16:52:05,136 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 16:52:05,137 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 16:52:05,143 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 16:52:05,145 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 16:52:05,147 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 16:52:05,148 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 16:52:05,152 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 16:52:05,153 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 16:52:05,166 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 16:52:05,169 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 16:52:05,169 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 16:52:05,196 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.068s)
2018-11-22 16:52:05,199 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 16:52:05,210 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 16:52:05,212 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 16:52:05,216 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 36 of 180M
2018-11-22 16:52:05,216 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:141) DEBUG --> ++++++Test save product ....
2018-11-22 16:52:05,238 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 16:52:05,241 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:52:05,695 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '0ce32f8f-e47f-445d-b695-f3aafdd181c6': getConnection()...
2018-11-22 16:52:05,695 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0ce32f8f-e47f-445d-b695-f3aafdd181c6': init...
2018-11-22 16:52:05,695 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '0ce32f8f-e47f-445d-b695-f3aafdd181c6': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=0ce32f8f-e47f-445d-b695-f3aafdd181c6, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 16:52:05,769 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:52:05,769 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling toString...
2018-11-22 16:52:05,769 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:52:05,769 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling getAutoCommit...
2018-11-22 16:52:05,769 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:52:05,770 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling setAutoCommit(false)...
2018-11-22 16:52:05,773 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:52:05,774 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:157) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 16:52:05,777 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:52:05,777 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling toString...
2018-11-22 16:52:05,777 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:52:05,777 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:52:05,777 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 16:52:05,791 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: WARNING: transaction manager not running?
2018-11-22 16:52:05,791 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@1ad282e0: calling getAutoCommit...
2018-11-22 16:56:00,302 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 16:56:00,307 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:56:00,346 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 16:56:00,453 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 16:56:00,453 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 16:56:00,473 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 16:56:00,474 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 16:56:00,478 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 16:56:00,483 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 16:56:00,483 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@c4437c4 ...
2018-11-22 16:56:00,484 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 16:56:00,485 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 16:56:00,487 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 16:56:00,487 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 16:56:00,489 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 16:56:00,489 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 16:56:00,490 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 16:56:00,495 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 16:56:00,499 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 16:56:00,509 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 16:56:00,517 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 16:56:00,524 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 16:56:00,527 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 16:56:00,530 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 16:56:00,532 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 16:56:00,541 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 16:56:00,543 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 16:56:00,547 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 16:56:00,548 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 16:56:00,552 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 16:56:00,553 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 16:56:00,559 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 16:56:00,563 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 16:56:00,564 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 16:56:00,581 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.069s)
2018-11-22 16:56:00,584 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 16:56:00,593 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 16:56:00,594 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 16:56:00,598 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 16:56:00,598 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:54) DEBUG --> ++++++Test save product ....
2018-11-22 16:56:00,614 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 16:56:00,616 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:56:01,068 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:65) DEBUG --> ++++++INSERT INTO PRODUCT ....
2018-11-22 16:56:01,075 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:56:01,078 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean '48f1869a-efa5-495d-8a56-aa2531436acb': getConnection()...
2018-11-22 16:56:01,079 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '48f1869a-efa5-495d-8a56-aa2531436acb': init...
2018-11-22 16:56:01,080 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean '48f1869a-efa5-495d-8a56-aa2531436acb': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=48f1869a-efa5-495d-8a56-aa2531436acb, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 16:56:01,195 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:56:01,196 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling toString...
2018-11-22 16:56:01,196 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:56:01,196 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:56:01,197 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling prepareCall({CALL QLOUDFLOW_PRODUCT_INSERT_PROCEDURE(?,?,?)})...
2018-11-22 16:56:01,221 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:56:01,221 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling getAutoCommit...
2018-11-22 16:56:01,221 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:56:01,222 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: close()...
2018-11-22 16:56:01,225 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:68) DEBUG --> test save product ResultData(resultStatus=200, resultCode=PROD_0000, msg=Succeeding saving the product! , data=null)
2018-11-22 16:58:19,542 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:40) INFO  --> got app config {"uniqueResourceName":"qloud.saga","maxPoolSize":5,"minPoolSize":5,"testQuery":"select 1","driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666"}
2018-11-22 16:58:19,546 com.qloudbiz.core.dao.DbInit [main] (DbInit.java:58) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:58:19,582 org.flywaydb.core.internal.license.VersionPrinter [main] (Slf4jLog.java:49) INFO  --> Flyway Community Edition 5.2.1 by Boxfuse
2018-11-22 16:58:19,686 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:49) INFO  --> Database: jdbc:mariadb://192.168.11.130:3306/productdb (MySQL 10.3)
2018-11-22 16:58:19,686 org.flywaydb.core.internal.database.DatabaseFactory [main] (Slf4jLog.java:45) DEBUG --> Driver  : MariaDB connector/J 2.3.0
2018-11-22 16:58:19,707 org.flywaydb.core.internal.database.mysql.MySQLDatabase [main] (Slf4jLog.java:45) DEBUG --> Unable to detect whether we are running in a Percona XtraDB Cluster. Assuming not to be.
2018-11-22 16:58:19,708 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> DDL Transactions Supported: false
2018-11-22 16:58:19,712 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Schema: productdb
2018-11-22 16:58:19,716 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classpath resources at 'classpath:db/migration' ...
2018-11-22 16:58:19,716 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Determining location urls for classpath:db/migration using ClassLoader sun.misc.Launcher$AppClassLoader@c4437c4 ...
2018-11-22 16:58:19,717 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning URL: file:/C:/Users/Administrator/git/oep-repository/qloudbiz-api-product/target/test-classes/db/migration
2018-11-22 16:58:19,718 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> JBoss VFS v2 available: false
2018-11-22 16:58:19,720 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning starting at classpath root in filesystem: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\
2018-11-22 16:58:19,720 org.flywaydb.core.internal.scanner.classpath.FileSystemClassPathLocationScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for resources in path: C:\Users\Administrator\git\oep-repository\qloudbiz-api-product\target\test-classes\db\migration (db/migration)
2018-11-22 16:58:19,721 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_0__init_product_table.sql
2018-11-22 16:58:19,722 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Found resource: db/migration/V1_0_2__product_procedures.sql
2018-11-22 16:58:19,723 org.flywaydb.core.internal.scanner.classpath.ClassPathScanner [main] (Slf4jLog.java:45) DEBUG --> Scanning for classes at classpath:db/migration
2018-11-22 16:58:19,727 org.flywaydb.core.internal.callback.SqlScriptCallbackFactory [main] (Slf4jLog.java:45) DEBUG --> Scanning for SQL callbacks ...
2018-11-22 16:58:19,732 org.flywaydb.core.internal.util.FeatureDetector [main] (Slf4jLog.java:45) DEBUG --> Spring Jdbc available: false
2018-11-22 16:58:19,740 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:45) DEBUG --> Validating migrations ...
2018-11-22 16:58:19,750 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_0__init_product_table.sql ...
2018-11-22 16:58:19,758 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: drop table if exists product
2018-11-22 16:58:19,769 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 3: create table if not exists product (
	productId varchar(255) primary key, 
	code  varchar(200) not null,
	name varchar(255)
)
2018-11-22 16:58:19,773 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Parsing V1_0_2__product_procedures.sql ...
2018-11-22 16:58:19,776 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 1: -- insert a product
DROP PROCEDURE IF EXISTS `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`
2018-11-22 16:58:19,795 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 4: CREATE  PROCEDURE `QLOUDFLOW_PRODUCT_INSERT_PROCEDURE`(
	 IN v_productId varchar(255),
     IN v_code varchar(50), 
     IN v_name varchar(255)
)
lable:BEGIN
    DECLARE tmpCont int default 0;
    DECLARE cont int default 0;
    
    INSERT INTO product 
    (
     productId, 
     code,
     name
	) VALUES 
	(
	 v_productId, 
     v_code,
     v_name
	); 
	
	

END
2018-11-22 16:58:19,797 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 31: -- query products
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE
2018-11-22 16:58:19,802 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 34: CREATE PROCEDURE QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(
	IN v_startrow int,
	IN v_pagesize int
)
lable:BEGIN
	SELECT productId,code,name FROM product limit v_startrow,v_pagesize;
	
END
2018-11-22 16:58:19,803 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 45: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
2018-11-22 16:58:19,805 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 48: CREATE  PROCEDURE QLOUDFLOW_PRODUCT_DELETE_PROCEDURE(
	 IN v_productId varchar(255),
     OUT V_OUT int
)
lable:BEGIN
   	DELETE FROM product WHERE productId=v_productId;
   	
	SELECT  ROW_COUNT() into V_OUT;

END
2018-11-22 16:58:19,807 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 63: -- delete QLOUDFLOW_PRODUCT_DELETE_PROCEDURE
DROP PROCEDURE IF EXISTS QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE
2018-11-22 16:58:19,815 org.flywaydb.core.internal.sqlscript.SqlScript [main] (Slf4jLog.java:45) DEBUG --> Found statement at line 66: CREATE PROCEDURE  QLOUDFLOW_PRODUCT_UPDATE_PROCEDURE(
	IN v_productId varchar(64),
	IN v_code varchar(255),
    IN v_name varchar(255),
	OUT V_OUT int
)
label:BEGIN
	UPDATE product set code=v_code,name=v_name where productId=v_productId;

  SELECT  ROW_COUNT() into V_OUT;
END
2018-11-22 16:58:19,819 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_0__init_product_table.sql (filename: V1_0_0__init_product_table.sql)
2018-11-22 16:58:19,819 org.flywaydb.core.internal.scanner.Scanner [main] (Slf4jLog.java:45) DEBUG --> Filtering out resource: db/migration/V1_0_2__product_procedures.sql (filename: V1_0_2__product_procedures.sql)
2018-11-22 16:58:19,831 org.flywaydb.core.internal.command.DbValidate [main] (Slf4jLog.java:49) INFO  --> Successfully validated 2 migrations (execution time 00:00.088s)
2018-11-22 16:58:19,834 org.flywaydb.core.internal.command.DbSchemas [main] (Slf4jLog.java:45) DEBUG --> Schema `productdb` already exists. Skipping schema creation.
2018-11-22 16:58:19,842 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Current version of schema `productdb`: 1.0.2
2018-11-22 16:58:19,843 org.flywaydb.core.internal.command.DbMigrate [main] (Slf4jLog.java:49) INFO  --> Schema `productdb` is up to date. No migration necessary.
2018-11-22 16:58:19,847 org.flywaydb.core.Flyway [main] (Slf4jLog.java:45) DEBUG --> Memory usage: 41 of 180M
2018-11-22 16:58:19,847 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:79) DEBUG --> ++++++Test query  product list....
2018-11-22 16:58:19,865 com.atomikos.logging.LoggerFactory [main] (Slf4jLogger.java:32) DEBUG --> Using Slf4J for logging.
2018-11-22 16:58:19,866 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:58:20,297 com.qloudbiz.product.dao.ProductDao [main] (ProductDao.java:172) DEBUG --> listall startRow = 0 , pageSize = 10
2018-11-22 16:58:20,298 com.qloudfin.sagas.persistence.jdbc.JdbcClient [main] (JdbcClient.java:72) DEBUG --> db config is {"driver":"org.mariadb.jdbc.MariaDbDataSource","ip":"192.168.11.130","port":3306,"dbname":"productdb","username":"root","password":"666666","testQuery":"select 1","maxPoolSize":5,"minPoolSize":5} 

2018-11-22 16:58:20,299 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:32) DEBUG --> AtomikosDataSoureBean 'a323f441-2693-4715-8ed6-74fd3e5de9ed': getConnection()...
2018-11-22 16:58:20,299 com.atomikos.jdbc.AbstractDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a323f441-2693-4715-8ed6-74fd3e5de9ed': init...
2018-11-22 16:58:20,299 com.atomikos.jdbc.AtomikosDataSourceBean [main] (Slf4jLogger.java:28) INFO  --> AtomikosDataSoureBean 'a323f441-2693-4715-8ed6-74fd3e5de9ed': initializing with [ xaDataSourceClassName=org.mariadb.jdbc.MariaDbDataSource, uniqueResourceName=a323f441-2693-4715-8ed6-74fd3e5de9ed, maxPoolSize=5, minPoolSize=5, borrowConnectionTimeout=30, maxIdleTime=60, reapTimeout=0, maintenanceInterval=60, testQuery=select 1, xaProperties=[user=root,password=666666,url=jdbc:mariadb://192.168.11.130:3306/productdb?maxPoolSize=5&autoReconnect=true], loginTimeout=0, maxLifetime=0]
2018-11-22 16:58:20,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:58:20,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling toString...
2018-11-22 16:58:20,399 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:58:20,400 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:58:20,400 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling prepareCall({CALL QLOUDFLOW_PRODUCT_LISTALL_PROCEDURE(?,?)})...
2018-11-22 16:58:20,417 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:58:20,417 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: calling getAutoCommit...
2018-11-22 16:58:20,417 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:24) WARN  --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: WARNING: transaction manager not running?
2018-11-22 16:58:20,417 com.atomikos.jdbc.AtomikosConnectionProxy [main] (Slf4jLogger.java:32) DEBUG --> atomikos connection proxy for org.mariadb.jdbc.MariaDbConnection@667a738: close()...
2018-11-22 16:58:20,418 com.csft.product.dao.test.ProductDaoTest [main] (ProductDaoTest.java:83) DEBUG --> query all product result[{code=Ipad, productId=257721b9bfa1456e915ccb413ef24555, name=-T490}, {code=P002, productId=72ea69fef20c4ce992cc04013c7917e5, name=Ipad mini 6}, {code=Ipad, productId=80ac07f5f0e14eacae73e6b5aad479f2, name=-T490}, {code=Ipad, productId=826853026a004506af80d1e2591b7191, name=-T490}, {code=Ipad, productId=87e99b45345749c1a4aa2bf3fbad9075, name=-T50}, {code=Ipad, productId=9fae417b8edc4a9287a4ca8cbea0ee89, name=-T50}, {code=thinkpad, productId=a44dc65f9b5549139e22a1167e061b4c, name=-T440}, {code=thinkpad, productId=a6f47c5a583c47339a09469de6aa2bff, name=-T440}, {code=thinkpad, productId=ba0982855127478891f00fb430fa3ac0, name=-T440}, {code=Ipad, productId=c81a57071da14b49853ac8474fb42b12, name=-T490}]
